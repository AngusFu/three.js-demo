!function(){"use strict";function e(e){return Array.prototype.slice.call(e)}function r(e){return document.querySelector(e)}function t(e,r){var t=e.x,n=e.y,i=e.z,o=new V.Vector3(t,n,i).project(r);return{x:Math.round(L*(1+o.x)),y:Math.round(T*(1-o.y))}}function n(e,r){var t=function(){e.aspect=window.innerWidth/window.innerHeight,e.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight)};j.push(t)}function i(){var e=new V.Scene,r=new V.CanvasRenderer({alpha:!0});return r.setClearColor(0,1),{scene:e,renderer:r}}function o(e){function r(){M(r),e()}r()}function a(e){var r=e.camera,t=e.renderer,i=e.container,a=e.render;n(r,t),t.setPixelRatio(window.devicePixelRatio),t.setSize(window.innerWidth,window.innerHeight),i.appendChild(t.domElement),o(a)}function s(e){for(var r=e.scene,t=e.amountX,n=e.amontY,i=e.sep,o=e.markPoint,a=0,s=[],l=[],c=new V.SpriteCanvasMaterial({color:9764859,program:function(e){e.beginPath(),e.arc(0,0,1,0,2*Math.PI,!0),e.fill()}}),p=0;p<t;p++)for(var d=0;d<n;d++){var f=new V.Sprite(c);f.position.x=p*i-t*i/2,f.position.z=d*i-n*i/2,s[a++]=f,r.add(f),o&&o(p,d,f,l)}return{particles:s,pointsWithFlag:l}}function l(){N.position.x+=.05*(k-N.position.x),N.position.y+=.05*(-A-N.position.y),N.lookAt(D.position);for(var e=0,r=0,n=0;n<O;n++)for(var i=0;i<B;i++){var o=I[e++];if(o.position.y=50*Math.sin(.3*(n+E))+50*Math.sin(.5*(i+E)),o.scale.x=o.scale.y=1.4*(Math.sin(.3*(n+E))+1)+1.4*(Math.sin(.5*(i+E))+1),W[n+"x"+i]){var a=q[r++];a.y=o.position.y;var s=W[n+"x"+i],l=s.style,c=s.mins,p=s.maxs,d=t(a,N),f=d.x,u=d.y,h=Math.min(Math.max(o.scale.x/6*p,c),p)+o.scale.x/30;l.transform="translate3d("+f+"px, "+u+"px, 0) scale("+h+")"}}H.render(D,N),E+=.1}function c(){_.position.x+=.05*(J-_.position.x),_.position.y+=.05*(-K-_.position.y),_.lookAt(Z.position);for(var e=0,r=0;r<U;r++)for(var t=0;t<X;t++){var n=ee[e++];n.position.y=50*Math.sin(.3*(r+Y))+50*Math.sin(.5*(t+Y)),n.scale.x=n.scale.y=1.4*(Math.sin(.3*(r+Y))+1)+1.4*(Math.sin(.5*(t+Y))+1)}$.render(Z,_),Y+=.1}function p(){pe.position.x+=.05*(oe-pe.position.x),pe.position.y+=.05*(-ae-pe.position.y),pe.lookAt(le.position);for(var e=0,r=0;r<te;r++)for(var t=0;t<ne;t++){var n=de[e++];n.position.y=50*Math.sin(.3*(r+ie))+50*Math.sin(.5*(t+ie)),n.scale.x=n.scale.y=1.4*(Math.sin(.3*(r+ie))+1)+1.4*(Math.sin(.5*(t+ie))+1)}ce.render(le,pe),ie+=.1}for(var d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=function(e,r){return r={exports:{}},e(r,r.exports),r.exports}(function(e){(function(){var r,t,n,i,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(e.exports=function(){return(r()-o)/1e6},t=process.hrtime,i=(r=function(){var e;return 1e9*(e=t())[0]+e[1]})(),a=1e9*process.uptime(),o=i-a):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(d)}),u="undefined"==typeof window?d:window,h=["moz","webkit"],m="AnimationFrame",v=u["request"+m],x=u["cancel"+m]||u["cancelRequest"+m],y=0;!v&&y<h.length;y++)v=u[h[y]+"Request"+m],x=u[h[y]+"Cancel"+m]||u[h[y]+"CancelRequest"+m];if(!v||!x){var w=0,g=0,S=[];v=function(e){if(0===S.length){var r=f(),t=Math.max(0,1e3/60-(r-w));w=t+r,setTimeout(function(){var e=S.slice(0);S.length=0;for(var r=0;r<e.length;r++)if(!e[r].cancelled)try{e[r].callback(w)}catch(e){setTimeout(function(){throw e},0)}},Math.round(t))}return S.push({handle:++g,callback:e,cancelled:!1}),g},x=function(e){for(var r=0;r<S.length;r++)S[r].handle===e&&(S[r].cancelled=!0)}}var M=function(e){return v.call(u,e)},C=function(){x.apply(u,arguments)},b=function(){u.requestAnimationFrame=v,u.cancelAnimationFrame=x};M.cancel=C,M.polyfill=b;var z=window.THREE;z.SpriteCanvasMaterial=function(e){z.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new z.Color(16777215),this.program=function(){},this.setValues(e)},z.SpriteCanvasMaterial.prototype=Object.create(z.Material.prototype),z.SpriteCanvasMaterial.prototype.constructor=z.SpriteCanvasMaterial,z.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,z.SpriteCanvasMaterial.prototype.clone=function(){var e=new z.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},z.CanvasRenderer=function(e){function r(){xe.setRGB(0,0,0),ye.setRGB(0,0,0),we.setRGB(0,0,0);for(var e=0,r=M.length;e<r;e++){var t=M[e],n=t.color;t.isAmbientLight?xe.add(n):t.isDirectionalLight?ye.add(n):t.isPointLight&&we.add(n)}}function t(e,r,t){for(var n=0,i=M.length;n<i;n++){var o=M[n];if(fe.copy(o.color),o.isDirectionalLight){a=ge.setFromMatrixPosition(o.matrixWorld).normalize();if((s=r.dot(a))<=0)continue;s*=o.intensity,t.add(fe.multiplyScalar(s))}else if(o.isPointLight){var a=ge.setFromMatrixPosition(o.matrixWorld),s=r.dot(ge.subVectors(a,e).normalize());if(s<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,t.add(fe.multiplyScalar(s))}}}function n(e,r,t){f(t.opacity),u(t.blending);var n=r.scale.x*U,i=r.scale.y*X,o=Math.sqrt(n*n+i*i);if(ve.min.set(e.x-o,e.y-o),ve.max.set(e.x+o,e.y+o),t.isSpriteMaterial){var a=t.map;if(null!==a){var s=ue[a.id];if(void 0!==s&&s.version===a.version||(s=c(a),ue[a.id]=s),void 0!==s.canvas){y(s.canvas);var l=a.image,p=l.width*a.offset.x,d=l.height*a.offset.y,h=l.width*a.repeat.x,m=l.height*a.repeat.y,v=n/h,w=i/m;$.save(),$.translate(e.x,e.y),0!==t.rotation&&$.rotate(t.rotation),$.translate(-n/2,-i/2),$.scale(v,w),$.translate(-p,-d),$.fillRect(p,d,h,m),$.restore()}}else y(t.color.getStyle()),$.save(),$.translate(e.x,e.y),0!==t.rotation&&$.rotate(t.rotation),$.scale(n,-i),$.fillRect(-.5,-.5,1,1),$.restore()}else t.isSpriteCanvasMaterial?(x(t.color.getStyle()),y(t.color.getStyle()),$.save(),$.translate(e.x,e.y),0!==t.rotation&&$.rotate(t.rotation),$.scale(n,i),t.program($),$.restore()):t.isPointsMaterial&&(y(t.color.getStyle()),$.save(),$.translate(e.x,e.y),0!==t.rotation&&$.rotate(t.rotation),$.scale(n*t.size,-i*t.size),$.fillRect(-.5,-.5,1,1),$.restore())}function i(e,r,t,n){if(f(n.opacity),u(n.blending),$.beginPath(),$.moveTo(e.positionScreen.x,e.positionScreen.y),$.lineTo(r.positionScreen.x,r.positionScreen.y),n.isLineBasicMaterial){if(h(n.linewidth),m(n.linecap),v(n.linejoin),n.vertexColors!==z.VertexColors)x(n.color.getStyle());else{var i=t.vertexColors[0].getStyle(),o=t.vertexColors[1].getStyle();if(i===o)x(i);else{try{var a=$.createLinearGradient(e.positionScreen.x,e.positionScreen.y,r.positionScreen.x,r.positionScreen.y);a.addColorStop(0,i),a.addColorStop(1,o)}catch(e){a=i}x(a)}}$.stroke(),ve.expandByScalar(2*n.linewidth)}else n.isLineDashedMaterial&&(h(n.linewidth),m(n.linecap),v(n.linejoin),x(n.color.getStyle()),w([n.dashSize,n.gapSize]),$.stroke(),ve.expandByScalar(2*n.linewidth),w([]))}function o(e,r,n,i,o,c,d,h){H.info.render.vertices+=3,H.info.render.faces++,f(h.opacity),u(h.blending),j=e.positionScreen.x,V=e.positionScreen.y,L=r.positionScreen.x,T=r.positionScreen.y,P=n.positionScreen.x,W=n.positionScreen.y,a(j,V,L,T,P,W),(h.isMeshLambertMaterial||h.isMeshPhongMaterial||h.isMeshStandardMaterial)&&null===h.map?(pe.copy(h.color),de.copy(h.emissive),h.vertexColors===z.FaceColors&&pe.multiply(d.color),ce.copy(xe),Se.copy(e.positionWorld).add(r.positionWorld).add(n.positionWorld).divideScalar(3),t(Se,d.normalModel,ce),ce.multiply(pe).add(de),!0===h.wireframe?s(ce,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(ce)):h.isMeshBasicMaterial||h.isMeshLambertMaterial||h.isMeshPhongMaterial||h.isMeshStandardMaterial?null!==h.map?h.map.mapping===z.UVMapping&&(O=d.uvs,p(j,V,L,T,P,W,O[i].x,O[i].y,O[o].x,O[o].y,O[c].x,O[c].y,h.map)):null!==h.envMap?h.envMap.mapping===z.SphericalReflectionMapping&&(Me.copy(d.vertexNormalsModel[i]).applyMatrix3(Ce),B=.5*Me.x+.5,E=.5*Me.y+.5,Me.copy(d.vertexNormalsModel[o]).applyMatrix3(Ce),k=.5*Me.x+.5,A=.5*Me.y+.5,Me.copy(d.vertexNormalsModel[c]).applyMatrix3(Ce),F=.5*Me.x+.5,D=.5*Me.y+.5,p(j,V,L,T,P,W,B,E,k,A,F,D,h.envMap)):(ce.copy(h.color),h.vertexColors===z.FaceColors&&ce.multiply(d.color),!0===h.wireframe?s(ce,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(ce)):h.isMeshNormalMaterial?(Me.copy(d.normalModel).applyMatrix3(Ce),ce.setRGB(Me.x,Me.y,Me.z).multiplyScalar(.5).addScalar(.5),!0===h.wireframe?s(ce,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(ce)):(ce.setRGB(1,1,1),!0===h.wireframe?s(ce,h.wireframeLinewidth,h.wireframeLinecap,h.wireframeLinejoin):l(ce))}function a(e,r,t,n,i,o){$.beginPath(),$.moveTo(e,r),$.lineTo(t,n),$.lineTo(i,o),$.closePath()}function s(e,r,t,n){h(r),m(t),v(n),x(e.getStyle()),$.stroke(),ve.expandByScalar(2*r)}function l(e){y(e.getStyle()),$.fill()}function c(e){if(0===e.version||e instanceof z.CompressedTexture||e instanceof z.DataTexture)return{canvas:void 0,version:e.version};var r=e.image;if(!1===r.complete)return{canvas:void 0,version:0};var t=e.wrapS===z.RepeatWrapping||e.wrapS===z.MirroredRepeatWrapping,n=e.wrapT===z.RepeatWrapping||e.wrapT===z.MirroredRepeatWrapping,i=e.wrapS===z.MirroredRepeatWrapping,o=e.wrapT===z.MirroredRepeatWrapping,a=document.createElement("canvas");a.width=r.width*(i?2:1),a.height=r.height*(o?2:1);var s=a.getContext("2d");s.setTransform(1,0,0,-1,0,r.height),s.drawImage(r,0,0),!0===i&&(s.setTransform(-1,0,0,-1,r.width,r.height),s.drawImage(r,-r.width,0)),!0===o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(r,0,r.height)),!0===i&&!0===o&&(s.setTransform(-1,0,0,1,r.width,0),s.drawImage(r,-r.width,r.height));var l="no-repeat";!0===t&&!0===n?l="repeat":!0===t?l="repeat-x":!0===n&&(l="repeat-y");var c=$.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function p(e,r,t,n,i,o,a,s,l,p,d,f,u){var h=ue[u.id];if(void 0!==h&&h.version===u.version||(h=c(u),ue[u.id]=h),void 0===h.canvas)return y("rgba( 0, 0, 0, 1)"),void $.fill();y(h.canvas);var m,v,x,w,g,S,M,C,b=u.offset.x/u.repeat.x,z=u.offset.y/u.repeat.y,R=u.image.width*u.repeat.x,j=u.image.height*u.repeat.y;l=(l+b)*R,p=(p+z)*j,d=(d+b)*R,f=(f+z)*j,t-=e,n-=r,i-=e,o-=r,0!==(M=(l-=a=(a+b)*R)*(f-=s=(s+z)*j)-(d-=a)*(p-=s))&&(g=e-(m=(f*t-p*i)*(C=1/M))*a-(x=(l*i-d*t)*C)*s,S=r-(v=(f*n-p*o)*C)*a-(w=(l*o-d*n)*C)*s,$.save(),$.transform(m,v,x,w,g,S),$.fill(),$.restore())}function d(e,r,t){var n,i=r.x-e.x,o=r.y-e.y,a=i*i+o*o;0!==a&&(i*=n=t/Math.sqrt(a),o*=n,r.x+=i,r.y+=o,e.x-=i,e.y-=o)}function f(e){re!==e&&($.globalAlpha=e,re=e)}function u(e){te!==e&&(e===z.NormalBlending?$.globalCompositeOperation="source-over":e===z.AdditiveBlending?$.globalCompositeOperation="lighter":e===z.SubtractiveBlending?$.globalCompositeOperation="darker":e===z.MultiplyBlending&&($.globalCompositeOperation="multiply"),te=e)}function h(e){oe!==e&&($.lineWidth=e,oe=e)}function m(e){ae!==e&&($.lineCap=e,ae=e)}function v(e){se!==e&&($.lineJoin=e,se=e)}function x(e){ne!==e&&($.strokeStyle=e,ne=e)}function y(e){ie!==e&&($.fillStyle=e,ie=e)}function w(e){le.length!==e.length&&($.setLineDash(e),le=e)}e=e||{};var g,S,M,C,b,R,j,V,L,T,P,W,O,B,E,k,A,F,D,H=this,N=new z.Projector,G=void 0!==e.canvas?e.canvas:document.createElement("canvas"),I=G.width,q=G.height,U=Math.floor(I/2),X=Math.floor(q/2),Y=0,J=0,K=I,Q=q,Z=1,$=G.getContext("2d",{alpha:!0===e.alpha}),_=new z.Color(0),ee=!0===e.alpha?0:1,re=1,te=0,ne=null,ie=null,oe=null,ae=null,se=null,le=[],ce=new z.Color,pe=new z.Color,de=new z.Color,fe=new z.Color,ue={},he=new z.Box2,me=new z.Box2,ve=new z.Box2,xe=new z.Color,ye=new z.Color,we=new z.Color,ge=new z.Vector3,Se=new z.Vector3,Me=new z.Vector3,Ce=new z.Matrix3;void 0===$.setLineDash&&($.setLineDash=function(){}),this.domElement=G,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(e){void 0!==e&&(Z=e)},this.setSize=function(e,r,t){I=e*Z,q=r*Z,G.width=I,G.height=q,U=Math.floor(I/2),X=Math.floor(q/2),!1!==t&&(G.style.width=e+"px",G.style.height=r+"px"),he.min.set(-U,-X),he.max.set(U,X),me.min.set(-U,-X),me.max.set(U,X),re=1,te=0,ne=null,ie=null,oe=null,ae=null,se=null,this.setViewport(0,0,e,r)},this.setViewport=function(e,r,t,n){Y=e*Z,J=r*Z,K=t*Z,Q=n*Z},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,r){_.set(e),ee=void 0!==r?r:1,me.min.set(-U,-X),me.max.set(U,X)},this.setClearColorHex=function(e,r){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,r)},this.getClearColor=function(){return _},this.getClearAlpha=function(){return ee},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===me.isEmpty()&&(me.intersect(he),me.expandByScalar(2),me.min.x=me.min.x+U,me.min.y=-me.min.y+X,me.max.x=me.max.x+U,me.max.y=-me.max.y+X,ee<1&&$.clearRect(0|me.min.x,0|me.max.y,me.max.x-me.min.x|0,me.min.y-me.max.y|0),ee>0&&(u(z.NormalBlending),f(1),y("rgba("+Math.floor(255*_.r)+","+Math.floor(255*_.g)+","+Math.floor(255*_.b)+","+ee+")"),$.fillRect(0|me.min.x,0|me.max.y,me.max.x-me.min.x|0,me.min.y-me.max.y|0)),me.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,t){if(void 0!==t.isCamera){var a=e.background;a&&a.isColor?(y("rgb("+Math.floor(255*a.r)+","+Math.floor(255*a.g)+","+Math.floor(255*a.b)+")"),$.fillRect(0,0,I,q)):!0===this.autoClear&&this.clear(),H.info.render.vertices=0,H.info.render.faces=0,$.setTransform(K/I,0,0,-Q/q,Y,q-J),$.translate(U,X),g=N.projectScene(e,t,this.sortObjects,this.sortElements),S=g.elements,M=g.lights,Ce.getNormalMatrix(t.matrixWorldInverse),r();for(var s=0,l=S.length;s<l;s++){var c=S[s],p=c.material;if(void 0!==p&&0!==p.opacity){if(ve.makeEmpty(),c instanceof z.RenderableSprite)(C=c).x*=U,C.y*=X,n(C,c,p);else if(c instanceof z.RenderableLine)C=c.v1,b=c.v2,C.positionScreen.x*=U,C.positionScreen.y*=X,b.positionScreen.x*=U,b.positionScreen.y*=X,ve.setFromPoints([C.positionScreen,b.positionScreen]),!0===he.intersectsBox(ve)&&i(C,b,c,p);else if(c instanceof z.RenderableFace){if(C=c.v1,b=c.v2,R=c.v3,C.positionScreen.z<-1||C.positionScreen.z>1)continue;if(b.positionScreen.z<-1||b.positionScreen.z>1)continue;if(R.positionScreen.z<-1||R.positionScreen.z>1)continue;C.positionScreen.x*=U,C.positionScreen.y*=X,b.positionScreen.x*=U,b.positionScreen.y*=X,R.positionScreen.x*=U,R.positionScreen.y*=X,p.overdraw>0&&(d(C.positionScreen,b.positionScreen,p.overdraw),d(b.positionScreen,R.positionScreen,p.overdraw),d(R.positionScreen,C.positionScreen,p.overdraw)),ve.setFromPoints([C.positionScreen,b.positionScreen,R.positionScreen]),!0===he.intersectsBox(ve)&&o(C,b,R,0,1,2,c,p)}me.union(ve)}}$.setTransform(1,0,0,1,0,0)}else console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}};var R=window.THREE;R.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},R.RenderableFace=function(){this.id=0,this.v1=new R.RenderableVertex,this.v2=new R.RenderableVertex,this.v3=new R.RenderableVertex,this.normalModel=new R.Vector3,this.vertexNormalsModel=[new R.Vector3,new R.Vector3,new R.Vector3],this.vertexNormalsLength=0,this.color=new R.Color,this.material=null,this.uvs=[new R.Vector2,new R.Vector2,new R.Vector2],this.z=0,this.renderOrder=0},R.RenderableVertex=function(){this.position=new R.Vector3,this.positionWorld=new R.Vector3,this.positionScreen=new R.Vector4,this.visible=!0},R.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},R.RenderableLine=function(){this.id=0,this.v1=new R.RenderableVertex,this.v2=new R.RenderableVertex,this.vertexColors=[new R.Color,new R.Color],this.material=null,this.z=0,this.renderOrder=0},R.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new R.Vector2,this.material=null,this.renderOrder=0},R.Projector=function(){function e(t){if(!1!==t.visible){if(t instanceof R.Light)W.lights.push(t);else if(t instanceof R.Mesh||t instanceof R.Line||t instanceof R.Points){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===G.intersectsObject(t))return;r(t)}else if(t instanceof R.Sprite){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===G.intersectsSprite(t))return;r(t)}for(var n=t.children,i=0,o=n.length;i<o;i++)e(n[i])}}function r(e){(p=n()).id=e.id,p.object=e,O.setFromMatrixPosition(e.matrixWorld),O.applyMatrix4(D),p.z=O.z,p.renderOrder=e.renderOrder,W.objects.push(p)}function t(e,r,t){var n=1/e.w;e.z*=n,e.z>=-1&&e.z<=1&&((y=s()).id=r.id,y.x=e.x*n,y.y=e.y*n,y.z=e.z,y.renderOrder=r.renderOrder,y.object=r,y.rotation=r.rotation,y.scale.x=r.scale.x*Math.abs(y.x-(e.x+t.projectionMatrix.elements[0])/(e.w+t.projectionMatrix.elements[12])),y.scale.y=r.scale.y*Math.abs(y.y-(e.y+t.projectionMatrix.elements[5])/(e.w+t.projectionMatrix.elements[13])),y.material=r.material,W.elements.push(y))}function n(){if(d===M){var e=new R.RenderableObject;return S.push(e),M++,d++,e}return S[d++]}function i(){if(u===b){var e=new R.RenderableVertex;return C.push(e),b++,u++,e}return C[u++]}function o(){if(m===j){var e=new R.RenderableFace;return z.push(e),j++,m++,e}return z[m++]}function a(){if(x===L){var e=new R.RenderableLine;return V.push(e),L++,x++,e}return V[x++]}function s(){if(w===P){var e=new R.RenderableSprite;return T.push(e),P++,w++,e}return T[w++]}function l(e,r){return e.renderOrder!==r.renderOrder?e.renderOrder-r.renderOrder:e.z!==r.z?r.z-e.z:e.id!==r.id?e.id-r.id:0}function c(e,r){var t=0,n=1,i=e.z+e.w,o=r.z+r.w,a=-e.z+e.w,s=-r.z+r.w;return i>=0&&o>=0&&a>=0&&s>=0||!(i<0&&o<0||a<0&&s<0)&&(i<0?t=Math.max(t,i/(i-o)):o<0&&(n=Math.min(n,i/(i-o))),a<0?t=Math.max(t,a/(a-s)):s<0&&(n=Math.min(n,a/(a-s))),!(n<t)&&(e.lerp(r,t),r.lerp(e,1-n),!0))}var p,d,f,u,h,m,v,x,y,w,g,S=[],M=0,C=[],b=0,z=[],j=0,V=[],L=0,T=[],P=0,W={objects:[],lights:[],elements:[]},O=new R.Vector3,B=new R.Vector4,E=new R.Box3(new R.Vector3(-1,-1,-1),new R.Vector3(1,1,1)),k=new R.Box3,A=new Array(3),F=new R.Matrix4,D=new R.Matrix4,H=new R.Matrix4,N=new R.Matrix3,G=new R.Frustum,I=new R.Vector4,q=new R.Vector4;this.projectVector=function(e,r){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(r)},this.unprojectVector=function(e,r){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(r)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var U=new function(){function e(e){M=(S=e).material,b.getNormalMatrix(S.matrixWorld),x.length=0,y.length=0,w.length=0}function r(e){var r=e.position,t=e.positionWorld,n=e.positionScreen;t.copy(r).applyMatrix4(g),n.copy(t).applyMatrix4(D);var i=1/n.w;n.x*=i,n.y*=i,n.z*=i,e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1}function t(e,t,n){(f=i()).position.set(e,t,n),r(f)}function n(e,r,t){x.push(e,r,t)}function s(e,r,t){y.push(e,r,t)}function l(e,r){w.push(e,r)}function p(e,r,t){return!0===e.visible||!0===r.visible||!0===t.visible||(A[0]=e.positionScreen,A[1]=r.positionScreen,A[2]=t.positionScreen,E.intersectsBox(k.setFromPoints(A)))}function d(e,r,t){return(t.positionScreen.x-e.positionScreen.x)*(r.positionScreen.y-e.positionScreen.y)-(t.positionScreen.y-e.positionScreen.y)*(r.positionScreen.x-e.positionScreen.x)<0}function u(e,r){var t=C[e],n=C[r];t.positionScreen.copy(t.position).applyMatrix4(H),n.positionScreen.copy(n.position).applyMatrix4(H),!0===c(t.positionScreen,n.positionScreen)&&(t.positionScreen.multiplyScalar(1/t.positionScreen.w),n.positionScreen.multiplyScalar(1/n.positionScreen.w),(v=a()).id=S.id,v.v1.copy(t),v.v2.copy(n),v.z=Math.max(t.positionScreen.z,n.positionScreen.z),v.renderOrder=S.renderOrder,v.material=S.material,S.material.vertexColors===R.VertexColors&&(v.vertexColors[0].fromArray(y,3*e),v.vertexColors[1].fromArray(y,3*r)),W.elements.push(v))}function m(e,r,t){var n=arguments,i=C[e],a=C[r],s=C[t];if(!1!==p(i,a,s)&&(M.side===R.DoubleSide||!0===d(i,a,s))){(h=o()).id=S.id,h.v1.copy(i),h.v2.copy(a),h.v3.copy(s),h.z=(i.positionScreen.z+a.positionScreen.z+s.positionScreen.z)/3,h.renderOrder=S.renderOrder,h.normalModel.fromArray(x,3*e),h.normalModel.applyMatrix3(b).normalize();for(var l=0;l<3;l++){var c=h.vertexNormalsModel[l];c.fromArray(x,3*n[l]),c.applyMatrix3(b).normalize(),h.uvs[l].fromArray(w,2*n[l])}h.vertexNormalsLength=3,h.material=S.material,W.elements.push(h)}}var x=[],y=[],w=[],S=null,M=null,b=new R.Matrix3;return{setObject:e,projectVertex:r,checkTriangleVisibility:p,checkBackfaceCulling:d,pushVertex:t,pushNormal:n,pushColor:s,pushUv:l,pushLine:u,pushTriangle:m}};this.projectScene=function(r,n,s,p){m=0,x=0,w=0,W.elements.length=0,!0===r.autoUpdate&&r.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),F.copy(n.matrixWorldInverse.getInverse(n.matrixWorld)),D.multiplyMatrices(n.projectionMatrix,F),G.setFromMatrix(D),d=0,W.objects.length=0,W.lights.length=0,e(r),!0===s&&W.objects.sort(l);for(var f=W.objects,y=0,S=f.length;y<S;y++){var M=f[y].object,b=M.geometry;if(U.setObject(M),g=M.matrixWorld,u=0,M instanceof R.Mesh){if(b instanceof R.BufferGeometry){var z=b.attributes,j=b.groups;if(void 0===z.position)continue;for(var V=0,L=(we=z.position.array).length;V<L;V+=3)U.pushVertex(we[V],we[V+1],we[V+2]);if(void 0!==z.normal)for(var T=z.normal.array,V=0,L=T.length;V<L;V+=3)U.pushNormal(T[V],T[V+1],T[V+2]);if(void 0!==z.uv)for(var P=z.uv.array,V=0,L=P.length;V<L;V+=2)U.pushUv(P[V],P[V+1]);if(null!==b.index){var E=b.index.array;if(j.length>0)for(var k=0;k<j.length;k++)for(var A=j[k],V=A.start,L=A.start+A.count;V<L;V+=3)U.pushTriangle(E[V],E[V+1],E[V+2]);else for(var V=0,L=E.length;V<L;V+=3)U.pushTriangle(E[V],E[V+1],E[V+2])}else for(var V=0,L=we.length/3;V<L;V+=3)U.pushTriangle(V,V+1,V+2)}else if(b instanceof R.Geometry){var X=b.vertices,Y=b.faces,J=b.faceVertexUvs[0];N.getNormalMatrix(g);for(var K=M.material,Q=Array.isArray(K),Z=0,$=X.length;Z<$;Z++){Me=X[Z];if(O.copy(Me),!0===K.morphTargets)for(var _=b.morphTargets,ee=M.morphTargetInfluences,re=0,te=_.length;re<te;re++){var ne=ee[re];if(0!==ne){var ie=_[re].vertices[Z];O.x+=(ie.x-Me.x)*ne,O.y+=(ie.y-Me.y)*ne,O.z+=(ie.z-Me.z)*ne}}U.pushVertex(O.x,O.y,O.z)}for(var oe=0,ae=Y.length;oe<ae;oe++){var se=Y[oe];if(void 0!==(K=!0===Q?M.material[se.materialIndex]:M.material)){var le=K.side,ce=C[se.a],pe=C[se.b],de=C[se.c];if(!1!==U.checkTriangleVisibility(ce,pe,de)){var fe=U.checkBackfaceCulling(ce,pe,de);if(le!==R.DoubleSide){if(le===R.FrontSide&&!1===fe)continue;if(le===R.BackSide&&!0===fe)continue}(h=o()).id=M.id,h.v1.copy(ce),h.v2.copy(pe),h.v3.copy(de),h.normalModel.copy(se.normal),!1!==fe||le!==R.BackSide&&le!==R.DoubleSide||h.normalModel.negate(),h.normalModel.applyMatrix3(N).normalize();for(var ue=se.vertexNormals,he=0,me=Math.min(ue.length,3);he<me;he++){var ve=h.vertexNormalsModel[he];ve.copy(ue[he]),!1!==fe||le!==R.BackSide&&le!==R.DoubleSide||ve.negate(),ve.applyMatrix3(N).normalize()}h.vertexNormalsLength=ue.length;var xe=J[oe];if(void 0!==xe)for(var ye=0;ye<3;ye++)h.uvs[ye].copy(xe[ye]);h.color=se.color,h.material=K,h.z=(ce.positionScreen.z+pe.positionScreen.z+de.positionScreen.z)/3,h.renderOrder=M.renderOrder,W.elements.push(h)}}}}}else if(M instanceof R.Line){if(H.multiplyMatrices(D,g),b instanceof R.BufferGeometry){if(void 0!==(z=b.attributes).position){for(var we=z.position.array,V=0,L=we.length;V<L;V+=3)U.pushVertex(we[V],we[V+1],we[V+2]);if(void 0!==z.color)for(var ge=z.color.array,V=0,L=ge.length;V<L;V+=3)U.pushColor(ge[V],ge[V+1],ge[V+2]);if(null!==b.index)for(var V=0,L=(E=b.index.array).length;V<L;V+=2)U.pushLine(E[V],E[V+1]);else for(var Se=M instanceof R.LineSegments?2:1,V=0,L=we.length/3-1;V<L;V+=Se)U.pushLine(V,V+1)}}else if(b instanceof R.Geometry){if(0===(X=M.geometry.vertices).length)continue;(ce=i()).positionScreen.copy(X[0]).applyMatrix4(H);for(var Se=M instanceof R.LineSegments?2:1,Z=1,$=X.length;Z<$;Z++)(ce=i()).positionScreen.copy(X[Z]).applyMatrix4(H),(Z+1)%Se>0||(pe=C[u-2],I.copy(ce.positionScreen),q.copy(pe.positionScreen),!0===c(I,q)&&(I.multiplyScalar(1/I.w),q.multiplyScalar(1/q.w),(v=a()).id=M.id,v.v1.positionScreen.copy(I),v.v2.positionScreen.copy(q),v.z=Math.max(I.z,q.z),v.renderOrder=M.renderOrder,v.material=M.material,M.material.vertexColors===R.VertexColors&&(v.vertexColors[0].copy(M.geometry.colors[Z]),v.vertexColors[1].copy(M.geometry.colors[Z-1])),W.elements.push(v)))}}else if(M instanceof R.Points){if(H.multiplyMatrices(D,g),b instanceof R.Geometry)for(var Z=0,$=(X=M.geometry.vertices).length;Z<$;Z++){var Me=X[Z];B.set(Me.x,Me.y,Me.z,1),B.applyMatrix4(H),t(B,M,n)}}else M instanceof R.Sprite&&(B.set(g.elements[12],g.elements[13],g.elements[14],1),B.applyMatrix4(D),t(B,M,n))}return!0===p&&W.elements.sort(l),W}};var j=[],V=window.THREE,L=window.innerWidth/2,T=window.innerHeight/2;window.addEventListener("resize",function(){L=window.innerWidth/2,T=window.innerHeight/2,j.forEach(function(e){return e()})});var P=[57,52,57,52,57,57,52,52,57,52,57,52,52,57,52,57,57,57,52,57,57,57,52,52,57,52,57,52],W=function(e){var t=e.map(function(e){var t=e.cn,n=e.en,i=e.mins,o=e.maxs,a=document.createElement("div");return a.className="flag-1",a.innerHTML="<p>"+n+"</p><h2>"+t+"</h2>",r("#three-js-screen-1").appendChild(a),{style:a.style,mins:i,maxs:o}});return e.reduce(function(e,r,n){return e[r.cord]=t[n],e},{})}([{en:"Technology driven retail",cn:"技术驱动零售",cord:"10x30",maxs:.6,mins:.2},{en:"New retail",cn:"新零售",cord:"24x40",maxs:1.5,mins:1},{en:"Digital marketing",cn:"数字营销",cord:"28x32",maxs:.6,mins:.2},{en:"Reconstruction of freight yard",cn:"人货场重构",cord:"38x24",maxs:.5,mins:.15},{en:"Data brand",cn:"数据赋能品牌",cord:"33x38",maxs:1.2,mins:.9}]),O=50,B=60,E=0,k=85,A=-420,F=i(),D=F.scene,H=F.renderer,N=new V.PerspectiveCamera(120,window.innerWidth/window.innerHeight,1,1e4);N.position.z=800;var G=s({scene:D,amountX:O,amontY:B,sep:70,markPoint:function(e,r,t,n){if(e+"x"+r in W){var i=t.position,o=i.x,a=i.z;n.push({x:o,z:a})}}}),I=G.particles,q=G.pointsWithFlag;a({render:l,camera:N,renderer:H,container:r("#three-js-screen-1")});var U=50,X=60,Y=0,J=885,K=-359,Q=i(),Z=Q.scene,$=Q.renderer,_=new V.PerspectiveCamera(120,window.innerWidth/window.innerHeight,1,1e4);_.position.z=500;var ee=s({scene:Z,amountX:U,amontY:X,sep:70}).particles;a({render:c,camera:_,renderer:$,container:r("#three-js-screen-2")});var re=r("#three-js-screen-3"),te=60,ne=24,ie=0,oe=885,ae=-359,se=i(),le=se.scene,ce=se.renderer,pe=new V.PerspectiveCamera(120,window.innerWidth/window.innerHeight,1,1e4);pe.position.z=0;var de=s({scene:le,amountX:te,amontY:ne,sep:70}).particles;!function(){var r=function(r,t){return e(re.querySelectorAll(r)).map(function(e,r){return t&&t(e,r),e})},t=r(".logo-flip",function(e,r){var t=P[r];e.style.backgroundColor="rgb("+t+","+t+","+t+")"}),n=function(){r(".hlight",function(e){return e.classList.remove("hlight")});var e=function(){return Math.random()>.2?3*Math.random()|0:3},n=function(){for(var r=[e(),e()];r[0]===r[1];)r[1]=e();return[7*r[0]+(4*Math.random()|0),7*r[1]+(3*Math.random()|0)+4]}(),i=n[0],o=n[1];t[i].classList.add("hlight"),t[o].classList.add("hlight")};!function e(){n(),setTimeout(e,5e3*Math.random()+2e3)}()}(),a({render:p,camera:pe,renderer:ce,container:re}),new window.Swiper(".swiper-container",{loop:!0,autoplay:!0,speed:1e3,autoplayDisableOnInteraction:!1})}();
//# sourceMappingURL=bundle.js.map
