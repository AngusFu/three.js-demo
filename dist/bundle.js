!function(){"use strict";function n(){w(n),e()}function e(){S.position.x+=.05*(z-S.position.x),S.position.y+=.05*(-C-S.position.y),S.lookAt(W.position);for(var n=0,e=0,i=0;i<g;i++)for(var o=0;o<M;o++){var r=k[n++];if(r.position.y=50*Math.sin(.3*(i+b))+50*Math.sin(.5*(o+b)),r.scale.x=r.scale.y=1.4*(Math.sin(.3*(i+b))+1)+1.4*(Math.sin(.5*(o+b))+1),H[i+"x"+o]){var a=q[e++];a.y=r.position.y;var c=H[i+"x"+o],s=c.style,d=c.mins,l=c.maxs,u=t(a,S),f=u.x,p=u.y,w=Math.min(Math.max(r.scale.x/6*l,d),l)+r.scale.x/30;s.transform="translate3d("+f+"px, "+p+"px, 0) scale("+w+")"}}D.render(W,S),b+=.1}function t(n,e){var t=n.x,i=n.y,o=n.z,r=new v.Vector3(t,i,o).project(e);return{x:Math.round(R*(1+r.x)),y:Math.round(T*(1-r.y))}}for(var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=function(n,e){return e={exports:{}},n(e,e.exports),e.exports}(function(n){(function(){var e,t,i,o,r,a;"undefined"!=typeof performance&&null!==performance&&performance.now?n.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(n.exports=function(){return(e()-r)/1e6},t=process.hrtime,o=(e=function(){var n;return 1e9*(n=t())[0]+n[1]})(),a=1e9*process.uptime(),r=o-a):Date.now?(n.exports=function(){return Date.now()-i},i=Date.now()):(n.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(i)}),r="undefined"==typeof window?i:window,a=["moz","webkit"],c="AnimationFrame",s=r["request"+c],d=r["cancel"+c]||r["cancelRequest"+c],l=0;!s&&l<a.length;l++)s=r[a[l]+"Request"+c],d=r[a[l]+"Cancel"+c]||r[a[l]+"CancelRequest"+c];if(!s||!d){var u=0,f=0,p=[];s=function(n){if(0===p.length){var e=o(),t=Math.max(0,1e3/60-(e-u));u=t+e,setTimeout(function(){var n=p.slice(0);p.length=0;for(var e=0;e<n.length;e++)if(!n[e].cancelled)try{n[e].callback(u)}catch(n){setTimeout(function(){throw n},0)}},Math.round(t))}return p.push({handle:++f,callback:n,cancelled:!1}),f},d=function(n){for(var e=0;e<p.length;e++)p[e].handle===n&&(p[e].cancelled=!0)}}var w=function(n){return s.call(r,n)},h=function(){d.apply(r,arguments)},m=function(){r.requestAnimationFrame=s,r.cancelAnimationFrame=d};w.cancel=h,w.polyfill=m;var x=[{en:"Technology driven retail",cn:"技术驱动零售",cord:"10x30",maxs:.6,mins:.2},{en:"New retail",cn:"新零售",cord:"24x40",maxs:1.5,mins:1},{en:"Digital marketing",cn:"数字营销",cord:"28x32",maxs:.6,mins:.2},{en:"Reconstruction of freight yard",cn:"人货场重构",cord:"38x24",maxs:.5,mins:.15},{en:"Data brand",cn:"数据赋能品牌",cord:"33x38",maxs:1.2,mins:.9}],v=window.THREE,y=70,g=50,M=60;window.x=function(n){return z=n},window.y=function(n){return C=n};var b=0,z=85,C=-420,R=window.innerWidth/2,T=window.innerHeight/2,E=x.map(function(n){var e=n.cn,t=n.en,i=n.mins,o=n.maxs,r=document.createElement("div");return r.className="flag-1",r.innerHTML="<p>"+t+"</p><h2>"+e+"</h2>",document.body.appendChild(r),{style:r.style,mins:i,maxs:o}}),H=x.reduce(function(n,e,t){return n[e.cord]=E[t],n},{}),W=new v.Scene,D=new v.CanvasRenderer,S=new v.PerspectiveCamera(120,window.innerWidth/window.innerHeight,1,1e4);S.position.z=800;var P=function(){for(var n=0,e=[],t=[],i=new v.SpriteCanvasMaterial({color:9764859,program:function(n){n.beginPath(),n.arc(0,0,1,0,2*Math.PI,!0),n.fill()}}),o=0;o<g;o++)for(var r=0;r<M;r++){var a=new v.Sprite(i);if(a.position.x=o*y-g*y/2,a.position.z=r*y-M*y/2,e[n++]=a,o+"x"+r in H){var c=a.position,s=c.x,d=c.z;t.push({x:s,z:d})}}return{particles:e,pointsWithFlag:t}}(),k=P.particles,q=P.pointsWithFlag;k.forEach(function(n){return W.add(n)}),function(){var e=document.createElement("div");D.setPixelRatio(window.devicePixelRatio),D.setSize(window.innerWidth,window.innerHeight),e.appendChild(D.domElement),document.body.appendChild(e),n(),window.addEventListener("resize",function(){R=window.innerWidth/2,T=window.innerHeight/2,S.aspect=window.innerWidth/window.innerHeight,S.updateProjectionMatrix(),D.setSize(window.innerWidth,window.innerHeight)},!1)}(),function(){function n(c){o()-a>100&&(a=c,t.fillStyle="rgba(0, 0, 0, 0.05)",t.fillRect(0,0,e.width,e.height),t.fillStyle="#01c7bf",t.font=i+"px arial",t.fillText(Math.random()>.4?1:0,5,r*i+10),r=r*i>e.height?0:r,r+=2),w(n)}var e=document.createElement("canvas");e.width=20,e.height=300;var t=e.getContext("2d"),i=12,r=(Math.floor(e.width/i),0);w(n);var a=o();document.body.appendChild(e),e.style.cssText="\n    position: absolute;\n    z-index: 9;\n    left: 30px;\n    top: 60px;\n  "}()}();
//# sourceMappingURL=bundle.js.map
