{"version":3,"file":"bundle.js","sources":["../scripts/common.js","../scripts/screen-1.js","../scripts/screen-2.js","../scripts/screen-3.js","../node_modules/.npminstall/raf/3.3.2/raf/index.js","../node_modules/.npminstall/performance-now/2.1.0/performance-now/lib/performance-now.js","../scripts/CanvasRenderer.js","../scripts/Projector.js","../config.js","../index.js"],"sourcesContent":["import requestAnimationFrame from \"raf\";\nimport \"./CanvasRenderer\";\nimport \"./Projector\";\n\nconst callbacksOnResize = [];\n\nexport const THREE = window.THREE;\nexport { requestAnimationFrame };\n\nexport let windowHalfX = window.innerWidth / 2;\nexport let windowHalfY = window.innerHeight / 2 / 2;\n\nexport function toArray(arrLike) {\n  return Array.prototype.slice.call(arrLike);\n}\nexport function $(selector) {\n  return document.querySelector(selector);\n}\nexport function $$(selector) {\n  return toArray(document.querySelectorAll(selector));\n}\n\n/**\n * transform point in Three.js world to client\n */\nexport function toScreenCords({ x, y, z }, camera) {\n  const vector = new THREE.Vector3(x, y, z).project(camera);\n  return {\n    x: Math.round(windowHalfX * (1 + vector.x)),\n    y: Math.round(windowHalfY * (1 - vector.y)) + windowHalfY * 2\n  };\n}\n\n/**\n * add updating function that will be invoked window resize\n */\nexport function bindResizeCallback(camera, renderer) {\n  const update = function() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight / 2);\n  };\n  callbacksOnResize.push(update);\n}\n\nwindow.addEventListener(\"resize\", function onWindowResize() {\n  windowHalfX = window.innerWidth / 2;\n  windowHalfY = window.innerHeight / 2 / 2;\n  callbacksOnResize.forEach(fn => fn());\n});\n\n/**\n * Axis helper\n */\nexport function addAxisHelper(scene) {\n  const axisHelper = new THREE.AxisHelper(1000000);\n  axisHelper.position.set(0, 0, 0);\n  scene.add(axisHelper);\n}\n\n/**\n * create scene & renderer\n */\nexport function createSceneAndRenderer() {\n  const scene = new THREE.Scene();\n  const renderer = new THREE.CanvasRenderer({ alpha: true });\n  renderer.setClearColor(0x000000, 1);\n  return { scene, renderer };\n}\n\n/**\n * update stage\n */\nexport function animate(render) {\n  let stop = false;\n\n  function animate() {\n    requestAnimationFrame(animate);\n    stop || render();\n  }\n\n  animate();\n\n  return {\n    pause() {\n      stop = true;\n    },\n    play() {\n      stop = false;\n    }\n  };\n}\n\n/**\n * initialize\n */\nexport function initThreeJS({ camera, renderer, container, render }) {\n  bindResizeCallback(camera, renderer);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(window.innerWidth, window.innerHeight / 2);\n  container.appendChild(renderer.domElement);\n  return animate(render);\n}\n\n/**\n * 波纹粒子\n */\nexport function initParticles({ scene, amountX, amontY, sep, markPoint }) {\n  let index = 0;\n  const particles = [];\n  const pointsWithFlag = [];\n  const material = new THREE.SpriteCanvasMaterial({\n    color: 0x94fffb,\n    program: function(context) {\n      context.beginPath();\n      context.arc(0, 0, 1, 0, Math.PI * 2, true);\n      context.fill();\n    }\n  });\n\n  for (let i = 0; i < amountX; i++) {\n    for (let j = 0; j < amontY; j++) {\n      const particle = new THREE.Sprite(material);\n      particle.position.x = i * sep - amountX * sep / 2;\n      particle.position.z = j * sep - amontY * sep / 2;\n      particles[index++] = particle;\n\n      scene.add(particle);\n      markPoint && markPoint(i, j, particle, pointsWithFlag);\n    }\n  }\n  return {\n    particles,\n    pointsWithFlag\n  };\n}\n","import {\r\n  $,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  toScreenCords,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS\r\n} from \"./common\";\r\n\r\nimport { screenOneFlags } from \"../config\";\r\nconst screenOneFlagMap = initFlags(screenOneFlags);\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 50;\r\nconst AMOUNTY = 60;\r\n\r\nlet count = 0;\r\nlet mouseX = 85;\r\nlet mouseY = -420;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 800;\r\n\r\nconst { particles, pointsWithFlag } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION,\r\n  markPoint: (i, j, particle, marked) => {\r\n    if (`${i}x${j}` in screenOneFlagMap) {\r\n      const { x, z } = particle.position;\r\n      marked.push({ x, z });\r\n    }\r\n  }\r\n});\r\n\r\nexport default initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: $(\"#three-js-screen-1\")\r\n});\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n\r\n      if (screenOneFlagMap[`${ix}x${iy}`]) {\r\n        const point = pointsWithFlag[j++];\r\n        point.y = particle.position.y;\r\n\r\n        const { style, mins, maxs } = screenOneFlagMap[`${ix}x${iy}`];\r\n        const { x, y } = toScreenCords(point, camera);\r\n\r\n        const scale =\r\n          Math.min(Math.max(particle.scale.x / 6 * maxs, mins), maxs) +\r\n          particle.scale.x / 30;\r\n        style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\r\n      }\r\n    }\r\n  }\r\n\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n\r\nfunction initFlags(flags) {\r\n  const ret = flags.map(flag => {\r\n    const { cn, en, mins, maxs } = flag;\r\n    const div = document.createElement(\"div\");\r\n\r\n    div.className = \"flag-1\";\r\n    div.innerHTML = `<p>${en}</p><h2>${cn}</h2>`;\r\n    $(\"#three-js-screen-1\").appendChild(div);\r\n\r\n    return {\r\n      style: div.style,\r\n      mins,\r\n      maxs\r\n    };\r\n  });\r\n\r\n  return flags.reduce((acc, f, i) => {\r\n    acc[f.cord] = ret[i];\r\n    return acc;\r\n  }, {});\r\n}\r\n","import {\r\n  $,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS\r\n} from \"./common\";\r\n\r\nimport { screenOneFlags } from \"../config\";\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 50;\r\nconst AMOUNTY = 60;\r\n\r\nlet count = 0;\r\nlet mouseX = 885;\r\nlet mouseY = -359;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 500;\r\n\r\nconst { particles } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION\r\n});\r\n\r\nexport default initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: $(\"#three-js-screen-2\")\r\n});\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n    }\r\n  }\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n","import {\r\n  $,\r\n  toArray,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS,\r\n  toScreenCords\r\n} from \"./common\";\r\nimport { logoBgColorMatrix } from \"../config\";\r\n\r\nimport { screenThreeFlags } from '../config';\r\nconst screenThreeFlagMap = initFlags(screenThreeFlags);\r\nconst screenDOM = $(\"#three-js-screen-3\");\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 60;\r\nconst AMOUNTY = 50;\r\n\r\nlet count = 0;\r\nlet mouseX = -28;\r\nlet mouseY = -450;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 800;\r\nrenderer.setClearColor(0x000000, .6);\r\n\r\nconst { particles, pointsWithFlag } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION,\r\n  markPoint:(i, j, particle, marked) => {\r\n    if (`${i}x${j}` in screenThreeFlagMap) {\r\n      const { x, z } = particle.position;\r\n      marked.push({ x, z });\r\n    }\r\n  }\r\n});\r\n\r\nconst logoWallCtrl = initLogoWall();\r\n\r\nconst waveCtrl = initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: screenDOM\r\n});\r\n\r\nexport default {\r\n  play() {\r\n    logoWallCtrl.play();\r\n    waveCtrl.play();\r\n  },\r\n  pause() {\r\n    logoWallCtrl.pause();\r\n    waveCtrl.pause();\r\n  }\r\n};\r\n\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n  \r\n      if (screenThreeFlagMap[`${ix}x${iy}`]) {\r\n        const point = pointsWithFlag[j++];\r\n        point.y = particle.position.y;\r\n\r\n        const {\r\n          style,\r\n          mins,\r\n          maxs\r\n        } = screenThreeFlagMap[`${ix}x${iy}`];\r\n        const {\r\n          x,\r\n          y\r\n        } = toScreenCords(point, camera);\r\n        const scale = Math.min(\r\n          Math.max(\r\n            particle.scale.x / 6 * maxs,\r\n            mins\r\n          ),\r\n          maxs\r\n        ) + particle.scale.x / 30;\r\n        style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n\r\nfunction initLogoWall() {\r\n  const queryWithSideEffect = function (sel, fn) {\r\n    const arr = toArray(screenDOM.querySelectorAll(sel));\r\n    return arr.map((el, i) => {\r\n      fn && fn(el, i);\r\n      return el;\r\n    });\r\n  };\r\n\r\n  const logoFlips = queryWithSideEffect(\r\n    '.logo-flip',\r\n    (el, i) => {\r\n      const color = logoBgColorMatrix[i];\r\n      el.style.backgroundColor = `rgb(${color},${color},${color})`;\r\n    }\r\n  );\r\n\r\n  const highlightFlips = function () {\r\n    // remove highlight elems first\r\n    queryWithSideEffect(\r\n      '.hlight',\r\n      el => el.classList.remove('hlight')\r\n    );\r\n\r\n    // 随机两个高亮\r\n    // 保证左侧四列和右侧四列都有\r\n    // 且两者不在一行\r\n    // 第四行容易被遮住 所以降低概率\r\n    const getColNum = () => {\r\n      return Math.random() > 0.2 ? (Math.random() * 3 | 0) : 3;\r\n    };\r\n\r\n    const [first, second] = (() => {\r\n      const cols = [getColNum(), getColNum()];\r\n\r\n      while (cols[0] === cols[1]) {\r\n        cols[1] = getColNum();\r\n      }\r\n\r\n      return [\r\n        7 * cols[0] + (Math.random() * 4 | 0),\r\n        7 * cols[1] + (Math.random() * 3 | 0) + 4\r\n      ];\r\n    })();\r\n\r\n    logoFlips[first].classList.add('hlight');\r\n    logoFlips[second].classList.add('hlight');\r\n  }\r\n\r\n  let stop = false;\r\n  ; (function runFlipHighlight() {\r\n    stop || highlightFlips();\r\n    setTimeout(runFlipHighlight, Math.random() * 2000 + 2000);\r\n  }());\r\n\r\n  return {\r\n    play() {\r\n      stop = false;\r\n    },\r\n    pause() {\r\n      stop = true;\r\n    }\r\n  };\r\n}\r\n\r\n// document.addEventListener(\"mousemove\", onDocumentMouseMove, false);\r\n// function onDocumentMouseMove(event) {\r\n//   mouseX = event.clientX - windowHalfX;\r\n//   mouseY = event.clientY - windowHalfY;\r\n//   console.log(mouseX, mouseY);\r\n// }\r\n\r\nfunction initFlags(flags) {\r\n  const ret = flags.map(flag => {\r\n    const { logo, mins, maxs } = flag;\r\n    const div = document.createElement('div');\r\n\r\n    div.className = 'flag-3';\r\n    div.innerHTML = `<img src=\"${logo}\"><i></i>`;\r\n    $('#three-js-screen-3').appendChild(div);\r\n\r\n    return {\r\n      style: div.style,\r\n      mins,\r\n      maxs\r\n    };\r\n  });\r\n\r\n  return flags.reduce((acc, f, i) => {\r\n    acc[f.cord] = ret[i]\r\n    return acc;\r\n  }, {});\r\n}\r\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\nconst THREE = window.THREE;\n\nTHREE.SpriteCanvasMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteCanvasMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.program = function () {};\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteCanvasMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteCanvasMaterial.prototype.constructor = THREE.SpriteCanvasMaterial;\nTHREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial = true;\n\nTHREE.SpriteCanvasMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteCanvasMaterial();\n\n\tmaterial.copy( this );\n\tmaterial.color.copy( this.color );\n\tmaterial.program = this.program;\n\n\treturn material;\n\n};\n\nTHREE.CanvasRenderer = function ( parameters ) {\n\tparameters = parameters || {};\n\n\tvar _this = this,\n\t\t_renderData, _elements, _lights,\n\t\t_projector = new THREE.Projector(),\n\n\t\t_canvas = parameters.canvas !== undefined\n\t\t\t\t ? parameters.canvas\n\t\t\t\t : document.createElement( 'canvas' ),\n\n\t\t_canvasWidth = _canvas.width,\n\t\t_canvasHeight = _canvas.height,\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 ),\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 ),\n\n\t\t_viewportX = 0,\n\t\t_viewportY = 0,\n\t\t_viewportWidth = _canvasWidth,\n\t\t_viewportHeight = _canvasHeight,\n\n\t\t_pixelRatio = 1,\n\n\t\t_context = _canvas.getContext( '2d', {\n\t\t\talpha: parameters.alpha === true\n\t\t} ),\n\n\t\t_clearColor = new THREE.Color( 0x000000 ),\n\t\t_clearAlpha = parameters.alpha === true ? 0 : 1,\n\n\t\t_contextGlobalAlpha = 1,\n\t\t_contextGlobalCompositeOperation = 0,\n\t\t_contextStrokeStyle = null,\n\t\t_contextFillStyle = null,\n\t\t_contextLineWidth = null,\n\t\t_contextLineCap = null,\n\t\t_contextLineJoin = null,\n\t\t_contextLineDash = [],\n\n\t\t_v1, _v2, _v3,\n\n\t\t_v1x, _v1y, _v2x, _v2y, _v3x, _v3y,\n\n\t\t_color = new THREE.Color(),\n\n\t\t_diffuseColor = new THREE.Color(),\n\t\t_emissiveColor = new THREE.Color(),\n\n\t\t_lightColor = new THREE.Color(),\n\n\t\t_patterns = {},\n\n\t\t_uvs,\n\t\t_uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y,\n\n\t\t_clipBox = new THREE.Box2(),\n\t\t_clearBox = new THREE.Box2(),\n\t\t_elemBox = new THREE.Box2(),\n\n\t\t_ambientLight = new THREE.Color(),\n\t\t_directionalLights = new THREE.Color(),\n\t\t_pointLights = new THREE.Color(),\n\n\t\t_vector3 = new THREE.Vector3(), // Needed for PointLight\n\t\t_centroid = new THREE.Vector3(),\n\t\t_normal = new THREE.Vector3(),\n\t\t_normalViewMatrix = new THREE.Matrix3();\n\n\t/* TODO\n\t_canvas.mozImageSmoothingEnabled = false;\n\t_canvas.webkitImageSmoothingEnabled = false;\n\t_canvas.msImageSmoothingEnabled = false;\n\t_canvas.imageSmoothingEnabled = false;\n\t*/\n\n\t// dash+gap fallbacks for Firefox and everything else\n\n\tif ( _context.setLineDash === undefined ) {\n\n\t\t_context.setLineDash = function () {};\n\n\t}\n\n\tthis.domElement = _canvas;\n\n\tthis.autoClear = true;\n\tthis.sortObjects = true;\n\tthis.sortElements = true;\n\n\tthis.info = {\n\n\t\trender: {\n\n\t\t\tvertices: 0,\n\t\t\tfaces: 0\n\n\t\t}\n\n\t};\n\n\t// WebGLRenderer compatibility\n\n\tthis.supportsVertexTextures = function () {};\n\tthis.setFaceCulling = function () {};\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _context;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _context.getContextAttributes();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value !== undefined ) _pixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvasWidth = width * _pixelRatio;\n\t\t_canvasHeight = height * _pixelRatio;\n\n\t\t_canvas.width = _canvasWidth;\n\t\t_canvas.height = _canvasHeight;\n\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 );\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\t_clipBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clipBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_contextGlobalAlpha = 1;\n\t\t_contextGlobalCompositeOperation = 0;\n\t\t_contextStrokeStyle = null;\n\t\t_contextFillStyle = null;\n\t\t_contextLineWidth = null;\n\t\t_contextLineCap = null;\n\t\t_contextLineJoin = null;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * _pixelRatio;\n\t\t_viewportY = y * _pixelRatio;\n\n\t\t_viewportWidth = width * _pixelRatio;\n\t\t_viewportHeight = height * _pixelRatio;\n\n\t};\n\n\tthis.setScissor = function () {};\n\tthis.setScissorTest = function () {};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t};\n\n\tthis.setClearColorHex = function ( hex, alpha ) {\n\n\t\tconsole.warn( 'THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\n\t\tthis.setClearColor( hex, alpha );\n\n\t};\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn 0;\n\n\t};\n\n\tthis.clear = function () {\n\n\t\tif ( _clearBox.isEmpty() === false ) {\n\n\t\t\t_clearBox.intersect( _clipBox );\n\t\t\t_clearBox.expandByScalar( 2 );\n\n\t\t\t_clearBox.min.x =   _clearBox.min.x + _canvasWidthHalf;\n\t\t\t_clearBox.min.y = - _clearBox.min.y + _canvasHeightHalf;\t\t// higher y value !\n\t\t\t_clearBox.max.x =   _clearBox.max.x + _canvasWidthHalf;\n\t\t\t_clearBox.max.y = - _clearBox.max.y + _canvasHeightHalf;\t\t// lower y value !\n\n\t\t\tif ( _clearAlpha < 1 ) {\n\n\t\t\t\t_context.clearRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( _clearAlpha > 0 ) {\n\n\t\t\t\tsetBlending( THREE.NormalBlending );\n\t\t\t\tsetOpacity( 1 );\n\n\t\t\t\tsetFillStyle( 'rgba(' + Math.floor( _clearColor.r * 255 ) + ',' + Math.floor( _clearColor.g * 255 ) + ',' + Math.floor( _clearColor.b * 255 ) + ',' + _clearAlpha + ')' );\n\n\t\t\t\t_context.fillRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_clearBox.makeEmpty();\n\n\t\t}\n\n\t};\n\n\t// compatibility\n\n\tthis.clearColor = function () {};\n\tthis.clearDepth = function () {};\n\tthis.clearStencil = function () {};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera.isCamera === undefined ) {\n\n\t\t\tconsole.error( 'THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar background = scene.background;\n\n\t\tif ( background && background.isColor ) {\n\n\t\t\tsetFillStyle( 'rgb(' + Math.floor( background.r * 255 ) + ',' + Math.floor( background.g * 255 ) + ',' + Math.floor( background.b * 255 ) + ')' );\n\t\t\t_context.fillRect( 0, 0, _canvasWidth, _canvasHeight );\n\n\t\t} else if ( this.autoClear === true ) {\n\n\t\t\tthis.clear();\n\n\t\t}\n\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\n\t\t_context.setTransform( _viewportWidth / _canvasWidth, 0, 0, - _viewportHeight / _canvasHeight, _viewportX, _canvasHeight - _viewportY );\n\t\t_context.translate( _canvasWidthHalf, _canvasHeightHalf );\n\n\t\t_renderData = _projector.projectScene( scene, camera, this.sortObjects, this.sortElements );\n\t\t_elements = _renderData.elements;\n\t\t_lights = _renderData.lights;\n\n\t\t_normalViewMatrix.getNormalMatrix( camera.matrixWorldInverse );\n\n\t\t/* DEBUG\n\t\tsetFillStyle( 'rgba( 0, 255, 255, 0.5 )' );\n\t\t_context.fillRect( _clipBox.min.x, _clipBox.min.y, _clipBox.max.x - _clipBox.min.x, _clipBox.max.y - _clipBox.min.y );\n\t\t*/\n\n\t\tcalculateLights();\n\n\t\tfor ( var e = 0, el = _elements.length; e < el; e ++ ) {\n\n\t\t\tvar element = _elements[ e ];\n\n\t\t\tvar material = element.material;\n\n\t\t\tif ( material === undefined || material.opacity === 0 ) continue;\n\n\t\t\t_elemBox.makeEmpty();\n\n\t\t\tif ( element instanceof THREE.RenderableSprite ) {\n\n\t\t\t\t_v1 = element;\n\t\t\t\t_v1.x *= _canvasWidthHalf; _v1.y *= _canvasHeightHalf;\n\n\t\t\t\trenderSprite( _v1, element, material );\n\n\t\t\t} else if ( element instanceof THREE.RenderableLine ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderLine( _v1, _v2, element, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( element instanceof THREE.RenderableFace ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2; _v3 = element.v3;\n\n\t\t\t\tif ( _v1.positionScreen.z < - 1 || _v1.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v2.positionScreen.z < - 1 || _v2.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v3.positionScreen.z < - 1 || _v3.positionScreen.z > 1 ) continue;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v3.positionScreen.x *= _canvasWidthHalf; _v3.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\tif ( material.overdraw > 0 ) {\n\n\t\t\t\t\texpand( _v1.positionScreen, _v2.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v2.positionScreen, _v3.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v3.positionScreen, _v1.positionScreen, material.overdraw );\n\n\t\t\t\t}\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen,\n\t\t\t\t\t_v3.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderFace3( _v1, _v2, _v3, 0, 1, 2, element, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* DEBUG\n\t\t\tsetLineWidth( 1 );\n\t\t\tsetStrokeStyle( 'rgba( 0, 255, 0, 0.5 )' );\n\t\t\t_context.strokeRect( _elemBox.min.x, _elemBox.min.y, _elemBox.max.x - _elemBox.min.x, _elemBox.max.y - _elemBox.min.y );\n\t\t\t*/\n\n\t\t\t_clearBox.union( _elemBox );\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetLineWidth( 1 );\n\t\tsetStrokeStyle( 'rgba( 255, 0, 0, 0.5 )' );\n\t\t_context.strokeRect( _clearBox.min.x, _clearBox.min.y, _clearBox.max.x - _clearBox.min.x, _clearBox.max.y - _clearBox.min.y );\n\t\t*/\n\n\t\t_context.setTransform( 1, 0, 0, 1, 0, 0 );\n\n\t};\n\n\t//\n\n\tfunction calculateLights() {\n\n\t\t_ambientLight.setRGB( 0, 0, 0 );\n\t\t_directionalLights.setRGB( 0, 0, 0 );\n\t\t_pointLights.setRGB( 0, 0, 0 );\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\t\t\tvar lightColor = light.color;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\t_ambientLight.add( lightColor );\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_directionalLights.add( lightColor );\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_pointLights.add( lightColor );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction calculateLight( position, normal, color ) {\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\n\t\t\t_lightColor.copy( light.color );\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld ).normalize();\n\n\t\t\t\tvar amount = normal.dot( lightPosition );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tvar amount = normal.dot( _vector3.subVectors( lightPosition, position ).normalize() );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.distance == 0 ? 1 : 1 - Math.min( position.distanceTo( lightPosition ) / light.distance, 1 );\n\n\t\t\t\tif ( amount == 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderSprite( v1, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\tvar scaleX = element.scale.x * _canvasWidthHalf;\n\t\tvar scaleY = element.scale.y * _canvasHeightHalf;\n\n\t\tvar dist = Math.sqrt( scaleX * scaleX + scaleY * scaleY ); // allow for rotated sprite\n\t\t_elemBox.min.set( v1.x - dist, v1.y - dist );\n\t\t_elemBox.max.set( v1.x + dist, v1.y + dist );\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tvar texture = material.map;\n\n\t\t\tif ( texture !== null ) {\n\n\t\t\t\tvar pattern = _patterns[ texture.id ];\n\n\t\t\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\t\t\tpattern = textureToPattern( texture );\n\t\t\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t\t\t}\n\n\t\t\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t\t\t\tvar bitmap = texture.image;\n\n\t\t\t\t\tvar ox = bitmap.width * texture.offset.x;\n\t\t\t\t\tvar oy = bitmap.height * texture.offset.y;\n\n\t\t\t\t\tvar sx = bitmap.width * texture.repeat.x;\n\t\t\t\t\tvar sy = bitmap.height * texture.repeat.y;\n\n\t\t\t\t\tvar cx = scaleX / sx;\n\t\t\t\t\tvar cy = scaleY / sy;\n\n\t\t\t\t\t_context.save();\n\t\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t\t_context.translate( - scaleX / 2, - scaleY / 2 );\n\t\t\t\t\t_context.scale( cx, cy );\n\t\t\t\t\t_context.translate( - ox, - oy );\n\t\t\t\t\t_context.fillRect( ox, oy, sx, sy );\n\t\t\t\t\t_context.restore();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// no texture\n\n\t\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t\t_context.save();\n\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t_context.scale( scaleX, - scaleY );\n\t\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t\t_context.restore();\n\n\t\t\t}\n\n\t\t} else if ( material.isSpriteCanvasMaterial ) {\n\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX, scaleY );\n\n\t\t\tmaterial.program( _context );\n\n\t\t\t_context.restore();\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX * material.size, - scaleY * material.size );\n\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t_context.restore();\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetStrokeStyle( 'rgb(255,255,0)' );\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.x - 10, v1.y );\n\t\t_context.lineTo( v1.x + 10, v1.y );\n\t\t_context.moveTo( v1.x, v1.y - 10 );\n\t\t_context.lineTo( v1.x, v1.y + 10 );\n\t\t_context.stroke();\n\t\t*/\n\n\t}\n\n\tfunction renderLine( v1, v2, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.positionScreen.x, v1.positionScreen.y );\n\t\t_context.lineTo( v2.positionScreen.x, v2.positionScreen.y );\n\n\t\tif ( material.isLineBasicMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\n\t\t\tif ( material.vertexColors !== THREE.VertexColors ) {\n\n\t\t\t\tsetStrokeStyle( material.color.getStyle() );\n\n\t\t\t} else {\n\n\t\t\t\tvar colorStyle1 = element.vertexColors[ 0 ].getStyle();\n\t\t\t\tvar colorStyle2 = element.vertexColors[ 1 ].getStyle();\n\n\t\t\t\tif ( colorStyle1 === colorStyle2 ) {\n\n\t\t\t\t\tsetStrokeStyle( colorStyle1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar grad = _context.createLinearGradient(\n\t\t\t\t\t\t\tv1.positionScreen.x,\n\t\t\t\t\t\t\tv1.positionScreen.y,\n\t\t\t\t\t\t\tv2.positionScreen.x,\n\t\t\t\t\t\t\tv2.positionScreen.y\n\t\t\t\t\t\t);\n\t\t\t\t\t\tgrad.addColorStop( 0, colorStyle1 );\n\t\t\t\t\t\tgrad.addColorStop( 1, colorStyle2 );\n\n\t\t\t\t\t} catch ( exception ) {\n\n\t\t\t\t\t\tgrad = colorStyle1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tsetStrokeStyle( grad );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_context.stroke();\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t} else if ( material.isLineDashedMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetLineDash( [ material.dashSize, material.gapSize ] );\n\n\t\t\t_context.stroke();\n\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t\tsetLineDash( [] );\n\n\t\t}\n\n\t}\n\n\tfunction renderFace3( v1, v2, v3, uv1, uv2, uv3, element, material ) {\n\n\t\t_this.info.render.vertices += 3;\n\t\t_this.info.render.faces ++;\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_v1x = v1.positionScreen.x; _v1y = v1.positionScreen.y;\n\t\t_v2x = v2.positionScreen.x; _v2y = v2.positionScreen.y;\n\t\t_v3x = v3.positionScreen.x; _v3y = v3.positionScreen.y;\n\n\t\tdrawTriangle( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y );\n\n\t\tif ( ( material.isMeshLambertMaterial || material.isMeshPhongMaterial || material.isMeshStandardMaterial ) && material.map === null ) {\n\n\t\t\t_diffuseColor.copy( material.color );\n\t\t\t_emissiveColor.copy( material.emissive );\n\n\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t_diffuseColor.multiply( element.color );\n\n\t\t\t}\n\n\t\t\t_color.copy( _ambientLight );\n\n\t\t\t_centroid.copy( v1.positionWorld ).add( v2.positionWorld ).add( v3.positionWorld ).divideScalar( 3 );\n\n\t\t\tcalculateLight( _centroid, element.normalModel, _color );\n\n\t\t\t_color.multiply( _diffuseColor ).add( _emissiveColor );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else if ( material.isMeshBasicMaterial || material.isMeshLambertMaterial || material.isMeshPhongMaterial || material.isMeshStandardMaterial ) {\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tvar mapping = material.map.mapping;\n\n\t\t\t\tif ( mapping === THREE.UVMapping ) {\n\n\t\t\t\t\t_uvs = element.uvs;\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uvs[ uv1 ].x, _uvs[ uv1 ].y, _uvs[ uv2 ].x, _uvs[ uv2 ].y, _uvs[ uv3 ].x, _uvs[ uv3 ].y, material.map );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.envMap !== null ) {\n\n\t\t\t\tif ( material.envMap.mapping === THREE.SphericalReflectionMapping ) {\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv1 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv1x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv1y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv2 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv2x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv2y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv3 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv3x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv3y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y, material.envMap );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_color.copy( material.color );\n\n\t\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t\t_color.multiply( element.color );\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.wireframe === true\n\t\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t\t : fillPath( _color );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t_normal.copy( element.normalModel ).applyMatrix3( _normalViewMatrix );\n\n\t\t\t_color.setRGB( _normal.x, _normal.y, _normal.z ).multiplyScalar( 0.5 ).addScalar( 0.5 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else {\n\n\t\t\t_color.setRGB( 1, 1, 1 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction drawTriangle( x0, y0, x1, y1, x2, y2 ) {\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( x0, y0 );\n\t\t_context.lineTo( x1, y1 );\n\t\t_context.lineTo( x2, y2 );\n\t\t_context.closePath();\n\n\t}\n\n\tfunction strokePath( color, linewidth, linecap, linejoin ) {\n\n\t\tsetLineWidth( linewidth );\n\t\tsetLineCap( linecap );\n\t\tsetLineJoin( linejoin );\n\t\tsetStrokeStyle( color.getStyle() );\n\n\t\t_context.stroke();\n\n\t\t_elemBox.expandByScalar( linewidth * 2 );\n\n\t}\n\n\tfunction fillPath( color ) {\n\n\t\tsetFillStyle( color.getStyle() );\n\t\t_context.fill();\n\n\t}\n\n\tfunction textureToPattern( texture ) {\n\n\t\tif ( texture.version === 0 ||\n\t\t\ttexture instanceof THREE.CompressedTexture ||\n\t\t\ttexture instanceof THREE.DataTexture ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: texture.version\n\t\t\t};\n\n\t\t}\n\n\t\tvar image = texture.image;\n\n\t\tif ( image.complete === false ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: 0\n\t\t\t};\n\n\t\t}\n\n\t\tvar repeatX = texture.wrapS === THREE.RepeatWrapping || texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar repeatY = texture.wrapT === THREE.RepeatWrapping || texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\tvar mirrorX = texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar mirrorY = texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\t//\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = image.width * ( mirrorX ? 2 : 1 );\n\t\tcanvas.height = image.height * ( mirrorY ? 2 : 1 );\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.setTransform( 1, 0, 0, - 1, 0, image.height );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tif ( mirrorX === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, - 1, image.width, image.height );\n\t\t\tcontext.drawImage( image, - image.width, 0 );\n\n\t\t}\n\n\t\tif ( mirrorY === true ) {\n\n\t\t\tcontext.setTransform( 1, 0, 0, 1, 0, 0 );\n\t\t\tcontext.drawImage( image, 0, image.height );\n\n\t\t}\n\n\t\tif ( mirrorX === true && mirrorY === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, 1, image.width, 0 );\n\t\t\tcontext.drawImage( image, - image.width, image.height );\n\n\t\t}\n\n\t\tvar repeat = 'no-repeat';\n\n\t\tif ( repeatX === true && repeatY === true ) {\n\n\t\t\trepeat = 'repeat';\n\n\t\t} else if ( repeatX === true ) {\n\n\t\t\trepeat = 'repeat-x';\n\n\t\t} else if ( repeatY === true ) {\n\n\t\t\trepeat = 'repeat-y';\n\n\t\t}\n\n\t\tvar pattern = _context.createPattern( canvas, repeat );\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\treturn {\n\t\t\tcanvas: pattern,\n\t\t\tversion: texture.version\n\t\t};\n\n\t}\n\n\tfunction patternPath( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, texture ) {\n\n\t\tvar pattern = _patterns[ texture.id ];\n\n\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\tpattern = textureToPattern( texture );\n\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t}\n\n\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t} else {\n\n\t\t\tsetFillStyle( 'rgba( 0, 0, 0, 1)' );\n\t\t\t_context.fill();\n\t\t\treturn;\n\n\t\t}\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\t\toffsetX = texture.offset.x / texture.repeat.x,\n\t\t\toffsetY = texture.offset.y / texture.repeat.y,\n\t\t\twidth = texture.image.width * texture.repeat.x,\n\t\t\theight = texture.image.height * texture.repeat.y;\n\n\t\tu0 = ( u0 + offsetX ) * width;\n\t\tv0 = ( v0 + offsetY ) * height;\n\n\t\tu1 = ( u1 + offsetX ) * width;\n\t\tv1 = ( v1 + offsetY ) * height;\n\n\t\tu2 = ( u2 + offsetX ) * width;\n\t\tv2 = ( v2 + offsetY ) * height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.fill();\n\t\t_context.restore();\n\n\t}\n\n\t/*\n\tfunction clipImage( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, image ) {\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\twidth = image.width - 1,\n\t\theight = image.height - 1;\n\n\t\tu0 *= width; v0 *= height;\n\t\tu1 *= width; v1 *= height;\n\t\tu2 *= width; v2 *= height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.clip();\n\t\t_context.drawImage( image, 0, 0 );\n\t\t_context.restore();\n\n\t}\n\t*/\n\n\t// Hide anti-alias gaps\n\n\tfunction expand( v1, v2, pixels ) {\n\n\t\tvar x = v2.x - v1.x, y = v2.y - v1.y,\n\t\t\tdet = x * x + y * y, idet;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = pixels / Math.sqrt( det );\n\n\t\tx *= idet; y *= idet;\n\n\t\tv2.x += x; v2.y += y;\n\t\tv1.x -= x; v1.y -= y;\n\n\t}\n\n\t// Context cached methods.\n\n\tfunction setOpacity( value ) {\n\n\t\tif ( _contextGlobalAlpha !== value ) {\n\n\t\t\t_context.globalAlpha = value;\n\t\t\t_contextGlobalAlpha = value;\n\n\t\t}\n\n\t}\n\n\tfunction setBlending( value ) {\n\n\t\tif ( _contextGlobalCompositeOperation !== value ) {\n\n\t\t\tif ( value === THREE.NormalBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'source-over';\n\n\t\t\t} else if ( value === THREE.AdditiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'lighter';\n\n\t\t\t} else if ( value === THREE.SubtractiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'darker';\n\n\t\t\t} else if ( value === THREE.MultiplyBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'multiply';\n\n\t\t\t}\n\n\t\t\t_contextGlobalCompositeOperation = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineWidth( value ) {\n\n\t\tif ( _contextLineWidth !== value ) {\n\n\t\t\t_context.lineWidth = value;\n\t\t\t_contextLineWidth = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineCap( value ) {\n\n\t\t// \"butt\", \"round\", \"square\"\n\n\t\tif ( _contextLineCap !== value ) {\n\n\t\t\t_context.lineCap = value;\n\t\t\t_contextLineCap = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineJoin( value ) {\n\n\t\t// \"round\", \"bevel\", \"miter\"\n\n\t\tif ( _contextLineJoin !== value ) {\n\n\t\t\t_context.lineJoin = value;\n\t\t\t_contextLineJoin = value;\n\n\t\t}\n\n\t}\n\n\tfunction setStrokeStyle( value ) {\n\n\t\tif ( _contextStrokeStyle !== value ) {\n\n\t\t\t_context.strokeStyle = value;\n\t\t\t_contextStrokeStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setFillStyle( value ) {\n\n\t\tif ( _contextFillStyle !== value ) {\n\n\t\t\t_context.fillStyle = value;\n\t\t\t_contextFillStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineDash( value ) {\n\n\t\tif ( _contextLineDash.length !== value.length ) {\n\n\t\t\t_context.setLineDash( value );\n\t\t\t_contextLineDash = value;\n\n\t\t}\n\n\t}\n\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\nconst THREE = window.THREE;\n\nTHREE.RenderableObject = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\tthis.v3 = new THREE.RenderableVertex();\n\n\tthis.normalModel = new THREE.Vector3();\n\n\tthis.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n\tthis.vertexNormalsLength = 0;\n\n\tthis.color = new THREE.Color();\n\tthis.material = null;\n\tthis.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n\tthis.position = new THREE.Vector3();\n\tthis.positionWorld = new THREE.Vector3();\n\tthis.positionScreen = new THREE.Vector4();\n\n\tthis.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n\tthis.positionWorld.copy( vertex.positionWorld );\n\tthis.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\n\tthis.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n\tthis.material = null;\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\n\tthis.rotation = 0;\n\tthis.scale = new THREE.Vector2();\n\n\tthis.material = null;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tvar _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n\t\t_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n\t\t_face, _faceCount, _facePool = [], _facePoolLength = 0,\n\t\t_line, _lineCount, _linePool = [], _linePoolLength = 0,\n\t\t_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n\t\t_renderData = { objects: [], lights: [], elements: [] },\n\n\t\t_vector3 = new THREE.Vector3(),\n\t\t_vector4 = new THREE.Vector4(),\n\n\t\t_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n\t\t_boundingBox = new THREE.Box3(),\n\t\t_points3 = new Array( 3 ),\n\n\t\t_viewMatrix = new THREE.Matrix4(),\n\t\t_viewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_modelMatrix,\n\t\t_modelViewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_normalMatrix = new THREE.Matrix3(),\n\n\t\t_frustum = new THREE.Frustum(),\n\n\t\t_clippedVertex1PositionScreen = new THREE.Vector4(),\n\t\t_clippedVertex2PositionScreen = new THREE.Vector4();\n\n\t//\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function () {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n\t//\n\n\tvar RenderList = function () {\n\n\t\tvar normals = [];\n\t\tvar colors = [];\n\t\tvar uvs = [];\n\n\t\tvar object = null;\n\t\tvar material = null;\n\n\t\tvar normalMatrix = new THREE.Matrix3();\n\n\t\tfunction setObject( value ) {\n\n\t\t\tobject = value;\n\t\t\tmaterial = object.material;\n\n\t\t\tnormalMatrix.getNormalMatrix( object.matrixWorld );\n\n\t\t\tnormals.length = 0;\n\t\t\tcolors.length = 0;\n\t\t\tuvs.length = 0;\n\n\t\t}\n\n\t\tfunction projectVertex( vertex ) {\n\n\t\t\tvar position = vertex.position;\n\t\t\tvar positionWorld = vertex.positionWorld;\n\t\t\tvar positionScreen = vertex.positionScreen;\n\n\t\t\tpositionWorld.copy( position ).applyMatrix4( _modelMatrix );\n\t\t\tpositionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n\t\t\tvar invW = 1 / positionScreen.w;\n\n\t\t\tpositionScreen.x *= invW;\n\t\t\tpositionScreen.y *= invW;\n\t\t\tpositionScreen.z *= invW;\n\n\t\t\tvertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n\t\t\t\t\t positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n\t\t\t\t\t positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n\t\t}\n\n\t\tfunction pushVertex( x, y, z ) {\n\n\t\t\t_vertex = getNextVertexInPool();\n\t\t\t_vertex.position.set( x, y, z );\n\n\t\t\tprojectVertex( _vertex );\n\n\t\t}\n\n\t\tfunction pushNormal( x, y, z ) {\n\n\t\t\tnormals.push( x, y, z );\n\n\t\t}\n\n\t\tfunction pushColor( r, g, b ) {\n\n\t\t\tcolors.push( r, g, b );\n\n\t\t}\n\n\t\tfunction pushUv( x, y ) {\n\n\t\t\tuvs.push( x, y );\n\n\t\t}\n\n\t\tfunction checkTriangleVisibility( v1, v2, v3 ) {\n\n\t\t\tif ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n\t\t\t_points3[ 0 ] = v1.positionScreen;\n\t\t\t_points3[ 1 ] = v2.positionScreen;\n\t\t\t_points3[ 2 ] = v3.positionScreen;\n\n\t\t\treturn _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );\n\n\t\t}\n\n\t\tfunction checkBackfaceCulling( v1, v2, v3 ) {\n\n\t\t\treturn ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n\t\t\t\t    ( v2.positionScreen.y - v1.positionScreen.y ) -\n\t\t\t\t    ( v3.positionScreen.y - v1.positionScreen.y ) *\n\t\t\t\t    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n\t\t}\n\n\t\tfunction pushLine( a, b ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\n\t\t\t// Clip\n\n\t\t\tv1.positionScreen.copy( v1.position ).applyMatrix4( _modelViewProjectionMatrix );\n\t\t\tv2.positionScreen.copy( v2.position ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\tif ( clipLine( v1.positionScreen, v2.positionScreen ) === true ) {\n\n\t\t\t\t// Perform the perspective divide\n\t\t\t\tv1.positionScreen.multiplyScalar( 1 / v1.positionScreen.w );\n\t\t\t\tv2.positionScreen.multiplyScalar( 1 / v2.positionScreen.w );\n\n\t\t\t\t_line = getNextLineInPool();\n\t\t\t\t_line.id = object.id;\n\t\t\t\t_line.v1.copy( v1 );\n\t\t\t\t_line.v2.copy( v2 );\n\t\t\t\t_line.z = Math.max( v1.positionScreen.z, v2.positionScreen.z );\n\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t_line.material = object.material;\n\n\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t_line.vertexColors[ 0 ].fromArray( colors, a * 3 );\n\t\t\t\t\t_line.vertexColors[ 1 ].fromArray( colors, b * 3 );\n\n\t\t\t\t}\n\n\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushTriangle( a, b, c ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\t\t\tvar v3 = _vertexPool[ c ];\n\n\t\t\tif ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n\t\t\tif ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t_face.id = object.id;\n\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t_face.v3.copy( v3 );\n\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t// use first vertex normal as face normal\n\n\t\t\t\t_face.normalModel.fromArray( normals, a * 3 );\n\t\t\t\t_face.normalModel.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tvar normal = _face.vertexNormalsModel[ i ];\n\t\t\t\t\tnormal.fromArray( normals, arguments[ i ] * 3 );\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\tvar uv = _face.uvs[ i ];\n\t\t\t\t\tuv.fromArray( uvs, arguments[ i ] * 2 );\n\n\t\t\t\t}\n\n\t\t\t\t_face.vertexNormalsLength = 3;\n\n\t\t\t\t_face.material = object.material;\n\n\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tsetObject: setObject,\n\t\t\tprojectVertex: projectVertex,\n\t\t\tcheckTriangleVisibility: checkTriangleVisibility,\n\t\t\tcheckBackfaceCulling: checkBackfaceCulling,\n\t\t\tpushVertex: pushVertex,\n\t\t\tpushNormal: pushNormal,\n\t\t\tpushColor: pushColor,\n\t\t\tpushUv: pushUv,\n\t\t\tpushLine: pushLine,\n\t\t\tpushTriangle: pushTriangle\n\t\t};\n\n\t};\n\n\tvar renderList = new RenderList();\n\n\tfunction projectObject( object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t_renderData.lights.push( object );\n\n\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction addObject( object ) {\n\n\t\t_object = getNextObjectInPool();\n\t\t_object.id = object.id;\n\t\t_object.object = object;\n\n\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t_vector3.applyMatrix4( _viewProjectionMatrix );\n\t\t_object.z = _vector3.z;\n\t\t_object.renderOrder = object.renderOrder;\n\n\t\t_renderData.objects.push( _object );\n\n\t}\n\n\tthis.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n\t\t_faceCount = 0;\n\t\t_lineCount = 0;\n\t\t_spriteCount = 0;\n\n\t\t_renderData.elements.length = 0;\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\n\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t_frustum.setFromMatrix( _viewProjectionMatrix );\n\n\t\t//\n\n\t\t_objectCount = 0;\n\n\t\t_renderData.objects.length = 0;\n\t\t_renderData.lights.length = 0;\n\n\t\tprojectObject( scene );\n\n\t\tif ( sortObjects === true ) {\n\n\t\t\t_renderData.objects.sort( painterSort );\n\n\t\t}\n\n\t\t//\n\n\t\tvar objects = _renderData.objects;\n\n\t\tfor ( var o = 0, ol = objects.length; o < ol; o ++ ) {\n\n\t\t\tvar object = objects[ o ].object;\n\t\t\tvar geometry = object.geometry;\n\n\t\t\trenderList.setObject( object );\n\n\t\t\t_modelMatrix = object.matrixWorld;\n\n\t\t\t_vertexCount = 0;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tif ( attributes.position === undefined ) continue;\n\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.normal !== undefined ) {\n\n\t\t\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\trenderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var g = 0; g < groups.length; g ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ g ];\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\t\t\t\t_normalMatrix.getNormalMatrix( _modelMatrix );\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector3.copy( vertex );\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\t\t\t\t\t\t\t\tvar targetVertex = target.vertices[ v ];\n\n\t\t\t\t\t\t\t\t_vector3.x += ( targetVertex.x - vertex.x ) * influence;\n\t\t\t\t\t\t\t\t_vector3.y += ( targetVertex.y - vertex.y ) * influence;\n\t\t\t\t\t\t\t\t_vector3.z += ( targetVertex.z - vertex.z ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\n\t\t\t\t\t\tmaterial = isMultiMaterial === true\n\t\t\t\t\t\t\t ? object.material[ face.materialIndex ]\n\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\tvar side = material.side;\n\n\t\t\t\t\t\tvar v1 = _vertexPool[ face.a ];\n\t\t\t\t\t\tvar v2 = _vertexPool[ face.b ];\n\t\t\t\t\t\tvar v3 = _vertexPool[ face.c ];\n\n\t\t\t\t\t\tif ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n\t\t\t\t\t\tvar visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n\t\t\t\t\t\tif ( side !== THREE.DoubleSide ) {\n\n\t\t\t\t\t\t\tif ( side === THREE.FrontSide && visible === false ) continue;\n\t\t\t\t\t\t\tif ( side === THREE.BackSide && visible === true ) continue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t\t\t_face.id = object.id;\n\t\t\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t\t\t_face.v3.copy( v3 );\n\n\t\t\t\t\t\t_face.normalModel.copy( face.normal );\n\n\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t_face.normalModel.negate();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\tvar faceVertexNormals = face.vertexNormals;\n\n\t\t\t\t\t\tfor ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n\t\t\t\t\t\t\tvar normalModel = _face.vertexNormalsModel[ n ];\n\t\t\t\t\t\t\tnormalModel.copy( faceVertexNormals[ n ] );\n\n\t\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t\tnormalModel.negate();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnormalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.vertexNormalsLength = faceVertexNormals.length;\n\n\t\t\t\t\t\tvar vertexUvs = faceVertexUvs[ f ];\n\n\t\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( var u = 0; u < 3; u ++ ) {\n\n\t\t\t\t\t\t\t\t_face.uvs[ u ].copy( vertexUvs[ u ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.color = face.color;\n\t\t\t\t\t\t_face.material = material;\n\n\t\t\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tvar colors = attributes.color.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushColor( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( i, i + 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tif ( vertices.length === 0 ) continue;\n\n\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\tv1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\tfor ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\t\tv1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tif ( ( v + 1 ) % step > 0 ) continue;\n\n\t\t\t\t\t\tv2 = _vertexPool[ _vertexCount - 2 ];\n\n\t\t\t\t\t\t_clippedVertex1PositionScreen.copy( v1.positionScreen );\n\t\t\t\t\t\t_clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n\t\t\t\t\t\tif ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n\t\t\t\t\t\t\t// Perform the perspective divide\n\t\t\t\t\t\t\t_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n\t\t\t\t\t\t\t_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n\t\t\t\t\t\t\t_line = getNextLineInPool();\n\n\t\t\t\t\t\t\t_line.id = object.id;\n\t\t\t\t\t\t\t_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n\t\t\t\t\t\t\t_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n\t\t\t\t\t\t\t_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\t\t\t\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t\t_line.material = object.material;\n\n\t\t\t\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t\t\t\t_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n\t\t\t\t\t\t\t\t_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Points ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector4.set( vertex.x, vertex.y, vertex.z, 1 );\n\t\t\t\t\t\t_vector4.applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\t_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n\t\t\t\t_vector4.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( sortElements === true ) {\n\n\t\t\t_renderData.elements.sort( painterSort );\n\n\t\t}\n\n\t\treturn _renderData;\n\n\t};\n\n\tfunction pushPoint( _vector4, object, camera ) {\n\n\t\tvar invW = 1 / _vector4.w;\n\n\t\t_vector4.z *= invW;\n\n\t\tif ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n\t\t\t_sprite = getNextSpriteInPool();\n\t\t\t_sprite.id = object.id;\n\t\t\t_sprite.x = _vector4.x * invW;\n\t\t\t_sprite.y = _vector4.y * invW;\n\t\t\t_sprite.z = _vector4.z;\n\t\t\t_sprite.renderOrder = object.renderOrder;\n\t\t\t_sprite.object = object;\n\n\t\t\t_sprite.rotation = object.rotation;\n\n\t\t\t_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n\t\t\t_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n\t\t\t_sprite.material = object.material;\n\n\t\t\t_renderData.elements.push( _sprite );\n\n\t\t}\n\n\t}\n\n\t// Pools\n\n\tfunction getNextObjectInPool() {\n\n\t\tif ( _objectCount === _objectPoolLength ) {\n\n\t\t\tvar object = new THREE.RenderableObject();\n\t\t\t_objectPool.push( object );\n\t\t\t_objectPoolLength ++;\n\t\t\t_objectCount ++;\n\t\t\treturn object;\n\n\t\t}\n\n\t\treturn _objectPool[ _objectCount ++ ];\n\n\t}\n\n\tfunction getNextVertexInPool() {\n\n\t\tif ( _vertexCount === _vertexPoolLength ) {\n\n\t\t\tvar vertex = new THREE.RenderableVertex();\n\t\t\t_vertexPool.push( vertex );\n\t\t\t_vertexPoolLength ++;\n\t\t\t_vertexCount ++;\n\t\t\treturn vertex;\n\n\t\t}\n\n\t\treturn _vertexPool[ _vertexCount ++ ];\n\n\t}\n\n\tfunction getNextFaceInPool() {\n\n\t\tif ( _faceCount === _facePoolLength ) {\n\n\t\t\tvar face = new THREE.RenderableFace();\n\t\t\t_facePool.push( face );\n\t\t\t_facePoolLength ++;\n\t\t\t_faceCount ++;\n\t\t\treturn face;\n\n\t\t}\n\n\t\treturn _facePool[ _faceCount ++ ];\n\n\n\t}\n\n\tfunction getNextLineInPool() {\n\n\t\tif ( _lineCount === _linePoolLength ) {\n\n\t\t\tvar line = new THREE.RenderableLine();\n\t\t\t_linePool.push( line );\n\t\t\t_linePoolLength ++;\n\t\t\t_lineCount ++;\n\t\t\treturn line;\n\n\t\t}\n\n\t\treturn _linePool[ _lineCount ++ ];\n\n\t}\n\n\tfunction getNextSpriteInPool() {\n\n\t\tif ( _spriteCount === _spritePoolLength ) {\n\n\t\t\tvar sprite = new THREE.RenderableSprite();\n\t\t\t_spritePool.push( sprite );\n\t\t\t_spritePoolLength ++;\n\t\t\t_spriteCount ++;\n\t\t\treturn sprite;\n\n\t\t}\n\n\t\treturn _spritePool[ _spriteCount ++ ];\n\n\t}\n\n\t//\n\n\tfunction painterSort( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else if ( a.id !== b.id ) {\n\n\t\t\treturn a.id - b.id;\n\n\t\t} else {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\tfunction clipLine( s1, s2 ) {\n\n\t\tvar alpha1 = 0, alpha2 = 1,\n\n\t\t// Calculate the boundary coordinate of each vertex for the near and far clip planes,\n\t\t// Z = -1 and Z = +1, respectively.\n\n\t\t\tbc1near = s1.z + s1.w,\n\t\t\tbc2near = s2.z + s2.w,\n\t\t\tbc1far = - s1.z + s1.w,\n\t\t\tbc2far = - s2.z + s2.w;\n\n\t\tif ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n\t\t\t// Both vertices lie entirely within all clip planes.\n\t\t\treturn true;\n\n\t\t} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n\t\t\t// Both vertices lie entirely outside one of the clip planes.\n\t\t\treturn false;\n\n\t\t} else {\n\n\t\t\t// The line segment spans at least one clip plane.\n\n\t\t\tif ( bc1near < 0 ) {\n\n\t\t\t\t// v1 lies outside the near plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t} else if ( bc2near < 0 ) {\n\n\t\t\t\t// v2 lies outside the near plane, v1 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t}\n\n\t\t\tif ( bc1far < 0 ) {\n\n\t\t\t\t// v1 lies outside the far plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t} else if ( bc2far < 0 ) {\n\n\t\t\t\t// v2 lies outside the far plane, v2 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t}\n\n\t\t\tif ( alpha2 < alpha1 ) {\n\n\t\t\t\t// The line segment spans two boundaries, but is outside both of them.\n\t\t\t\t// (This can't happen when we're only clipping against just near/far but good\n\t\t\t\t//  to leave the check here for future usage if other clip planes are added.)\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Update the s1 and s2 vertices to match the clipped line segment.\n\t\t\t\ts1.lerp( s2, alpha1 );\n\t\t\t\ts2.lerp( s1, 1 - alpha2 );\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n","export const screenOneFlags = [{\n  en: \"Technology driven retail\",\n  cn: \"技术驱动零售\",\n  cord: \"10x36\",\n  maxs: 0.8,\n  mins: 0.5\n}, {\n  en: \"New retail\",\n  cn: \"新零售\",\n  cord: \"20x40\",\n  maxs: 1.5,\n  mins: 1\n}, {\n  en: \"Digital marketing\",\n  cn: \"数字营销\",\n  cord: \"20x36\",\n  maxs: 0.85,\n  mins: 0.45\n}, {\n  en: \"Reconstruction of freight yard\",\n  cn: \"人货场重构\",\n  cord: \"28x20\",\n  maxs: 0.7,\n  mins: 0.45\n}, {\n  en: \"Data brand\",\n  cn: \"数据赋能品牌\",\n  cord: \"33x30\",\n  maxs: 1.2,\n  mins: 0.9\n}];\n\nexport const logoBgColorMatrix = [\n  57, 52, 57, 52, 57, 57, 52,\n  52, 57, 52, 57, 52, 52, 57,\n  52, 57, 57, 57, 52, 57, 57,\n  57, 52, 52, 57, 52, 57, 52\n];\n\nexport const screenThreeFlags = [{\n  name: \"gucci\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAARCAMAAAAG7xmaAAAAq1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqxziPjAAAAOHRSTlMAufEfsA5ulgwVBIoBXIA3owp9kUD63DtTzfVjB03UYOMxKxiereYSKHRYaMjr7ptFs6jFeSVIv3Kbb6kAAAImSURBVHjalZTnlqpADIAHQUY60osUlWLFgqt5/ye767pO2YOHc/NnZpIJXzJJQE/ZuPUJV1c7WyAqomEU4vuwSTeIkXkq2RjbtbtCf2QqC1d8smtHpDrdMozoe1WdRAh1hMR90FvU3AZQKgSUfyEqVj+R2+eKO3fOcc55WcwQWnjX41anWgD7W3mCWv1Nop+E1EkCgexn7AfDo3/+3Rq+xJKiSbf83W7BJaR2AjJCDjQkTSXHw6ApntE3LUEjByNh3mjZwZ4czJK4KE/QasK4Ic8cB2E4Mu+o0TKpFwjotQVWOJAGSYiorPQxkNiAxPaMQhPyQWMtUw4UQ8DXcwwUATjDDjcAg1NwoAYO6n+BZIDdsEMFvvcZdISHThSKsp6PgRyAaBhkg299BgWQk4x2QSC0Y6ACYD8McgGyz6AaOpGUbwKnD3NEQaEPmPsXIKZ6MmNQ+fZOmQquG3BHa6T2kDPt8+XRwAO2H/WlxYFmMQj6W9GwwWrMVIiYdkzmM0VSbWY4ZEiWNDZpxYGQdSRdtEpgS90sH1Iy5jvERhC/I5hXnUINiytNqb3ECx6E7mXyqqGXQzVDVGQf9vOfJ3U0dgR0DS7rl8ehPHP1ssGd/lzJ8pwm175ASKwa2/CKuuv/9K0nJLltOrjaq7zh/oi1KLpJsabwBt04PMwscy79dkq1IbybbGOYrpYODMHSMM30PPDrsHZbM73Tj1GUVzhmwbt4t1v6DwM8N9Q87bUeAAAAAElFTkSuQmCC\",\n  cord: \"10x30\",\n  maxs: 0.6,\n  mins: 0.8\n}, {\n  name: \"skechers\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJgAAAAsCAMAAACuR4FwAAACQ1BMVEVHcEwAKlYAKlYAJFIAK1cAKVYAJFIAKVYAK1cAK1cAJlMAKFQAJlMAJFIAJFIAKVUAKlYAK1cAJFIAJlMAJ1QAJ1QAKlYAH009XX8AJVIAKVYAH00AKVYAKVYAIU8AJVMAKlcAJVMAKVYAK1cAJ1QAKFUAIlAAKVYAJ1QAJFIAH04AJFEAKVUAIE4AJVMAI1EAJlQSN2AAH04JMVsAHU0AJ1QAIU9LaYkLM1wAIlAKL1oYO2IyUHFcd5NDYoL///8AK1cAJFEvUnYAIlEAKlYAKVYAJlMyVHgAH04AKFUAIU/+/v+/wMAAH03K09wAJVLz9fcAGUnM1d2Fk6DJyMbN1t4rT3QSOWLP1+DMyscDLVkYPmbU3OOCkJ/S2eHw8vUAHEvGxsQcQWns7/MBJFJPaYJEY4MMM14AHk0GMFs5WnxNZoHH0doAFEX4+vv9/v719/kpTXLk6e3h5uvBy9b7/P10i6PExMNSb42quMcEK1eKnbJdeJQnS3CFma+uvMokR25Sa4RXc5A3WHt+lKofRWs+Xn8SNV80V3oNL1vb4uhvgpXOzMjCwsKjssJYcIjZ4OZadZK8x9N/jp1KaIdrhJ2Qm6Y0VXdjfZizwM5VbYaWqLqgsMG3w9B4iJk9Wnlne4+6vL7Fz9no7PDe4+qZqrwzVnkYOmOcrb5dc4qmtcSOobVid43T0MtNbIuTpbissbY0UXOIlaKcpa1CXnyYoapngZt6kKeDl62fp6+1ubsvUHGxtbmlrLKpr7QtTG9xiaINWETMAAAAP3RSTlMAMSyR5zy3Oejqf2yWsr4+CAKMhjRME/PiclONJFvepA5jxXjTrcbfRs/2nB377Njz9P3S7Pro4/Xw4uf18PLqClaiAAAI1UlEQVR42sWY91/bSBbABSQ4Z3oou3ChBQhhE1JuN9l6Z9myhayVDSbCxjYY2Rg3WhxMN6FDCJjeSeiEQCgJ6dmU+9NupFFimw1XftF9P3yYN1VP857evDFynNjLosTMZHH82bCwSEAYx9kvxIszY5IQwTl9Nvz736r3hpenpsrLbwHK/UyxbVPLw3svfg1PjkWEJDP6xdRbH/3uZfnw3s7YYndVVXU1+wfo7u5eXFwc25l6ur9Pv5tdyYtBBONcePVbev/dzic7jjk0tRqGITAcRQ0GA4oqlDhGMBoNiRmezdI+2rxzRYQIxMVfymmaHh4k8egL+caJw90FT03p+P3NhoaGzc3742Um9eSDFmv4pfyhWTPlM69ExyGCILr+XO+jx7Ab8aKwbzsrJV+n/WZCQvYfzRSln8KEMWZS7qyeooetuSIk6k2d5CTquy4hKfb3Poq+ZY1AhODSjp4yf3CeOYek9x3TpbHeXymy5CCJ/Ws+Sr+KpQri+D+9b6bMK1gKkvKoEerQ2WMb6C2QabVurbagpwI2PsTCkPhuPeVb678iSDQLGwMb9rztfFxc9iRUYZRIEycnJ0ewZKaTu6UcLfkJ565/bKZGhslIRADi8mZpil4kE5HEAn7Dlqx5YWF/5YlWESoCk6Mo7oy6ujdCjzwdvHIOEYCMM2+BJeesoUjUkoRn/GFn6+7og8dbW0tLh4ftfTMu6bWoG8ajl2sfqqs7cLEwsdX5oZmiX2ChyFW15EQ6t5Njbo7t+8xjDJ6XIUywuPbcTNFH1iwkbVdyMm9+iIsYfO/zrRnTk4QJ+pk/VJlp/UjVtZB444MKyUlsEaEhypfgFaqjESFItIx1L67dWh1etV8R39QMunpeNb1+3df35s1dwJu7X1T9Z/7lEOdH1ujZcUJ4fu7LfXrko5PArLjMZrMNuHq3mfzvAN9AavkPYsOYh6SC8wiYMhwRgMgxmmI9PzIi3t4AVZivjY8RiRJYRBcvDZbA1ieMGAlfpil9uTVMAL0u//S0mWr+6ATWEc9IIA8n/vEt5Mcf/97E67W5fSUp8ZPP56P+wIU4wONt7IYtY6kgzHokJ3PbRkQk/fKSpkZWyRxEAPKW9RQ4k8lQJPZUqeRENqcdObHhw3pKP9t2SpConwYeRplngXXi0rxFJ6il7jOqckThq8DBnuvwFEQIzj8z+yjKN3chFMnK195tnVxXl5jKAKbSEvW6Z3Jhd2lmDmW+uyD+dVlv1s/qrMmIIKTiqzQNonnV9ajkNAak+gRJkhgLKAkHw2hqaxlSef231bV9/dMdxTWxULe3KOvK7Dt6ZN/3fHlvbBFch6oCAbejsb3hW2+pEfrj0aIdixZFnBXo7hYb+TOuW9lbXi6/FczR0REvlU8N76z0O/Gr6YkIEpMYhwjE5YhLOeHRHOF/IoojJz1SnHIO+f+RFBrydUIBIQmiP5MQdxk2/ydOfx1RSAZrttDTMRcvJqakpKZmZkZkic8mBh/nUT/jSj8oyhUKpxNFUVypUBjsTrlcEQBov3HhG/xLXY7Cfjk7gxeDp8gNXI8fHOTwMeK0woAmFIy5GHiapxtatjw16zWf6cE7a9bX19Wt20qUKagpLpts2u5VcxSzqNWdTkLnfeBRf+YhOl3MliXzOEpMcGJpz93AKcUtzFYJK5UAWMHzeAAn3K8nuRaIuqPwfNDnObQgCeKgiy/JQmLFBFLYOVzzKmhECTN3PygQM4+5ssypRMlOTiw2mIKmuPAGSTB3pBPBgb1MKY9H/GQSD7jmu89kLPdsr+2HMKUmGEu7ROKxOaTKtnWu6fDZPcCAd3q7EmZErSyd694hmLvZCLTQcpsT77nq2aJoeo6dYpsZmoFH3MDcvU8PObFVVsepM9DBop3zHkjbRAE3paturr/O1gW63RalRmOBT3WR8xuSinkpiaKqFq6lwa5RqUDsJTTwXeoGNGxAxnAC3pZrpIU48wSKGMwM+modKoeDIZg2uMUztSqNE4oDo/DC2KVl0TEODA20ZIoK9vM0lg3UtnPSQtck+F+hkwKnlcJ3PBwyAro6MDcc7CHlKAtu517l9/lBo87N711HI7ecaxvMsMjsDi/XXCHbNg5C1ddlcGt5irbaFGigJS8YKyVBLLU1QD+CDtDkQFHCBrvqKooAdU21cOn6AxLlIHgPBN0VUK9xvJN/HkeDTlrKDwFAyQYX8dNhzQ716xX6t/Zj/QczQdUF8HCyFT5ko7KysqKxoc1SB12+EG6Y0glfpZIFzprmPQ3MAFOAAQ9+5zbwDu/uG2XzcJf9eIJcPymSPKZYqb0MPoXPYIv6cRL68W3XoA7Qr2X64NAJAuVQ9cCvzDKoG2qCG0aOQv8e0rHI7FgNV2+3tsCpLVKH8dhX6lWhqX7FsuS4vKBlAtDj3YBTvHBpSy1YG9pSBWPBYw0OKCQdFmgMNcFmI4QKt2/CgQxubYOidxAOKWDYGRhJDDRyr+bWuIEAmGdwqc520AKo3oLhRaHIDsgSwg0WA1gboCm4zSlkh3fyVxpHE29LDfysb/diKMBpwb38DeFZb2/vQE+76wBaZxAEV7h3DfhjOEJpYNEZyUnovg7cCDVuZ4w6JZ9kjUJVHWhEQIaR5ioaL+EwcXrV9fJm0eGYrB56fP8TWJaUmkylpjueY8YvtptgHCRQ3MDHBGMjVJDLPMcrpmVcvb4XU/KhYt2xUFkGucM17OLy3BT/XSchyPUbKz2ubWiLLQeqkPMfElA5gIo5xnW/rp6F96wmCVtpdEvleB8nFnUtSOAAyOhQMVc3oQq0cLK+EYgb2jsBPxEWjfe1KdGsLH+OLFZ0PCr4glunJPpdrPTIwp7kXbDPBQvIo34piju7ZF+wyAugAA5tJxTdunuyQAx8vUsOFu3XalnZqPXjtjhJJZoTl5HhT/xRHPNjxeWf6zgKgHIQsEdZKP0MqPMV8FRetCqlQSj4eiG3KJSVVn+/FQfbkB4bmMR+/5f/jjOBZKWezz3zP3Lq35KbnX4a4fkXJA1c0SvIhYcAAAAASUVORK5CYII=\",\n  cord: \"23x35\",\n  maxs: 1.2,\n  mins: 0.8\n}, {\n  name: \"bershka\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAOCAMAAABHJ4HOAAAAtFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9aXyCHAAAAO3RSTlMAxsoN2DQFP8zVJ84B0L0rQhEC7CQc3eLgnLFXIDratghhFaWPcNEv6PXB8auAUeVG+XeUF0pcl+5qhwpbxXkAAAHhSURBVHjanZPZdoIwEEAnBhKCLLIvKggo4IZ7reX//6sJherxoQ+dh5k5meTOdgKoVcZjluwX8IdM2sng6r79FhxJpmnKGdrZfxBoS5/3tbegMuqMuaX/Jiid0cKVMHg+z4VVVcAqAc2k7g9hDpWcPwmuxxUxJ6b9S3C3otOjEiZBxp0Smcy3rDiQgp0qCB8Rk8LjQMhqfts0QilEk57gxjHhmYN9jh+ChULjLmvL0l1UqNA4QclyK/LxD4GuecFecneJq2xhszY2hr6OBCeKhd7tADbtXsz9wpXliRqm3JM/VUEAjy0BYHHEXE9bQEEzbaZ36cHPkj22LLyXCCDH4uHlKcuhn4MgOIKg20ZAoJOFvDLaYQ4f6xtcDwedsbL2cX+KIycobna3i4GAkq+TM+ven8sgFoRxv6UCcueLUjqhMhm4MMvSU0FeCUZ7oKgQ+LRezWD6JBgpkPL8tmPoOr29Ejanhh/JAI9TJWr/7cJbL3nfTAzneu670OaeCNWrV8IoASDjFODCRHDZgn6gXFYBm/Ga/djF1QZh0HXRqFFS63p21P5fyFtV/AsNoGmPPHtjVZewhUhnXEaXLp1p+MwvrgBp2hUWhSzRG4B5LXZRSS5AjGwAku7I4uIwdj7W32jPLaWFQwgBAAAAAElFTkSuQmCC\",\n  cord: \"20x26\",\n  maxs: 0.7,\n  mins: 0.5\n}, {\n  name: \"ecco\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAAAcCAMAAACkuDr3AAAAq1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqxziPjAAAAOHRSTlMA79yWmQN1Af4i9tVf+i0O4LwITgXMf8GJnRLzSTcLHMb4MpKkQYTRt7Fb5WplqlcWKT1UjXpF6iDr2UcAAAMpSURBVHjatZZZg6IwDIBRbkRFbrxAQWc9wGN05P//sjWhpe2C+zZ5seRr0yZpUqVflx9tJf2+PO2VXf76LlPtnC9jXuHtFWVvm52Zay/8AJZvEJe3DnB/tFzJzwDS8lyY+5aoybhuJLvo/JJtRUFwFMCt2BDwVfo8MJUFAaOtJD126YVt810zyUx2YNngQMAO7sYImD0qfjhm+uhtQQtLdjy75mSwI9p0VAuy+CFgnolg801D/4dXB504Z/VmJsuHAWJrhcrrED4A5IdXA3aNsS/8GkdKXp1gZBgeAn/WgCx5FE69WEpM1Px0mEu66eK8o4NRgLGOaxbaFD889GyISyrcPZwjWOKeL4xMjJs8rk0s1pJ0dgKSgvJN2JWbo9eDNpAjkxK3ANswWgJwJhT4MvizhvtiwIZcOZpvxUjHSeB1QvWTJk4aeOmAsSvndlLXIQzg+AOTAf1R1zkM4IjWlr+nYOwIIw9Gd3rhFpiBS3tmjC5bZbZrbQHcbhglcObJ63U4UQSjBAcoamxw4VDYVRElhBzpPcAGL9cwEgrFgBxCZs9cWuoZaElotL5tYNq+D8CJC1HlQg1DGSwwZiwtsUpmwN3edUyRg136wKznYAEJMJie8GmhAtW87bPmsJyJEmFg+nUWHlrds7Qwb/qtgdf2Z2+6rpfkV2NpEd3VPll79AG4NJWomm7AC8JGmBYD0sJE/t9Nc9QeUMJNmwqqI71py7Yv0rTou4lEgSdUwR1zNenWzWrV1k3I6/0RLRffqVGGNC3uAeYScLpya94g7u0CCukjB+hotNTbHnfh3oBozlp5p6cxYOm0cTg3CtwEIjMFPw3+tZD0EF89tfmIsFk2jdi3T4g6Hdo9nliHLvDukw7tYWJffnt6Q0lx1h0Nj2knTZuwWTPlw3sTKckfAawz+qzI1asZCu+NEVQyPkRCIZlojsngLr6e3Wf1GojA8ghYH0Rg8OU6LQwORdx/gYQHGQNuzoOAVbX6tDjg/NOtVocx2T771gVQffjLMyk2dBNbAKm8IGCouZ3amntPWd4f0w6Yes+8F6yXAGyzA/yd9lDikmtcfwEvEcla7dc9aAAAAABJRU5ErkJggg==\",\n  cord: \"24x31\",\n  maxs: 0.8,\n  mins: 0.4\n}, {\n  name: \"baleno\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAfCAMAAAAMaWnLAAAAllBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+ysAdDAAAAMXRSTlMAu4ek7nhK0i1a/QsBF/hp6PN/RE7LIwQeY51VEDII0G4p3eOp2j5zrzeZlLSN1sUwcwZsNwAAAz5JREFUeNrVltmWojAQhsMiyNqArCooCq6tTt7/5SZFEkmAtr2Y4znz3wCxki+1xaD3FQdBjD6rBOPkw0gTY/O/RR7NHVGbKBfL+Qwyx730rfsJ5ByLun4KqcyINB2YFurlLYrCOqynkVUZWwsPDeQY221MZ0gLWatzJSFVaq6R1/tzSW2PO9mPIhshay2kvxlIUKr5MOprqTi6emBQuExFJKMAhG98jXsluYzMVB9zffeeWiEfDPtg5Qrm8iN3iETg5rlH2uapUYKOmYnI6oQFtSkndrDN3RYTNA9EW60aIpfkveSBVRcOPF0DfF8JSLeBkGqHKqsjyP+O5i71yeiMzPGWgM5pFvfwHtWZc2iAuRwiN8T5cW+eoZIFZAHtZLCwkSm4QSBYsui2hG58cfRN3jZAd10U+7B3GbmiliORnWo9sgqINwsE4m6UkAif/Ay5YiYhxHABQeDJdmP4qgSkF5FJrfcrspDb1yCfJ7a6ioQM1cxJ2J1QKxZFBkmyCVj5jZXaElIhTtJE9dlY0+LZ8rGIotZk5kYwrWF78uljjk5Z72ypARaRGYnFA4GE5Q2K/OJjMzoGkTwieXs6R45P2Wyhft9p+0lIDxpMFxRC2Uwj4XEQkRdo/OeBp940sytjyoxbDBojSzyhaBqpkkc6jMhcapJDyyMRca8TbZvq/wrpjpEo1wnFoUnASnGmTS4hcyg3ZaB4GnnkBStWsicjkUptH1LedfEoyMKpK9A0ckED0Ksl20USkpe6XNwV+YoYkvVa/R7SgU535XNMGyKjDllLx5AB83vkCprrPSRq5H9gBYYHyKrtBlN+cIKyBHq9R2Y7cfF5/ApZQgU+C2gLre/KSEcDk6rLV5izsRPnA5J7bbP+PQT4lv2A5PWyL2m5HmHeAVHkaUVUfF33mM0D9C4mq+bHABN8KiLRDcySYl7HjQ0H7gukYwJnaaRlkbBuAqSsK2sW8HcXYJAfIwnpXrCgxHuBdD1TtL25Y6ReIB6wp+7n0XWr0DGTfXFe5BL8vNrcNrAGl0pbb5vCQUzeVWeXLSubuOGtZ5tuh8v5i4pl+nOll5mjg36Rm5ZlWf9s5tRljt6Tm5flGnH9BXFjzBHy7YowAAAAAElFTkSuQmCC\",\n  cord: \"29x33\",\n  maxs: 0.8,\n  mins: 0.4\n}, {\n  name: \"armni\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAAQCAMAAADQ4TbhAAAAnFBMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqQ4GGtAAAAM3RSTlMAiGlaRO4OHS2Wu7Sld8ypAYXj2waN8RYJ0z0zxIJ8ESOgTPiSZlEDb61Xm+q+Kjj8YXImH55PAAAEFElEQVR42q2U6ZLiSAyEZXyC7wsbu32CMZgbvf+7bankpnvomdiJjc0fZUVSqfiqFAX8nTKtTOD3Gi3N/Lc4bfhvW8xQ/3BddxdHolpJK2j1jete9FSx04yMpquKvhtE1Qu3WjmWAK51TxXOw9/f3M5c6FIXOsREVRcAWBG7rezL4csc/gApU48PslgFtB4i/UHfmx+6ne4XYgM6ZLSRqLAFUo0ivEQL8o/IFM1ilaDtFNhNVtsbgIE2AIQeAWmR5aykqPlTfJeDAeOJvWeBJcBn+LItKSxK0vO+AVKJN6a86xl9FyaouADGI53A9LCW5e4TDzTsILhs5MmuOL1ce8brsQeS7Y2FIqUCTOLTAiQ1O40IKUD6Ft7M1m7NeCnugKSkePwt3gLM5z2mynq88DKMYI8VSMVRwm6LMeMF8ToB0gOHcotSe7DFWkPgoNRmHNNtJA84hzci7LLVHhgvSNe8Rclj3P/AKxOqVFtecdW88Aw8w4r2kxxU2e3RZzyNNlJ3Cz3ILI1UNKVYS2g1qTaHvjjKvhyeZHjhoyacOmM8TfOxkHii57l5xzsZEm+iKw528MKzcJVssYR5AJ10zVi/Ml7Ik6Bbxkz0k4oiWjuU2orGYaBiyniv8KLHjmYLjBeOe1wyHpyw+wXPW5zujJfo5wRu6hfebluYSAW/GE+4aRidS2C8I3Ui5Yg3CA7KD2kAeQ0Gj5LDVyC8MVrnYC0YL6kgX59Hxmsi1L7j2e10ZjzRoAfFmPEG1fEKyF54FXr8nu0oe8MzUI5P80n1zvc7XyoX5lQCHGl0HF7FDeGBghNUGeP1BYCDGuPBHiPj1+FWM94N/WAJM95kNcId11/DdT4f34Hxqm/DNanDRtf1Oq4jfdBJjnycTdMMNDoO9zK8gKvIL4HxUrHlgacZD3xc/oqXjdASHmy2+wlew5Wyv57Gg90CT4xX0EaShTEXpmbRm7hZV7GO5DRHV2hLo3uFCQ+8e/9gPENuWevJjJed7877H0sq8VyM8zc8DUMuYt1gt0SH8cCb/1gGfIJUgXaNtmcfF4jnRP50pfWIGrzCjHfAqGE8teTT9zMePbJ3vIvEM+8+vOGBHQd8Q8PsGvdPvOK+57A4FEtTr0PR94M5DO18bNKEpznc3Ge8bGsD4+2AtMeO8KTsN7yxXks8WO1/4BnegV7Xirqwu/RmPBg2BnWOWpgVaBfn5Ntx6Iw87Sf32J6TOex8MB4cVcbLan7963XyiWeuZzyz8sTkFdu7mNWyAOhzSFxv5bq+F7bAysNUXXQTPTHhilBSpW7t2dRe6w6qsmvgpdz3pBjrulNouKW78kKXw3mluPVJE1EDwP24uLu0pJ2u7SmuswepwSyX3qmAv9NoGvAHBXmbwP+ugHv+A5hFfG8BeiUdAAAAAElFTkSuQmCC\",\n  cord: \"35x22\",\n  maxs: 0.7,\n  mins: 0.3\n}, {\n  name: \"sams\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAASCAMAAACAe2s0AAAAn1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr5ZUscAAAANHRSTlMAd7vEqy1piGbipflLHrQ6Wg5hCv3vgwYCQJkZ1Fb0csgij8AUM90nUEfmMH1snr3rlM/JGQ8NOwAAAkRJREFUeNq10ulyolAUBOBmCwgIIosiivsatyT9/s82517JaEXHmsxUvj+odNH3cMT/6CX4hn44NrQXfM/SzLgrengkNF7xRWqx0cK3bAMqVooHfN4du2B+HGgugJGnhAmUuOs1uq+3P7Qh0jPFsPCm0NJQ5co+0PY2UuR7XqnnHo1GG5WZs4OrIbWzZJITb9g99H1ehBAdkoFXHifmOFHPW1GzKoS0oKM+sJhTyVzApr/AbzPbNk1zxXOCAetIvrG2bTsKuEcoH7Ul4Lh7kp2CyqqNdMeVKc40m6J32z4ANvOTaVoZOygDZuahwq3ekBvkjAE4l9WNOMSYNhpJyzyQZriqqXwg5KoH0c6yhSpqdpQGXEMYjIByQjExplCWeg0fkiOTa1FbLrFKraEYzB11SvTjE0XZYQStReemqM16qoxoQVQvZkDy2L+u4VERjECv3wEi8jCjo0YtZySNPxZ9snCRdOyABsYMIlu0HhZh0Y1qkgXmZB2/LQGMg9J6WpRfNLc/12CxC8V/XCTSjZ9lzhulaZwCGPA9fPbqctyJ2cIHR0+LtIieLEgEk9N0R645x9eiN7oQCbMFGi/uxazFAfbMZ64YPiraNsGaMTzdlHULkrFV3RWFDI6u28WcQ1eR+Sx+el8gnT/5M7hs+Gp+e7ez4z1F1cNdEWYUEaYtatZ1oqIjefQ3havFcN0UQOUaEIlctk1wA83ZjocUc4hXOb1muNVanR/xXk2ExGsm+ndxTSVf46ctJyRN6fl51XKBv/ULpCxl6aFUvL4AAAAASUVORK5CYII=\",\n  cord: \"36x32\",\n  maxs: 0.9,\n  mins: 0.6\n}, {\n  name: \"g2ooo\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAAASCAMAAAAHSoIyAAAAsVBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8Q9rufAAAAOnRSTlMA7gj+9fmkEAPoAfH8C3d9g08jvJ0cilY41R7O3idePmku4sqzZheuqcdG2kO/bWNy0RSWM0mPwrm3ZKZG2wAAAodJREFUeNpt0+eOqzAQBeADmGJKKKEGUkjvfZPsvP+DXWBT8O79/liWpaM5GhkvUTrsy/ih+8f4uJXxZvbSNDAgiNJtqkOgl9vyDEF54cTGKvtOTMCJGdUsz0FjqElkSUrz+hRcCmKSrZyOzjv2uLJJYpR5EV6cUFmsdcC4xlZ2DQp6yXoAzgv6Ts6A86XZpxI1w1Mng6g6S5dzHw2fc+9qANEsV91nvXPO13g6f6ucKvltqtTRMoLx57W/srYA5Km9Nz9Tuah0FE3HD3OvTmVU5BXv483sUiU0gQNV9ufxOMCb02V9QLN9fMR0AAZ0M/Hm2xoqLn2h5USVOsyUiGinKSla5tIdPnloMe5sHrG7gQ+zyXSkHdqyoiiyed2F1Vu0lxB0aDixHLRdyYspRZvMd4BPI/zXjBo+BD1aUAhRkRVjiEJbh0tr/E9gUUWlACJV+TPKlGiJP9Xg0fWVdez86NeXMVVWGs0h4kQDiJb0p8aI1hi9+37lu25lQgkwlKhy12O6QiDbFnUg2jH1AZFLJfrKDYIDDTFTicj2DCS/q2/JZQsIHDbtMhmCBzeAnaSjTWPOhSrjtFnyyRCbs3mo9tC2pyShA9r6dgxgqIRoKVWtSzUm1bjYfUAuelbXEFa9Ms0Vj/Ahr3gzrdv+P9FGkahFC+3WwtZqHZooS/kTXNShPZ5Fn+CFukXDVbolGsZIIpFmXJRwjobu2VMHgJmwPEXDmEmboOmfSYNnk21mrfE0zGkS72dHjav272TAz9TF0fdHmsVHz3L9B028QXK4cBbLaDge4+EsGcQnZRnhI/Uep2KyHM31X5oZh7fdZnO/+DLeSneab1baTMebftDyIl90AjT+AcTNVSgpteVAAAAAAElFTkSuQmCC\",\n  cord: \"48x26\",\n  maxs: 0.7,\n  mins: 0.4\n}];","import './styles/swiper.min.css';\nimport './styles/style.css';\n\nimport { $, $$ } from './scripts/common';\nimport slide1 from './scripts/screen-1';\nimport slide2 from './scripts/screen-2';\nimport slide3 from './scripts/screen-3';\n\nconst setScale = () => {\n  const s = Math.max(window.innerWidth, 992) / 1920;\n  const css = `transform-origin:center;transform:scale(${s})`;\n  $$('.text-band').forEach((el) => {\n    el.style.cssText = css;\n  });\n  $$('.honor-bands>div').forEach((el) => {\n    el.style.cssText = `transform-origin:center;transform:translate(-50%,-50%) scale(${s}) ;`;\n  });\n};\nsetScale();\nwindow.addEventListener(\"resize\", setScale);\n\nsetTimeout(() => {\n  $('.swiper-container').classList.remove('loading');\n  const slides = [slide1, slide2, slide3];\n  new window.Swiper ('.swiper-container', {\n    loop: false,\n    autoplay: true,\n    speed: 1000,\n    nextButton: '.swiper-button-next',\n    prevButton: '.swiper-button-prev',\n    autoplayDisableOnInteraction: false,\n    onSlideChangeStart(swiper) {\n      slides.forEach((slide, i) => {\n        if (i === swiper.activeIndex) {\n          slide.play();\n        } else {\n          slide.pause();\n        }\n      })\n    }\n  });\n}, 1000);\n"],"names":["toArray","arrLike","Array","prototype","slice","call","$","selector","document","querySelector","$$","querySelectorAll","toScreenCords","ref","camera","x","y","z","vector","THREE","Vector3","project","Math","round","windowHalfX","windowHalfY","bindResizeCallback","renderer","const","update","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","setSize","callbacksOnResize","push","createSceneAndRenderer","scene","Scene","CanvasRenderer","alpha","setClearColor","animate","render","requestAnimationFrame","stop","let","pause","play","initThreeJS","container","setPixelRatio","devicePixelRatio","appendChild","domElement","initParticles","amountX","amontY","sep","markPoint","index","particles","pointsWithFlag","material","SpriteCanvasMaterial","color","program","context","beginPath","arc","PI","fill","i","j","particle","Sprite","position","add","mouseX","mouseY","lookAt","ix","AMOUNTX","iy","AMOUNTY","sin","count","scale","screenOneFlagMap","point","style","mins","maxs","min","max","transform","screenThreeFlagMap","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","module","process","hr","uptime","Date","getTime","this","root","global","vendors","suffix","raf","caf","length","last","id","queue","callback","_now","next","setTimeout","cp","cancelled","e","handle","fn","apply","arguments","cancelAnimationFrame","parameters","Material","type","Color","setValues","Object","create","constructor","isSpriteCanvasMaterial","clone","copy","calculateLights","_ambientLight","setRGB","_directionalLights","_pointLights","l","ll","_lights","light","lightColor","isAmbientLight","isDirectionalLight","isPointLight","calculateLight","normal","_lightColor","lightPosition","_vector3","setFromMatrixPosition","matrixWorld","normalize","amount","dot","intensity","multiplyScalar","subVectors","distance","distanceTo","renderSprite","v1","element","setOpacity","opacity","setBlending","blending","scaleX","_canvasWidthHalf","scaleY","_canvasHeightHalf","dist","sqrt","_elemBox","set","isSpriteMaterial","texture","map","pattern","_patterns","undefined","version","textureToPattern","canvas","setFillStyle","bitmap","image","ox","width","offset","oy","height","sx","repeat","sy","cx","cy","_context","save","translate","rotation","rotate","fillRect","restore","getStyle","setStrokeStyle","isPointsMaterial","size","renderLine","v2","moveTo","positionScreen","lineTo","isLineBasicMaterial","setLineWidth","linewidth","setLineCap","linecap","setLineJoin","linejoin","vertexColors","VertexColors","colorStyle1","colorStyle2","grad","createLinearGradient","addColorStop","exception","stroke","expandByScalar","isLineDashedMaterial","setLineDash","dashSize","gapSize","renderFace3","v3","uv1","uv2","uv3","_this","info","vertices","faces","_v1x","_v1y","_v2x","_v2y","_v3x","_v3y","drawTriangle","isMeshLambertMaterial","isMeshPhongMaterial","isMeshStandardMaterial","_diffuseColor","_emissiveColor","emissive","FaceColors","multiply","_color","_centroid","positionWorld","divideScalar","normalModel","wireframe","strokePath","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fillPath","isMeshBasicMaterial","mapping","UVMapping","_uvs","uvs","patternPath","envMap","SphericalReflectionMapping","_normal","vertexNormalsModel","applyMatrix3","_normalViewMatrix","_uv1x","_uv1y","_uv2x","_uv2y","_uv3x","_uv3y","isMeshNormalMaterial","addScalar","x0","y0","x1","y1","x2","y2","closePath","CompressedTexture","DataTexture","complete","repeatX","wrapS","RepeatWrapping","MirroredRepeatWrapping","repeatY","wrapT","mirrorX","mirrorY","createElement","getContext","setTransform","drawImage","createPattern","onUpdate","u0","v0","u1","u2","a","b","c","d","f","det","idet","offsetX","offsetY","expand","pixels","value","_contextGlobalAlpha","globalAlpha","_contextGlobalCompositeOperation","NormalBlending","globalCompositeOperation","AdditiveBlending","SubtractiveBlending","MultiplyBlending","_contextLineWidth","lineWidth","_contextLineCap","lineCap","_contextLineJoin","lineJoin","_contextStrokeStyle","strokeStyle","_contextFillStyle","fillStyle","_contextLineDash","_renderData","_elements","_v1","_v2","_v3","_projector","Projector","_canvas","_canvasWidth","_canvasHeight","floor","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_pixelRatio","_clearColor","_clearAlpha","_clipBox","Box2","_clearBox","Matrix3","autoClear","sortObjects","sortElements","supportsVertexTextures","setFaceCulling","getContextAttributes","getPixelRatio","updateStyle","setViewport","setScissor","setScissorTest","setClearColorHex","hex","console","warn","getClearColor","getClearAlpha","getMaxAnisotropy","clear","isEmpty","intersect","clearRect","r","g","makeEmpty","clearColor","clearDepth","clearStencil","isCamera","background","isColor","projectScene","elements","lights","getNormalMatrix","matrixWorldInverse","el","RenderableSprite","RenderableLine","setFromPoints","intersectsBox","RenderableFace","overdraw","union","error","RenderableObject","object","renderOrder","RenderableVertex","vertexNormalsLength","Vector2","Vector4","visible","vertex","projectObject","Light","Mesh","Line","Points","frustumCulled","_frustum","intersectsObject","addObject","intersectsSprite","children","_object","getNextObjectInPool","applyMatrix4","_viewProjectionMatrix","objects","pushPoint","_vector4","invW","w","_sprite","getNextSpriteInPool","abs","projectionMatrix","_objectCount","_objectPoolLength","_objectPool","getNextVertexInPool","_vertexCount","_vertexPoolLength","_vertexPool","getNextFaceInPool","_faceCount","_facePoolLength","face","_facePool","getNextLineInPool","_lineCount","_linePoolLength","line","_linePool","_spriteCount","_spritePoolLength","sprite","_spritePool","painterSort","clipLine","s1","s2","alpha1","alpha2","bc1near","bc2near","bc1far","bc2far","lerp","_vertex","_face","_line","_modelMatrix","Box3","_boundingBox","_points3","_viewMatrix","Matrix4","_modelViewProjectionMatrix","_normalMatrix","Frustum","_clippedVertex1PositionScreen","_clippedVertex2PositionScreen","projectVector","unprojectVector","unproject","pickingRay","renderList","setObject","normalMatrix","normals","colors","projectVertex","pushVertex","pushNormal","pushColor","pushUv","checkTriangleVisibility","checkBackfaceCulling","pushLine","fromArray","pushTriangle","side","DoubleSide","autoUpdate","updateMatrixWorld","parent","getInverse","multiplyMatrices","setFromMatrix","sort","o","ol","geometry","BufferGeometry","attributes","groups","positions","array","uv","indices","group","start","Geometry","faceVertexUvs","isMultiMaterial","isArray","v","vl","morphTargets","morphInfluences","morphTargetInfluences","t","tl","influence","targetVertex","fl","materialIndex","FrontSide","BackSide","negate","faceVertexNormals","vertexNormals","n","nl","vertexUvs","u","step","LineSegments","addEventListener","forEach","logoBgColorMatrix","screenThreeFlags","name","logo","cord","flags","ret","flag","cn","en","div","className","innerHTML","reduce","acc","PerspectiveCamera","marked","screenDOM","logoWallCtrl","queryWithSideEffect","sel","logoFlips","backgroundColor","highlightFlips","classList","remove","getColNum","random","cols","first","second","runFlipHighlight","waveCtrl","setScale","s","css","cssText","slides","slide1","slide2","slide3","Swiper","loop","autoplay","speed","nextButton","prevButton","autoplayDisableOnInteraction","onSlideChangeStart","swiper","slide","activeIndex"],"mappings":"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"}