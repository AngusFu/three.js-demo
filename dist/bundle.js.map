{"version":3,"file":"bundle.js","sources":["../index.js"],"sourcesContent":["const THREE = window.THREE;\n\nvar SEPARATION = 100, AMOUNTX = 50, AMOUNTY = 50;\n\nvar container;\nvar camera, scene, renderer;\n\nvar particles, particle, count = 0;\n\nvar mouseX = 400, mouseY = -42;\n\nvar windowHalfX = window.innerWidth / 2;\nvar windowHalfY = window.innerHeight / 2;\n\ninit();\nanimate();\n\nfunction init() {\n  container = document.createElement('div');\n  document.body.appendChild(container);\n  camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);\n  camera.position.z = 1000;\n  scene = new THREE.Scene();\n  particles = new Array();\n\n  var PI2 = Math.PI * 2;\n  var material = new THREE.SpriteCanvasMaterial({\n    color: 0x00FFF5,\n    program: function (context) {\n      context.beginPath();\n      context.arc(0, 0, 0.5, 0, PI2, true);\n      context.fill();\n    }\n  });\n\n  var i = 0;\n  for (var ix = 0; ix < AMOUNTX; ix++) {\n    for (var iy = 0; iy < AMOUNTY; iy++) {\n      particle = particles[i++] = new THREE.Sprite(material);\n      particle.position.x = ix * SEPARATION - ((AMOUNTX * SEPARATION) / 2);\n      particle.position.z = iy * SEPARATION - ((AMOUNTY * SEPARATION) / 2);\n      scene.add(particle);\n    }\n  }\n\n  var sceneGeometry = new THREE.Geometry();\n  var sceneMesh = new THREE.Mesh();\n  var loader = new THREE.FontLoader();\n\n  loader.load('./scripts/font.json', function (font) {\n    function createText(text, x) {\n      var textGeo = new THREE.TextGeometry(text, {\n        size: 30,\n        font\n      });\n      textGeo.computeBoundingBox();\n      textGeo.computeVertexNormals();\n      var textMesh = new THREE.Mesh(textGeo, [\n        new THREE.MeshPhongMaterial({\n          color: 0xffffff,\n          shading: THREE.FlatShading\n        })\n      ]);\n      textMesh.position.x = x;\n      textMesh.position.y = 1;\n      textMesh.position.z = 1;\n      return textMesh;\n    }\n\n    for (var i = 0; i < 10; i++) {\n      var textMesh = createText('0床前明月光疑是地上霜'[i],\n        i * 200\n      );\n      textMesh.updateMatrix();\n      sceneGeometry.merge(\n        textMesh.geometry,\n        textMesh.matrix,\n        0\n      );\n    }\n    sceneMesh = new THREE.Mesh(sceneGeometry, new THREE.MeshFaceMaterial([material]));\n    scene.add(sceneMesh);\n  });\n\n\n  renderer = new THREE.CanvasRenderer();\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  container.appendChild(renderer.domElement);\n\n  window.addEventListener('resize', function onWindowResize() {\n    windowHalfX = window.innerWidth / 2;\n    windowHalfY = window.innerHeight / 2;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  }, false);\n}\n\nfunction animate() {\n  requestAnimationFrame(animate);\n  render();\n}\n\nfunction render() {\n  camera.position.x += (mouseX - camera.position.x) * .05;\n  camera.position.y += (- mouseY - camera.position.y) * .05;\n  camera.lookAt(scene.position);\n\n  var i = 0;\n  for (var ix = 0; ix < AMOUNTX; ix++) {\n    for (var iy = 0; iy < AMOUNTY; iy++) {\n      particle = particles[i++];\n      particle.position.y = (Math.sin((ix + count) * 0.3) * 50) +\n        (Math.sin((iy + count) * 0.5) * 50);\n      particle.scale.x = particle.scale.y = (Math.sin((ix + count) * 0.3) + 1) * 2 +\n        (Math.sin((iy + count) * 0.5) + 1) * 2;\n    }\n  }\n\n  renderer.render(scene, camera);\n  count += 0.1;\n}\n"],"names":["animate","requestAnimationFrame","render","camera","position","x","mouseX","y","mouseY","lookAt","scene","i","ix","AMOUNTX","iy","AMOUNTY","particle","particles","Math","sin","count","scale","renderer","const","container","THREE","window","SEPARATION","windowHalfX","innerWidth","windowHalfY","innerHeight","document","createElement","body","appendChild","PerspectiveCamera","z","Scene","Array","PI2","PI","material","SpriteCanvasMaterial","color","program","context","beginPath","arc","fill","Sprite","add","sceneGeometry","Geometry","sceneMesh","Mesh","FontLoader","load","font","textMesh","text","textGeo","TextGeometry","size","computeBoundingBox","computeVertexNormals","MeshPhongMaterial","shading","FlatShading","updateMatrix","merge","geometry","matrix","MeshFaceMaterial","CanvasRenderer","setPixelRatio","devicePixelRatio","setSize","domElement","addEventListener","aspect","updateProjectionMatrix"],"mappings":"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"}