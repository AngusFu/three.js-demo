{"version":3,"file":"bundle.js","sources":["../scripts/common.js","../node_modules/raf/index.js","../node_modules/performance-now/lib/performance-now.js","../scripts/CanvasRenderer.js","../scripts/Projector.js","../config.js","../scripts/screen-1.js","../scripts/screen-2.js","../scripts/screen-3.js","../index.js"],"sourcesContent":["import requestAnimationFrame from \"raf\";\nimport \"./CanvasRenderer\";\nimport \"./Projector\";\n\nconst callbacksOnResize = [];\n\nexport const THREE = window.THREE;\nexport { requestAnimationFrame };\n\nexport let windowHalfX = window.innerWidth / 2;\nexport let windowHalfY = window.innerHeight / 2 / 2;\n\nexport function toArray(arrLike) {\n  return Array.prototype.slice.call(arrLike);\n}\nexport function $(selector) {\n  return document.querySelector(selector);\n}\nexport function $$(selector) {\n  return toArray(document.querySelectorAll(selector));\n}\n\n/**\n * transform point in Three.js world to client\n */\nexport function toScreenCords({ x, y, z }, camera) {\n  const vector = new THREE.Vector3(x, y, z).project(camera);\n  return {\n    x: Math.round(windowHalfX * (1 + vector.x)),\n    y: Math.round(windowHalfY * (1 - vector.y)) + windowHalfY * 2\n  };\n}\n\n/**\n * add updating function that will be invoked window resize\n */\nexport function bindResizeCallback(camera, renderer) {\n  const update = function() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight / 2);\n  };\n  callbacksOnResize.push(update);\n}\n\nwindow.addEventListener(\"resize\", function onWindowResize() {\n  windowHalfX = window.innerWidth / 2;\n  windowHalfY = window.innerHeight / 2 / 2;\n  callbacksOnResize.forEach(fn => fn());\n});\n\n/**\n * Axis helper\n */\nexport function addAxisHelper(scene) {\n  const axisHelper = new THREE.AxisHelper(1000000);\n  axisHelper.position.set(0, 0, 0);\n  scene.add(axisHelper);\n}\n\n/**\n * create scene & renderer\n */\nexport function createSceneAndRenderer() {\n  const scene = new THREE.Scene();\n  const renderer = new THREE.CanvasRenderer({ alpha: true });\n  renderer.setClearColor(0x000000, 1);\n  return { scene, renderer };\n}\n\n/**\n * update stage\n */\nexport function animate(render) {\n  let stop = false;\n\n  function animate() {\n    requestAnimationFrame(animate);\n    stop || render();\n  }\n\n  animate();\n\n  return {\n    pause() {\n      stop = true;\n    },\n    play() {\n      stop = false;\n    }\n  };\n}\n\n/**\n * initialize\n */\nexport function initThreeJS({ camera, renderer, container, render }) {\n  bindResizeCallback(camera, renderer);\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(window.innerWidth, window.innerHeight / 2);\n  container.appendChild(renderer.domElement);\n  return animate(render);\n}\n\n/**\n * 波纹粒子\n */\nexport function initParticles({ scene, amountX, amontY, sep, markPoint }) {\n  let index = 0;\n  const particles = [];\n  const pointsWithFlag = [];\n  const material = new THREE.SpriteCanvasMaterial({\n    color: 0x94fffb,\n    program: function(context) {\n      context.beginPath();\n      context.arc(0, 0, 1, 0, Math.PI * 2, true);\n      context.fill();\n    }\n  });\n\n  for (let i = 0; i < amountX; i++) {\n    for (let j = 0; j < amontY; j++) {\n      const particle = new THREE.Sprite(material);\n      particle.position.x = i * sep - amountX * sep / 2;\n      particle.position.z = j * sep - amontY * sep / 2;\n      particles[index++] = particle;\n\n      scene.add(particle);\n      markPoint && markPoint(i, j, particle, pointsWithFlag);\n    }\n  }\n  return {\n    particles,\n    pointsWithFlag\n  };\n}\n","var now = require('performance-now')\n  , root = typeof window === 'undefined' ? global : window\n  , vendors = ['moz', 'webkit']\n  , suffix = 'AnimationFrame'\n  , raf = root['request' + suffix]\n  , caf = root['cancel' + suffix] || root['cancelRequest' + suffix]\n\nfor(var i = 0; !raf && i < vendors.length; i++) {\n  raf = root[vendors[i] + 'Request' + suffix]\n  caf = root[vendors[i] + 'Cancel' + suffix]\n      || root[vendors[i] + 'CancelRequest' + suffix]\n}\n\n// Some versions of FF have rAF but not cAF\nif(!raf || !caf) {\n  var last = 0\n    , id = 0\n    , queue = []\n    , frameDuration = 1000 / 60\n\n  raf = function(callback) {\n    if(queue.length === 0) {\n      var _now = now()\n        , next = Math.max(0, frameDuration - (_now - last))\n      last = next + _now\n      setTimeout(function() {\n        var cp = queue.slice(0)\n        // Clear queue here to prevent\n        // callbacks from appending listeners\n        // to the current frame's queue\n        queue.length = 0\n        for(var i = 0; i < cp.length; i++) {\n          if(!cp[i].cancelled) {\n            try{\n              cp[i].callback(last)\n            } catch(e) {\n              setTimeout(function() { throw e }, 0)\n            }\n          }\n        }\n      }, Math.round(next))\n    }\n    queue.push({\n      handle: ++id,\n      callback: callback,\n      cancelled: false\n    })\n    return id\n  }\n\n  caf = function(handle) {\n    for(var i = 0; i < queue.length; i++) {\n      if(queue[i].handle === handle) {\n        queue[i].cancelled = true\n      }\n    }\n  }\n}\n\nmodule.exports = function(fn) {\n  // Wrap in a new function to prevent\n  // `cancel` potentially being assigned\n  // to the native rAF function\n  return raf.call(root, fn)\n}\nmodule.exports.cancel = function() {\n  caf.apply(root, arguments)\n}\nmodule.exports.polyfill = function() {\n  root.requestAnimationFrame = raf\n  root.cancelAnimationFrame = caf\n}\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;\n\n  if ((typeof performance !== \"undefined\" && performance !== null) && performance.now) {\n    module.exports = function() {\n      return performance.now();\n    };\n  } else if ((typeof process !== \"undefined\" && process !== null) && process.hrtime) {\n    module.exports = function() {\n      return (getNanoSeconds() - nodeLoadTime) / 1e6;\n    };\n    hrtime = process.hrtime;\n    getNanoSeconds = function() {\n      var hr;\n      hr = hrtime();\n      return hr[0] * 1e9 + hr[1];\n    };\n    moduleLoadTime = getNanoSeconds();\n    upTime = process.uptime() * 1e9;\n    nodeLoadTime = moduleLoadTime - upTime;\n  } else if (Date.now) {\n    module.exports = function() {\n      return Date.now() - loadTime;\n    };\n    loadTime = Date.now();\n  } else {\n    module.exports = function() {\n      return new Date().getTime() - loadTime;\n    };\n    loadTime = new Date().getTime();\n  }\n\n}).call(this);\n\n//# sourceMappingURL=performance-now.js.map\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\nconst THREE = window.THREE;\n\nTHREE.SpriteCanvasMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteCanvasMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.program = function () {};\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteCanvasMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteCanvasMaterial.prototype.constructor = THREE.SpriteCanvasMaterial;\nTHREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial = true;\n\nTHREE.SpriteCanvasMaterial.prototype.clone = function () {\n\n\tvar material = new THREE.SpriteCanvasMaterial();\n\n\tmaterial.copy( this );\n\tmaterial.color.copy( this.color );\n\tmaterial.program = this.program;\n\n\treturn material;\n\n};\n\nTHREE.CanvasRenderer = function ( parameters ) {\n\tparameters = parameters || {};\n\n\tvar _this = this,\n\t\t_renderData, _elements, _lights,\n\t\t_projector = new THREE.Projector(),\n\n\t\t_canvas = parameters.canvas !== undefined\n\t\t\t\t ? parameters.canvas\n\t\t\t\t : document.createElement( 'canvas' ),\n\n\t\t_canvasWidth = _canvas.width,\n\t\t_canvasHeight = _canvas.height,\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 ),\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 ),\n\n\t\t_viewportX = 0,\n\t\t_viewportY = 0,\n\t\t_viewportWidth = _canvasWidth,\n\t\t_viewportHeight = _canvasHeight,\n\n\t\t_pixelRatio = 1,\n\n\t\t_context = _canvas.getContext( '2d', {\n\t\t\talpha: parameters.alpha === true\n\t\t} ),\n\n\t\t_clearColor = new THREE.Color( 0x000000 ),\n\t\t_clearAlpha = parameters.alpha === true ? 0 : 1,\n\n\t\t_contextGlobalAlpha = 1,\n\t\t_contextGlobalCompositeOperation = 0,\n\t\t_contextStrokeStyle = null,\n\t\t_contextFillStyle = null,\n\t\t_contextLineWidth = null,\n\t\t_contextLineCap = null,\n\t\t_contextLineJoin = null,\n\t\t_contextLineDash = [],\n\n\t\t_v1, _v2, _v3,\n\n\t\t_v1x, _v1y, _v2x, _v2y, _v3x, _v3y,\n\n\t\t_color = new THREE.Color(),\n\n\t\t_diffuseColor = new THREE.Color(),\n\t\t_emissiveColor = new THREE.Color(),\n\n\t\t_lightColor = new THREE.Color(),\n\n\t\t_patterns = {},\n\n\t\t_uvs,\n\t\t_uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y,\n\n\t\t_clipBox = new THREE.Box2(),\n\t\t_clearBox = new THREE.Box2(),\n\t\t_elemBox = new THREE.Box2(),\n\n\t\t_ambientLight = new THREE.Color(),\n\t\t_directionalLights = new THREE.Color(),\n\t\t_pointLights = new THREE.Color(),\n\n\t\t_vector3 = new THREE.Vector3(), // Needed for PointLight\n\t\t_centroid = new THREE.Vector3(),\n\t\t_normal = new THREE.Vector3(),\n\t\t_normalViewMatrix = new THREE.Matrix3();\n\n\t/* TODO\n\t_canvas.mozImageSmoothingEnabled = false;\n\t_canvas.webkitImageSmoothingEnabled = false;\n\t_canvas.msImageSmoothingEnabled = false;\n\t_canvas.imageSmoothingEnabled = false;\n\t*/\n\n\t// dash+gap fallbacks for Firefox and everything else\n\n\tif ( _context.setLineDash === undefined ) {\n\n\t\t_context.setLineDash = function () {};\n\n\t}\n\n\tthis.domElement = _canvas;\n\n\tthis.autoClear = true;\n\tthis.sortObjects = true;\n\tthis.sortElements = true;\n\n\tthis.info = {\n\n\t\trender: {\n\n\t\t\tvertices: 0,\n\t\t\tfaces: 0\n\n\t\t}\n\n\t};\n\n\t// WebGLRenderer compatibility\n\n\tthis.supportsVertexTextures = function () {};\n\tthis.setFaceCulling = function () {};\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _context;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _context.getContextAttributes();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value !== undefined ) _pixelRatio = value;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_canvasWidth = width * _pixelRatio;\n\t\t_canvasHeight = height * _pixelRatio;\n\n\t\t_canvas.width = _canvasWidth;\n\t\t_canvas.height = _canvasHeight;\n\n\t\t_canvasWidthHalf = Math.floor( _canvasWidth / 2 );\n\t\t_canvasHeightHalf = Math.floor( _canvasHeight / 2 );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\t_clipBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clipBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t\t_contextGlobalAlpha = 1;\n\t\t_contextGlobalCompositeOperation = 0;\n\t\t_contextStrokeStyle = null;\n\t\t_contextFillStyle = null;\n\t\t_contextLineWidth = null;\n\t\t_contextLineCap = null;\n\t\t_contextLineJoin = null;\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t_viewportX = x * _pixelRatio;\n\t\t_viewportY = y * _pixelRatio;\n\n\t\t_viewportWidth = width * _pixelRatio;\n\t\t_viewportHeight = height * _pixelRatio;\n\n\t};\n\n\tthis.setScissor = function () {};\n\tthis.setScissorTest = function () {};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\t_clearBox.min.set( - _canvasWidthHalf, - _canvasHeightHalf );\n\t\t_clearBox.max.set(   _canvasWidthHalf,   _canvasHeightHalf );\n\n\t};\n\n\tthis.setClearColorHex = function ( hex, alpha ) {\n\n\t\tconsole.warn( 'THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead.' );\n\t\tthis.setClearColor( hex, alpha );\n\n\t};\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn 0;\n\n\t};\n\n\tthis.clear = function () {\n\n\t\tif ( _clearBox.isEmpty() === false ) {\n\n\t\t\t_clearBox.intersect( _clipBox );\n\t\t\t_clearBox.expandByScalar( 2 );\n\n\t\t\t_clearBox.min.x =   _clearBox.min.x + _canvasWidthHalf;\n\t\t\t_clearBox.min.y = - _clearBox.min.y + _canvasHeightHalf;\t\t// higher y value !\n\t\t\t_clearBox.max.x =   _clearBox.max.x + _canvasWidthHalf;\n\t\t\t_clearBox.max.y = - _clearBox.max.y + _canvasHeightHalf;\t\t// lower y value !\n\n\t\t\tif ( _clearAlpha < 1 ) {\n\n\t\t\t\t_context.clearRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( _clearAlpha > 0 ) {\n\n\t\t\t\tsetBlending( THREE.NormalBlending );\n\t\t\t\tsetOpacity( 1 );\n\n\t\t\t\tsetFillStyle( 'rgba(' + Math.floor( _clearColor.r * 255 ) + ',' + Math.floor( _clearColor.g * 255 ) + ',' + Math.floor( _clearColor.b * 255 ) + ',' + _clearAlpha + ')' );\n\n\t\t\t\t_context.fillRect(\n\t\t\t\t\t_clearBox.min.x | 0,\n\t\t\t\t\t_clearBox.max.y | 0,\n\t\t\t\t\t( _clearBox.max.x - _clearBox.min.x ) | 0,\n\t\t\t\t\t( _clearBox.min.y - _clearBox.max.y ) | 0\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t_clearBox.makeEmpty();\n\n\t\t}\n\n\t};\n\n\t// compatibility\n\n\tthis.clearColor = function () {};\n\tthis.clearDepth = function () {};\n\tthis.clearStencil = function () {};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( camera.isCamera === undefined ) {\n\n\t\t\tconsole.error( 'THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar background = scene.background;\n\n\t\tif ( background && background.isColor ) {\n\n\t\t\tsetFillStyle( 'rgb(' + Math.floor( background.r * 255 ) + ',' + Math.floor( background.g * 255 ) + ',' + Math.floor( background.b * 255 ) + ')' );\n\t\t\t_context.fillRect( 0, 0, _canvasWidth, _canvasHeight );\n\n\t\t} else if ( this.autoClear === true ) {\n\n\t\t\tthis.clear();\n\n\t\t}\n\n\t\t_this.info.render.vertices = 0;\n\t\t_this.info.render.faces = 0;\n\n\t\t_context.setTransform( _viewportWidth / _canvasWidth, 0, 0, - _viewportHeight / _canvasHeight, _viewportX, _canvasHeight - _viewportY );\n\t\t_context.translate( _canvasWidthHalf, _canvasHeightHalf );\n\n\t\t_renderData = _projector.projectScene( scene, camera, this.sortObjects, this.sortElements );\n\t\t_elements = _renderData.elements;\n\t\t_lights = _renderData.lights;\n\n\t\t_normalViewMatrix.getNormalMatrix( camera.matrixWorldInverse );\n\n\t\t/* DEBUG\n\t\tsetFillStyle( 'rgba( 0, 255, 255, 0.5 )' );\n\t\t_context.fillRect( _clipBox.min.x, _clipBox.min.y, _clipBox.max.x - _clipBox.min.x, _clipBox.max.y - _clipBox.min.y );\n\t\t*/\n\n\t\tcalculateLights();\n\n\t\tfor ( var e = 0, el = _elements.length; e < el; e ++ ) {\n\n\t\t\tvar element = _elements[ e ];\n\n\t\t\tvar material = element.material;\n\n\t\t\tif ( material === undefined || material.opacity === 0 ) continue;\n\n\t\t\t_elemBox.makeEmpty();\n\n\t\t\tif ( element instanceof THREE.RenderableSprite ) {\n\n\t\t\t\t_v1 = element;\n\t\t\t\t_v1.x *= _canvasWidthHalf; _v1.y *= _canvasHeightHalf;\n\n\t\t\t\trenderSprite( _v1, element, material );\n\n\t\t\t} else if ( element instanceof THREE.RenderableLine ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderLine( _v1, _v2, element, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( element instanceof THREE.RenderableFace ) {\n\n\t\t\t\t_v1 = element.v1; _v2 = element.v2; _v3 = element.v3;\n\n\t\t\t\tif ( _v1.positionScreen.z < - 1 || _v1.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v2.positionScreen.z < - 1 || _v2.positionScreen.z > 1 ) continue;\n\t\t\t\tif ( _v3.positionScreen.z < - 1 || _v3.positionScreen.z > 1 ) continue;\n\n\t\t\t\t_v1.positionScreen.x *= _canvasWidthHalf; _v1.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v2.positionScreen.x *= _canvasWidthHalf; _v2.positionScreen.y *= _canvasHeightHalf;\n\t\t\t\t_v3.positionScreen.x *= _canvasWidthHalf; _v3.positionScreen.y *= _canvasHeightHalf;\n\n\t\t\t\tif ( material.overdraw > 0 ) {\n\n\t\t\t\t\texpand( _v1.positionScreen, _v2.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v2.positionScreen, _v3.positionScreen, material.overdraw );\n\t\t\t\t\texpand( _v3.positionScreen, _v1.positionScreen, material.overdraw );\n\n\t\t\t\t}\n\n\t\t\t\t_elemBox.setFromPoints( [\n\t\t\t\t\t_v1.positionScreen,\n\t\t\t\t\t_v2.positionScreen,\n\t\t\t\t\t_v3.positionScreen\n\t\t\t\t] );\n\n\t\t\t\tif ( _clipBox.intersectsBox( _elemBox ) === true ) {\n\n\t\t\t\t\trenderFace3( _v1, _v2, _v3, 0, 1, 2, element, material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* DEBUG\n\t\t\tsetLineWidth( 1 );\n\t\t\tsetStrokeStyle( 'rgba( 0, 255, 0, 0.5 )' );\n\t\t\t_context.strokeRect( _elemBox.min.x, _elemBox.min.y, _elemBox.max.x - _elemBox.min.x, _elemBox.max.y - _elemBox.min.y );\n\t\t\t*/\n\n\t\t\t_clearBox.union( _elemBox );\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetLineWidth( 1 );\n\t\tsetStrokeStyle( 'rgba( 255, 0, 0, 0.5 )' );\n\t\t_context.strokeRect( _clearBox.min.x, _clearBox.min.y, _clearBox.max.x - _clearBox.min.x, _clearBox.max.y - _clearBox.min.y );\n\t\t*/\n\n\t\t_context.setTransform( 1, 0, 0, 1, 0, 0 );\n\n\t};\n\n\t//\n\n\tfunction calculateLights() {\n\n\t\t_ambientLight.setRGB( 0, 0, 0 );\n\t\t_directionalLights.setRGB( 0, 0, 0 );\n\t\t_pointLights.setRGB( 0, 0, 0 );\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\t\t\tvar lightColor = light.color;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\t_ambientLight.add( lightColor );\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_directionalLights.add( lightColor );\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\t// for sprites\n\n\t\t\t\t_pointLights.add( lightColor );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction calculateLight( position, normal, color ) {\n\n\t\tfor ( var l = 0, ll = _lights.length; l < ll; l ++ ) {\n\n\t\t\tvar light = _lights[ l ];\n\n\t\t\t_lightColor.copy( light.color );\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld ).normalize();\n\n\t\t\t\tvar amount = normal.dot( lightPosition );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar lightPosition = _vector3.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tvar amount = normal.dot( _vector3.subVectors( lightPosition, position ).normalize() );\n\n\t\t\t\tif ( amount <= 0 ) continue;\n\n\t\t\t\tamount *= light.distance == 0 ? 1 : 1 - Math.min( position.distanceTo( lightPosition ) / light.distance, 1 );\n\n\t\t\t\tif ( amount == 0 ) continue;\n\n\t\t\t\tamount *= light.intensity;\n\n\t\t\t\tcolor.add( _lightColor.multiplyScalar( amount ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderSprite( v1, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\tvar scaleX = element.scale.x * _canvasWidthHalf;\n\t\tvar scaleY = element.scale.y * _canvasHeightHalf;\n\n\t\tvar dist = Math.sqrt( scaleX * scaleX + scaleY * scaleY ); // allow for rotated sprite\n\t\t_elemBox.min.set( v1.x - dist, v1.y - dist );\n\t\t_elemBox.max.set( v1.x + dist, v1.y + dist );\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tvar texture = material.map;\n\n\t\t\tif ( texture !== null ) {\n\n\t\t\t\tvar pattern = _patterns[ texture.id ];\n\n\t\t\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\t\t\tpattern = textureToPattern( texture );\n\t\t\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t\t\t}\n\n\t\t\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t\t\t\tvar bitmap = texture.image;\n\n\t\t\t\t\tvar ox = bitmap.width * texture.offset.x;\n\t\t\t\t\tvar oy = bitmap.height * texture.offset.y;\n\n\t\t\t\t\tvar sx = bitmap.width * texture.repeat.x;\n\t\t\t\t\tvar sy = bitmap.height * texture.repeat.y;\n\n\t\t\t\t\tvar cx = scaleX / sx;\n\t\t\t\t\tvar cy = scaleY / sy;\n\n\t\t\t\t\t_context.save();\n\t\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t\t_context.translate( - scaleX / 2, - scaleY / 2 );\n\t\t\t\t\t_context.scale( cx, cy );\n\t\t\t\t\t_context.translate( - ox, - oy );\n\t\t\t\t\t_context.fillRect( ox, oy, sx, sy );\n\t\t\t\t\t_context.restore();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// no texture\n\n\t\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t\t_context.save();\n\t\t\t\t_context.translate( v1.x, v1.y );\n\t\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t\t_context.scale( scaleX, - scaleY );\n\t\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t\t_context.restore();\n\n\t\t\t}\n\n\t\t} else if ( material.isSpriteCanvasMaterial ) {\n\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX, scaleY );\n\n\t\t\tmaterial.program( _context );\n\n\t\t\t_context.restore();\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\tsetFillStyle( material.color.getStyle() );\n\n\t\t\t_context.save();\n\t\t\t_context.translate( v1.x, v1.y );\n\t\t\tif ( material.rotation !== 0 ) _context.rotate( material.rotation );\n\t\t\t_context.scale( scaleX * material.size, - scaleY * material.size );\n\t\t\t_context.fillRect( - 0.5, - 0.5, 1, 1 );\n\t\t\t_context.restore();\n\n\t\t}\n\n\t\t/* DEBUG\n\t\tsetStrokeStyle( 'rgb(255,255,0)' );\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.x - 10, v1.y );\n\t\t_context.lineTo( v1.x + 10, v1.y );\n\t\t_context.moveTo( v1.x, v1.y - 10 );\n\t\t_context.lineTo( v1.x, v1.y + 10 );\n\t\t_context.stroke();\n\t\t*/\n\n\t}\n\n\tfunction renderLine( v1, v2, element, material ) {\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( v1.positionScreen.x, v1.positionScreen.y );\n\t\t_context.lineTo( v2.positionScreen.x, v2.positionScreen.y );\n\n\t\tif ( material.isLineBasicMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\n\t\t\tif ( material.vertexColors !== THREE.VertexColors ) {\n\n\t\t\t\tsetStrokeStyle( material.color.getStyle() );\n\n\t\t\t} else {\n\n\t\t\t\tvar colorStyle1 = element.vertexColors[ 0 ].getStyle();\n\t\t\t\tvar colorStyle2 = element.vertexColors[ 1 ].getStyle();\n\n\t\t\t\tif ( colorStyle1 === colorStyle2 ) {\n\n\t\t\t\t\tsetStrokeStyle( colorStyle1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar grad = _context.createLinearGradient(\n\t\t\t\t\t\t\tv1.positionScreen.x,\n\t\t\t\t\t\t\tv1.positionScreen.y,\n\t\t\t\t\t\t\tv2.positionScreen.x,\n\t\t\t\t\t\t\tv2.positionScreen.y\n\t\t\t\t\t\t);\n\t\t\t\t\t\tgrad.addColorStop( 0, colorStyle1 );\n\t\t\t\t\t\tgrad.addColorStop( 1, colorStyle2 );\n\n\t\t\t\t\t} catch ( exception ) {\n\n\t\t\t\t\t\tgrad = colorStyle1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tsetStrokeStyle( grad );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_context.stroke();\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t} else if ( material.isLineDashedMaterial ) {\n\n\t\t\tsetLineWidth( material.linewidth );\n\t\t\tsetLineCap( material.linecap );\n\t\t\tsetLineJoin( material.linejoin );\n\t\t\tsetStrokeStyle( material.color.getStyle() );\n\t\t\tsetLineDash( [ material.dashSize, material.gapSize ] );\n\n\t\t\t_context.stroke();\n\n\t\t\t_elemBox.expandByScalar( material.linewidth * 2 );\n\n\t\t\tsetLineDash( [] );\n\n\t\t}\n\n\t}\n\n\tfunction renderFace3( v1, v2, v3, uv1, uv2, uv3, element, material ) {\n\n\t\t_this.info.render.vertices += 3;\n\t\t_this.info.render.faces ++;\n\n\t\tsetOpacity( material.opacity );\n\t\tsetBlending( material.blending );\n\n\t\t_v1x = v1.positionScreen.x; _v1y = v1.positionScreen.y;\n\t\t_v2x = v2.positionScreen.x; _v2y = v2.positionScreen.y;\n\t\t_v3x = v3.positionScreen.x; _v3y = v3.positionScreen.y;\n\n\t\tdrawTriangle( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y );\n\n\t\tif ( ( material.isMeshLambertMaterial || material.isMeshPhongMaterial || material.isMeshStandardMaterial ) && material.map === null ) {\n\n\t\t\t_diffuseColor.copy( material.color );\n\t\t\t_emissiveColor.copy( material.emissive );\n\n\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t_diffuseColor.multiply( element.color );\n\n\t\t\t}\n\n\t\t\t_color.copy( _ambientLight );\n\n\t\t\t_centroid.copy( v1.positionWorld ).add( v2.positionWorld ).add( v3.positionWorld ).divideScalar( 3 );\n\n\t\t\tcalculateLight( _centroid, element.normalModel, _color );\n\n\t\t\t_color.multiply( _diffuseColor ).add( _emissiveColor );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else if ( material.isMeshBasicMaterial || material.isMeshLambertMaterial || material.isMeshPhongMaterial || material.isMeshStandardMaterial ) {\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tvar mapping = material.map.mapping;\n\n\t\t\t\tif ( mapping === THREE.UVMapping ) {\n\n\t\t\t\t\t_uvs = element.uvs;\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uvs[ uv1 ].x, _uvs[ uv1 ].y, _uvs[ uv2 ].x, _uvs[ uv2 ].y, _uvs[ uv3 ].x, _uvs[ uv3 ].y, material.map );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.envMap !== null ) {\n\n\t\t\t\tif ( material.envMap.mapping === THREE.SphericalReflectionMapping ) {\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv1 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv1x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv1y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv2 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv2x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv2y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\t_normal.copy( element.vertexNormalsModel[ uv3 ] ).applyMatrix3( _normalViewMatrix );\n\t\t\t\t\t_uv3x = 0.5 * _normal.x + 0.5;\n\t\t\t\t\t_uv3y = 0.5 * _normal.y + 0.5;\n\n\t\t\t\t\tpatternPath( _v1x, _v1y, _v2x, _v2y, _v3x, _v3y, _uv1x, _uv1y, _uv2x, _uv2y, _uv3x, _uv3y, material.envMap );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_color.copy( material.color );\n\n\t\t\t\tif ( material.vertexColors === THREE.FaceColors ) {\n\n\t\t\t\t\t_color.multiply( element.color );\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.wireframe === true\n\t\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t\t : fillPath( _color );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t_normal.copy( element.normalModel ).applyMatrix3( _normalViewMatrix );\n\n\t\t\t_color.setRGB( _normal.x, _normal.y, _normal.z ).multiplyScalar( 0.5 ).addScalar( 0.5 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t} else {\n\n\t\t\t_color.setRGB( 1, 1, 1 );\n\n\t\t\tmaterial.wireframe === true\n\t\t\t\t ? strokePath( _color, material.wireframeLinewidth, material.wireframeLinecap, material.wireframeLinejoin )\n\t\t\t\t : fillPath( _color );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction drawTriangle( x0, y0, x1, y1, x2, y2 ) {\n\n\t\t_context.beginPath();\n\t\t_context.moveTo( x0, y0 );\n\t\t_context.lineTo( x1, y1 );\n\t\t_context.lineTo( x2, y2 );\n\t\t_context.closePath();\n\n\t}\n\n\tfunction strokePath( color, linewidth, linecap, linejoin ) {\n\n\t\tsetLineWidth( linewidth );\n\t\tsetLineCap( linecap );\n\t\tsetLineJoin( linejoin );\n\t\tsetStrokeStyle( color.getStyle() );\n\n\t\t_context.stroke();\n\n\t\t_elemBox.expandByScalar( linewidth * 2 );\n\n\t}\n\n\tfunction fillPath( color ) {\n\n\t\tsetFillStyle( color.getStyle() );\n\t\t_context.fill();\n\n\t}\n\n\tfunction textureToPattern( texture ) {\n\n\t\tif ( texture.version === 0 ||\n\t\t\ttexture instanceof THREE.CompressedTexture ||\n\t\t\ttexture instanceof THREE.DataTexture ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: texture.version\n\t\t\t};\n\n\t\t}\n\n\t\tvar image = texture.image;\n\n\t\tif ( image.complete === false ) {\n\n\t\t\treturn {\n\t\t\t\tcanvas: undefined,\n\t\t\t\tversion: 0\n\t\t\t};\n\n\t\t}\n\n\t\tvar repeatX = texture.wrapS === THREE.RepeatWrapping || texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar repeatY = texture.wrapT === THREE.RepeatWrapping || texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\tvar mirrorX = texture.wrapS === THREE.MirroredRepeatWrapping;\n\t\tvar mirrorY = texture.wrapT === THREE.MirroredRepeatWrapping;\n\n\t\t//\n\n\t\tvar canvas = document.createElement( 'canvas' );\n\t\tcanvas.width = image.width * ( mirrorX ? 2 : 1 );\n\t\tcanvas.height = image.height * ( mirrorY ? 2 : 1 );\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.setTransform( 1, 0, 0, - 1, 0, image.height );\n\t\tcontext.drawImage( image, 0, 0 );\n\n\t\tif ( mirrorX === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, - 1, image.width, image.height );\n\t\t\tcontext.drawImage( image, - image.width, 0 );\n\n\t\t}\n\n\t\tif ( mirrorY === true ) {\n\n\t\t\tcontext.setTransform( 1, 0, 0, 1, 0, 0 );\n\t\t\tcontext.drawImage( image, 0, image.height );\n\n\t\t}\n\n\t\tif ( mirrorX === true && mirrorY === true ) {\n\n\t\t\tcontext.setTransform( - 1, 0, 0, 1, image.width, 0 );\n\t\t\tcontext.drawImage( image, - image.width, image.height );\n\n\t\t}\n\n\t\tvar repeat = 'no-repeat';\n\n\t\tif ( repeatX === true && repeatY === true ) {\n\n\t\t\trepeat = 'repeat';\n\n\t\t} else if ( repeatX === true ) {\n\n\t\t\trepeat = 'repeat-x';\n\n\t\t} else if ( repeatY === true ) {\n\n\t\t\trepeat = 'repeat-y';\n\n\t\t}\n\n\t\tvar pattern = _context.createPattern( canvas, repeat );\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\treturn {\n\t\t\tcanvas: pattern,\n\t\t\tversion: texture.version\n\t\t};\n\n\t}\n\n\tfunction patternPath( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, texture ) {\n\n\t\tvar pattern = _patterns[ texture.id ];\n\n\t\tif ( pattern === undefined || pattern.version !== texture.version ) {\n\n\t\t\tpattern = textureToPattern( texture );\n\t\t\t_patterns[ texture.id ] = pattern;\n\n\t\t}\n\n\t\tif ( pattern.canvas !== undefined ) {\n\n\t\t\tsetFillStyle( pattern.canvas );\n\n\t\t} else {\n\n\t\t\tsetFillStyle( 'rgba( 0, 0, 0, 1)' );\n\t\t\t_context.fill();\n\t\t\treturn;\n\n\t\t}\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\t\toffsetX = texture.offset.x / texture.repeat.x,\n\t\t\toffsetY = texture.offset.y / texture.repeat.y,\n\t\t\twidth = texture.image.width * texture.repeat.x,\n\t\t\theight = texture.image.height * texture.repeat.y;\n\n\t\tu0 = ( u0 + offsetX ) * width;\n\t\tv0 = ( v0 + offsetY ) * height;\n\n\t\tu1 = ( u1 + offsetX ) * width;\n\t\tv1 = ( v1 + offsetY ) * height;\n\n\t\tu2 = ( u2 + offsetX ) * width;\n\t\tv2 = ( v2 + offsetY ) * height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.fill();\n\t\t_context.restore();\n\n\t}\n\n\t/*\n\tfunction clipImage( x0, y0, x1, y1, x2, y2, u0, v0, u1, v1, u2, v2, image ) {\n\n\t\t// http://extremelysatisfactorytotalitarianism.com/blog/?p=2120\n\n\t\tvar a, b, c, d, e, f, det, idet,\n\t\twidth = image.width - 1,\n\t\theight = image.height - 1;\n\n\t\tu0 *= width; v0 *= height;\n\t\tu1 *= width; v1 *= height;\n\t\tu2 *= width; v2 *= height;\n\n\t\tx1 -= x0; y1 -= y0;\n\t\tx2 -= x0; y2 -= y0;\n\n\t\tu1 -= u0; v1 -= v0;\n\t\tu2 -= u0; v2 -= v0;\n\n\t\tdet = u1 * v2 - u2 * v1;\n\n\t\tidet = 1 / det;\n\n\t\ta = ( v2 * x1 - v1 * x2 ) * idet;\n\t\tb = ( v2 * y1 - v1 * y2 ) * idet;\n\t\tc = ( u1 * x2 - u2 * x1 ) * idet;\n\t\td = ( u1 * y2 - u2 * y1 ) * idet;\n\n\t\te = x0 - a * u0 - c * v0;\n\t\tf = y0 - b * u0 - d * v0;\n\n\t\t_context.save();\n\t\t_context.transform( a, b, c, d, e, f );\n\t\t_context.clip();\n\t\t_context.drawImage( image, 0, 0 );\n\t\t_context.restore();\n\n\t}\n\t*/\n\n\t// Hide anti-alias gaps\n\n\tfunction expand( v1, v2, pixels ) {\n\n\t\tvar x = v2.x - v1.x, y = v2.y - v1.y,\n\t\t\tdet = x * x + y * y, idet;\n\n\t\tif ( det === 0 ) return;\n\n\t\tidet = pixels / Math.sqrt( det );\n\n\t\tx *= idet; y *= idet;\n\n\t\tv2.x += x; v2.y += y;\n\t\tv1.x -= x; v1.y -= y;\n\n\t}\n\n\t// Context cached methods.\n\n\tfunction setOpacity( value ) {\n\n\t\tif ( _contextGlobalAlpha !== value ) {\n\n\t\t\t_context.globalAlpha = value;\n\t\t\t_contextGlobalAlpha = value;\n\n\t\t}\n\n\t}\n\n\tfunction setBlending( value ) {\n\n\t\tif ( _contextGlobalCompositeOperation !== value ) {\n\n\t\t\tif ( value === THREE.NormalBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'source-over';\n\n\t\t\t} else if ( value === THREE.AdditiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'lighter';\n\n\t\t\t} else if ( value === THREE.SubtractiveBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'darker';\n\n\t\t\t} else if ( value === THREE.MultiplyBlending ) {\n\n\t\t\t\t_context.globalCompositeOperation = 'multiply';\n\n\t\t\t}\n\n\t\t\t_contextGlobalCompositeOperation = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineWidth( value ) {\n\n\t\tif ( _contextLineWidth !== value ) {\n\n\t\t\t_context.lineWidth = value;\n\t\t\t_contextLineWidth = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineCap( value ) {\n\n\t\t// \"butt\", \"round\", \"square\"\n\n\t\tif ( _contextLineCap !== value ) {\n\n\t\t\t_context.lineCap = value;\n\t\t\t_contextLineCap = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineJoin( value ) {\n\n\t\t// \"round\", \"bevel\", \"miter\"\n\n\t\tif ( _contextLineJoin !== value ) {\n\n\t\t\t_context.lineJoin = value;\n\t\t\t_contextLineJoin = value;\n\n\t\t}\n\n\t}\n\n\tfunction setStrokeStyle( value ) {\n\n\t\tif ( _contextStrokeStyle !== value ) {\n\n\t\t\t_context.strokeStyle = value;\n\t\t\t_contextStrokeStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setFillStyle( value ) {\n\n\t\tif ( _contextFillStyle !== value ) {\n\n\t\t\t_context.fillStyle = value;\n\t\t\t_contextFillStyle = value;\n\n\t\t}\n\n\t}\n\n\tfunction setLineDash( value ) {\n\n\t\tif ( _contextLineDash.length !== value.length ) {\n\n\t\t\t_context.setLineDash( value );\n\t\t\t_contextLineDash = value;\n\n\t\t}\n\n\t}\n\n};\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author julianwa / https://github.com/julianwa\n */\nconst THREE = window.THREE;\n\nTHREE.RenderableObject = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableFace = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\tthis.v3 = new THREE.RenderableVertex();\n\n\tthis.normalModel = new THREE.Vector3();\n\n\tthis.vertexNormalsModel = [ new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3() ];\n\tthis.vertexNormalsLength = 0;\n\n\tthis.color = new THREE.Color();\n\tthis.material = null;\n\tthis.uvs = [ new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() ];\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableVertex = function () {\n\n\tthis.position = new THREE.Vector3();\n\tthis.positionWorld = new THREE.Vector3();\n\tthis.positionScreen = new THREE.Vector4();\n\n\tthis.visible = true;\n\n};\n\nTHREE.RenderableVertex.prototype.copy = function ( vertex ) {\n\n\tthis.positionWorld.copy( vertex.positionWorld );\n\tthis.positionScreen.copy( vertex.positionScreen );\n\n};\n\n//\n\nTHREE.RenderableLine = function () {\n\n\tthis.id = 0;\n\n\tthis.v1 = new THREE.RenderableVertex();\n\tthis.v2 = new THREE.RenderableVertex();\n\n\tthis.vertexColors = [ new THREE.Color(), new THREE.Color() ];\n\tthis.material = null;\n\n\tthis.z = 0;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.RenderableSprite = function () {\n\n\tthis.id = 0;\n\n\tthis.object = null;\n\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.z = 0;\n\n\tthis.rotation = 0;\n\tthis.scale = new THREE.Vector2();\n\n\tthis.material = null;\n\tthis.renderOrder = 0;\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tvar _object, _objectCount, _objectPool = [], _objectPoolLength = 0,\n\t\t_vertex, _vertexCount, _vertexPool = [], _vertexPoolLength = 0,\n\t\t_face, _faceCount, _facePool = [], _facePoolLength = 0,\n\t\t_line, _lineCount, _linePool = [], _linePoolLength = 0,\n\t\t_sprite, _spriteCount, _spritePool = [], _spritePoolLength = 0,\n\n\t\t_renderData = { objects: [], lights: [], elements: [] },\n\n\t\t_vector3 = new THREE.Vector3(),\n\t\t_vector4 = new THREE.Vector4(),\n\n\t\t_clipBox = new THREE.Box3( new THREE.Vector3( - 1, - 1, - 1 ), new THREE.Vector3( 1, 1, 1 ) ),\n\t\t_boundingBox = new THREE.Box3(),\n\t\t_points3 = new Array( 3 ),\n\n\t\t_viewMatrix = new THREE.Matrix4(),\n\t\t_viewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_modelMatrix,\n\t\t_modelViewProjectionMatrix = new THREE.Matrix4(),\n\n\t\t_normalMatrix = new THREE.Matrix3(),\n\n\t\t_frustum = new THREE.Frustum(),\n\n\t\t_clippedVertex1PositionScreen = new THREE.Vector4(),\n\t\t_clippedVertex2PositionScreen = new THREE.Vector4();\n\n\t//\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function () {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n\t//\n\n\tvar RenderList = function () {\n\n\t\tvar normals = [];\n\t\tvar colors = [];\n\t\tvar uvs = [];\n\n\t\tvar object = null;\n\t\tvar material = null;\n\n\t\tvar normalMatrix = new THREE.Matrix3();\n\n\t\tfunction setObject( value ) {\n\n\t\t\tobject = value;\n\t\t\tmaterial = object.material;\n\n\t\t\tnormalMatrix.getNormalMatrix( object.matrixWorld );\n\n\t\t\tnormals.length = 0;\n\t\t\tcolors.length = 0;\n\t\t\tuvs.length = 0;\n\n\t\t}\n\n\t\tfunction projectVertex( vertex ) {\n\n\t\t\tvar position = vertex.position;\n\t\t\tvar positionWorld = vertex.positionWorld;\n\t\t\tvar positionScreen = vertex.positionScreen;\n\n\t\t\tpositionWorld.copy( position ).applyMatrix4( _modelMatrix );\n\t\t\tpositionScreen.copy( positionWorld ).applyMatrix4( _viewProjectionMatrix );\n\n\t\t\tvar invW = 1 / positionScreen.w;\n\n\t\t\tpositionScreen.x *= invW;\n\t\t\tpositionScreen.y *= invW;\n\t\t\tpositionScreen.z *= invW;\n\n\t\t\tvertex.visible = positionScreen.x >= - 1 && positionScreen.x <= 1 &&\n\t\t\t\t\t positionScreen.y >= - 1 && positionScreen.y <= 1 &&\n\t\t\t\t\t positionScreen.z >= - 1 && positionScreen.z <= 1;\n\n\t\t}\n\n\t\tfunction pushVertex( x, y, z ) {\n\n\t\t\t_vertex = getNextVertexInPool();\n\t\t\t_vertex.position.set( x, y, z );\n\n\t\t\tprojectVertex( _vertex );\n\n\t\t}\n\n\t\tfunction pushNormal( x, y, z ) {\n\n\t\t\tnormals.push( x, y, z );\n\n\t\t}\n\n\t\tfunction pushColor( r, g, b ) {\n\n\t\t\tcolors.push( r, g, b );\n\n\t\t}\n\n\t\tfunction pushUv( x, y ) {\n\n\t\t\tuvs.push( x, y );\n\n\t\t}\n\n\t\tfunction checkTriangleVisibility( v1, v2, v3 ) {\n\n\t\t\tif ( v1.visible === true || v2.visible === true || v3.visible === true ) return true;\n\n\t\t\t_points3[ 0 ] = v1.positionScreen;\n\t\t\t_points3[ 1 ] = v2.positionScreen;\n\t\t\t_points3[ 2 ] = v3.positionScreen;\n\n\t\t\treturn _clipBox.intersectsBox( _boundingBox.setFromPoints( _points3 ) );\n\n\t\t}\n\n\t\tfunction checkBackfaceCulling( v1, v2, v3 ) {\n\n\t\t\treturn ( ( v3.positionScreen.x - v1.positionScreen.x ) *\n\t\t\t\t    ( v2.positionScreen.y - v1.positionScreen.y ) -\n\t\t\t\t    ( v3.positionScreen.y - v1.positionScreen.y ) *\n\t\t\t\t    ( v2.positionScreen.x - v1.positionScreen.x ) ) < 0;\n\n\t\t}\n\n\t\tfunction pushLine( a, b ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\n\t\t\t// Clip\n\n\t\t\tv1.positionScreen.copy( v1.position ).applyMatrix4( _modelViewProjectionMatrix );\n\t\t\tv2.positionScreen.copy( v2.position ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\tif ( clipLine( v1.positionScreen, v2.positionScreen ) === true ) {\n\n\t\t\t\t// Perform the perspective divide\n\t\t\t\tv1.positionScreen.multiplyScalar( 1 / v1.positionScreen.w );\n\t\t\t\tv2.positionScreen.multiplyScalar( 1 / v2.positionScreen.w );\n\n\t\t\t\t_line = getNextLineInPool();\n\t\t\t\t_line.id = object.id;\n\t\t\t\t_line.v1.copy( v1 );\n\t\t\t\t_line.v2.copy( v2 );\n\t\t\t\t_line.z = Math.max( v1.positionScreen.z, v2.positionScreen.z );\n\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t_line.material = object.material;\n\n\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t_line.vertexColors[ 0 ].fromArray( colors, a * 3 );\n\t\t\t\t\t_line.vertexColors[ 1 ].fromArray( colors, b * 3 );\n\n\t\t\t\t}\n\n\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushTriangle( a, b, c ) {\n\n\t\t\tvar v1 = _vertexPool[ a ];\n\t\t\tvar v2 = _vertexPool[ b ];\n\t\t\tvar v3 = _vertexPool[ c ];\n\n\t\t\tif ( checkTriangleVisibility( v1, v2, v3 ) === false ) return;\n\n\t\t\tif ( material.side === THREE.DoubleSide || checkBackfaceCulling( v1, v2, v3 ) === true ) {\n\n\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t_face.id = object.id;\n\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t_face.v3.copy( v3 );\n\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t// use first vertex normal as face normal\n\n\t\t\t\t_face.normalModel.fromArray( normals, a * 3 );\n\t\t\t\t_face.normalModel.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\tfor ( var i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\tvar normal = _face.vertexNormalsModel[ i ];\n\t\t\t\t\tnormal.fromArray( normals, arguments[ i ] * 3 );\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t\tvar uv = _face.uvs[ i ];\n\t\t\t\t\tuv.fromArray( uvs, arguments[ i ] * 2 );\n\n\t\t\t\t}\n\n\t\t\t\t_face.vertexNormalsLength = 3;\n\n\t\t\t\t_face.material = object.material;\n\n\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tsetObject: setObject,\n\t\t\tprojectVertex: projectVertex,\n\t\t\tcheckTriangleVisibility: checkTriangleVisibility,\n\t\t\tcheckBackfaceCulling: checkBackfaceCulling,\n\t\t\tpushVertex: pushVertex,\n\t\t\tpushNormal: pushNormal,\n\t\t\tpushColor: pushColor,\n\t\t\tpushUv: pushUv,\n\t\t\tpushLine: pushLine,\n\t\t\tpushTriangle: pushTriangle\n\t\t};\n\n\t};\n\n\tvar renderList = new RenderList();\n\n\tfunction projectObject( object ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t_renderData.lights.push( object );\n\n\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsObject( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\tif ( object.material.visible === false ) return;\n\t\t\tif ( object.frustumCulled === true && _frustum.intersectsSprite( object ) === false ) return;\n\n\t\t\taddObject( object );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ] );\n\n\t\t}\n\n\t}\n\n\tfunction addObject( object ) {\n\n\t\t_object = getNextObjectInPool();\n\t\t_object.id = object.id;\n\t\t_object.object = object;\n\n\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t_vector3.applyMatrix4( _viewProjectionMatrix );\n\t\t_object.z = _vector3.z;\n\t\t_object.renderOrder = object.renderOrder;\n\n\t\t_renderData.objects.push( _object );\n\n\t}\n\n\tthis.projectScene = function ( scene, camera, sortObjects, sortElements ) {\n\n\t\t_faceCount = 0;\n\t\t_lineCount = 0;\n\t\t_spriteCount = 0;\n\n\t\t_renderData.elements.length = 0;\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t_viewMatrix.copy( camera.matrixWorldInverse.getInverse( camera.matrixWorld ) );\n\t\t_viewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, _viewMatrix );\n\n\t\t_frustum.setFromMatrix( _viewProjectionMatrix );\n\n\t\t//\n\n\t\t_objectCount = 0;\n\n\t\t_renderData.objects.length = 0;\n\t\t_renderData.lights.length = 0;\n\n\t\tprojectObject( scene );\n\n\t\tif ( sortObjects === true ) {\n\n\t\t\t_renderData.objects.sort( painterSort );\n\n\t\t}\n\n\t\t//\n\n\t\tvar objects = _renderData.objects;\n\n\t\tfor ( var o = 0, ol = objects.length; o < ol; o ++ ) {\n\n\t\t\tvar object = objects[ o ].object;\n\t\t\tvar geometry = object.geometry;\n\n\t\t\trenderList.setObject( object );\n\n\t\t\t_modelMatrix = object.matrixWorld;\n\n\t\t\t_vertexCount = 0;\n\n\t\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tif ( attributes.position === undefined ) continue;\n\n\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.normal !== undefined ) {\n\n\t\t\t\t\t\tvar normals = attributes.normal.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = normals.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushNormal( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = uvs.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\trenderList.pushUv( uvs[ i ], uvs[ i + 1 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\t\t\t\tfor ( var g = 0; g < groups.length; g ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ g ];\n\n\t\t\t\t\t\t\t\tfor ( var i = group.start, l = group.start + group.count; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushTriangle( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushTriangle( i, i + 1, i + 2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\t\tvar faces = geometry.faces;\n\t\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\t\t\t\t_normalMatrix.getNormalMatrix( _modelMatrix );\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector3.copy( vertex );\n\n\t\t\t\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\t\tvar morphInfluences = object.morphTargetInfluences;\n\n\t\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\t\tvar target = morphTargets[ t ];\n\t\t\t\t\t\t\t\tvar targetVertex = target.vertices[ v ];\n\n\t\t\t\t\t\t\t\t_vector3.x += ( targetVertex.x - vertex.x ) * influence;\n\t\t\t\t\t\t\t\t_vector3.y += ( targetVertex.y - vertex.y ) * influence;\n\t\t\t\t\t\t\t\t_vector3.z += ( targetVertex.z - vertex.z ) * influence;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trenderList.pushVertex( _vector3.x, _vector3.y, _vector3.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\t\tvar face = faces[ f ];\n\n\t\t\t\t\t\tmaterial = isMultiMaterial === true\n\t\t\t\t\t\t\t ? object.material[ face.materialIndex ]\n\t\t\t\t\t\t\t : object.material;\n\n\t\t\t\t\t\tif ( material === undefined ) continue;\n\n\t\t\t\t\t\tvar side = material.side;\n\n\t\t\t\t\t\tvar v1 = _vertexPool[ face.a ];\n\t\t\t\t\t\tvar v2 = _vertexPool[ face.b ];\n\t\t\t\t\t\tvar v3 = _vertexPool[ face.c ];\n\n\t\t\t\t\t\tif ( renderList.checkTriangleVisibility( v1, v2, v3 ) === false ) continue;\n\n\t\t\t\t\t\tvar visible = renderList.checkBackfaceCulling( v1, v2, v3 );\n\n\t\t\t\t\t\tif ( side !== THREE.DoubleSide ) {\n\n\t\t\t\t\t\t\tif ( side === THREE.FrontSide && visible === false ) continue;\n\t\t\t\t\t\t\tif ( side === THREE.BackSide && visible === true ) continue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face = getNextFaceInPool();\n\n\t\t\t\t\t\t_face.id = object.id;\n\t\t\t\t\t\t_face.v1.copy( v1 );\n\t\t\t\t\t\t_face.v2.copy( v2 );\n\t\t\t\t\t\t_face.v3.copy( v3 );\n\n\t\t\t\t\t\t_face.normalModel.copy( face.normal );\n\n\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t_face.normalModel.negate();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.normalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\tvar faceVertexNormals = face.vertexNormals;\n\n\t\t\t\t\t\tfor ( var n = 0, nl = Math.min( faceVertexNormals.length, 3 ); n < nl; n ++ ) {\n\n\t\t\t\t\t\t\tvar normalModel = _face.vertexNormalsModel[ n ];\n\t\t\t\t\t\t\tnormalModel.copy( faceVertexNormals[ n ] );\n\n\t\t\t\t\t\t\tif ( visible === false && ( side === THREE.BackSide || side === THREE.DoubleSide ) ) {\n\n\t\t\t\t\t\t\t\tnormalModel.negate();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnormalModel.applyMatrix3( _normalMatrix ).normalize();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.vertexNormalsLength = faceVertexNormals.length;\n\n\t\t\t\t\t\tvar vertexUvs = faceVertexUvs[ f ];\n\n\t\t\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\t\t\tfor ( var u = 0; u < 3; u ++ ) {\n\n\t\t\t\t\t\t\t\t_face.uvs[ u ].copy( vertexUvs[ u ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_face.color = face.color;\n\t\t\t\t\t\t_face.material = material;\n\n\t\t\t\t\t\t_face.z = ( v1.positionScreen.z + v2.positionScreen.z + v3.positionScreen.z ) / 3;\n\t\t\t\t\t\t_face.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t_renderData.elements.push( _face );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\t\tvar attributes = geometry.attributes;\n\n\t\t\t\t\tif ( attributes.position !== undefined ) {\n\n\t\t\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\trenderList.pushVertex( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( attributes.color !== undefined ) {\n\n\t\t\t\t\t\t\tvar colors = attributes.color.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = colors.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushColor( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\t\t\tvar indices = geometry.index.array;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 2 ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( indices[ i ], indices[ i + 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = ( positions.length / 3 ) - 1; i < l; i += step ) {\n\n\t\t\t\t\t\t\t\trenderList.pushLine( i, i + 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tif ( vertices.length === 0 ) continue;\n\n\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\tv1.positionScreen.copy( vertices[ 0 ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\tvar step = object instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\t\t\tfor ( var v = 1, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tv1 = getNextVertexInPool();\n\t\t\t\t\t\tv1.positionScreen.copy( vertices[ v ] ).applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tif ( ( v + 1 ) % step > 0 ) continue;\n\n\t\t\t\t\t\tv2 = _vertexPool[ _vertexCount - 2 ];\n\n\t\t\t\t\t\t_clippedVertex1PositionScreen.copy( v1.positionScreen );\n\t\t\t\t\t\t_clippedVertex2PositionScreen.copy( v2.positionScreen );\n\n\t\t\t\t\t\tif ( clipLine( _clippedVertex1PositionScreen, _clippedVertex2PositionScreen ) === true ) {\n\n\t\t\t\t\t\t\t// Perform the perspective divide\n\t\t\t\t\t\t\t_clippedVertex1PositionScreen.multiplyScalar( 1 / _clippedVertex1PositionScreen.w );\n\t\t\t\t\t\t\t_clippedVertex2PositionScreen.multiplyScalar( 1 / _clippedVertex2PositionScreen.w );\n\n\t\t\t\t\t\t\t_line = getNextLineInPool();\n\n\t\t\t\t\t\t\t_line.id = object.id;\n\t\t\t\t\t\t\t_line.v1.positionScreen.copy( _clippedVertex1PositionScreen );\n\t\t\t\t\t\t\t_line.v2.positionScreen.copy( _clippedVertex2PositionScreen );\n\n\t\t\t\t\t\t\t_line.z = Math.max( _clippedVertex1PositionScreen.z, _clippedVertex2PositionScreen.z );\n\t\t\t\t\t\t\t_line.renderOrder = object.renderOrder;\n\n\t\t\t\t\t\t\t_line.material = object.material;\n\n\t\t\t\t\t\t\tif ( object.material.vertexColors === THREE.VertexColors ) {\n\n\t\t\t\t\t\t\t\t_line.vertexColors[ 0 ].copy( object.geometry.colors[ v ] );\n\t\t\t\t\t\t\t\t_line.vertexColors[ 1 ].copy( object.geometry.colors[ v - 1 ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_renderData.elements.push( _line );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Points ) {\n\n\t\t\t\t_modelViewProjectionMatrix.multiplyMatrices( _viewProjectionMatrix, _modelMatrix );\n\n\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\tvar vertices = object.geometry.vertices;\n\n\t\t\t\t\tfor ( var v = 0, vl = vertices.length; v < vl; v ++ ) {\n\n\t\t\t\t\t\tvar vertex = vertices[ v ];\n\n\t\t\t\t\t\t_vector4.set( vertex.x, vertex.y, vertex.z, 1 );\n\t\t\t\t\t\t_vector4.applyMatrix4( _modelViewProjectionMatrix );\n\n\t\t\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\t_vector4.set( _modelMatrix.elements[ 12 ], _modelMatrix.elements[ 13 ], _modelMatrix.elements[ 14 ], 1 );\n\t\t\t\t_vector4.applyMatrix4( _viewProjectionMatrix );\n\n\t\t\t\tpushPoint( _vector4, object, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( sortElements === true ) {\n\n\t\t\t_renderData.elements.sort( painterSort );\n\n\t\t}\n\n\t\treturn _renderData;\n\n\t};\n\n\tfunction pushPoint( _vector4, object, camera ) {\n\n\t\tvar invW = 1 / _vector4.w;\n\n\t\t_vector4.z *= invW;\n\n\t\tif ( _vector4.z >= - 1 && _vector4.z <= 1 ) {\n\n\t\t\t_sprite = getNextSpriteInPool();\n\t\t\t_sprite.id = object.id;\n\t\t\t_sprite.x = _vector4.x * invW;\n\t\t\t_sprite.y = _vector4.y * invW;\n\t\t\t_sprite.z = _vector4.z;\n\t\t\t_sprite.renderOrder = object.renderOrder;\n\t\t\t_sprite.object = object;\n\n\t\t\t_sprite.rotation = object.rotation;\n\n\t\t\t_sprite.scale.x = object.scale.x * Math.abs( _sprite.x - ( _vector4.x + camera.projectionMatrix.elements[ 0 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 12 ] ) );\n\t\t\t_sprite.scale.y = object.scale.y * Math.abs( _sprite.y - ( _vector4.y + camera.projectionMatrix.elements[ 5 ] ) / ( _vector4.w + camera.projectionMatrix.elements[ 13 ] ) );\n\n\t\t\t_sprite.material = object.material;\n\n\t\t\t_renderData.elements.push( _sprite );\n\n\t\t}\n\n\t}\n\n\t// Pools\n\n\tfunction getNextObjectInPool() {\n\n\t\tif ( _objectCount === _objectPoolLength ) {\n\n\t\t\tvar object = new THREE.RenderableObject();\n\t\t\t_objectPool.push( object );\n\t\t\t_objectPoolLength ++;\n\t\t\t_objectCount ++;\n\t\t\treturn object;\n\n\t\t}\n\n\t\treturn _objectPool[ _objectCount ++ ];\n\n\t}\n\n\tfunction getNextVertexInPool() {\n\n\t\tif ( _vertexCount === _vertexPoolLength ) {\n\n\t\t\tvar vertex = new THREE.RenderableVertex();\n\t\t\t_vertexPool.push( vertex );\n\t\t\t_vertexPoolLength ++;\n\t\t\t_vertexCount ++;\n\t\t\treturn vertex;\n\n\t\t}\n\n\t\treturn _vertexPool[ _vertexCount ++ ];\n\n\t}\n\n\tfunction getNextFaceInPool() {\n\n\t\tif ( _faceCount === _facePoolLength ) {\n\n\t\t\tvar face = new THREE.RenderableFace();\n\t\t\t_facePool.push( face );\n\t\t\t_facePoolLength ++;\n\t\t\t_faceCount ++;\n\t\t\treturn face;\n\n\t\t}\n\n\t\treturn _facePool[ _faceCount ++ ];\n\n\n\t}\n\n\tfunction getNextLineInPool() {\n\n\t\tif ( _lineCount === _linePoolLength ) {\n\n\t\t\tvar line = new THREE.RenderableLine();\n\t\t\t_linePool.push( line );\n\t\t\t_linePoolLength ++;\n\t\t\t_lineCount ++;\n\t\t\treturn line;\n\n\t\t}\n\n\t\treturn _linePool[ _lineCount ++ ];\n\n\t}\n\n\tfunction getNextSpriteInPool() {\n\n\t\tif ( _spriteCount === _spritePoolLength ) {\n\n\t\t\tvar sprite = new THREE.RenderableSprite();\n\t\t\t_spritePool.push( sprite );\n\t\t\t_spritePoolLength ++;\n\t\t\t_spriteCount ++;\n\t\t\treturn sprite;\n\n\t\t}\n\n\t\treturn _spritePool[ _spriteCount ++ ];\n\n\t}\n\n\t//\n\n\tfunction painterSort( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else if ( a.id !== b.id ) {\n\n\t\t\treturn a.id - b.id;\n\n\t\t} else {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t}\n\n\tfunction clipLine( s1, s2 ) {\n\n\t\tvar alpha1 = 0, alpha2 = 1,\n\n\t\t// Calculate the boundary coordinate of each vertex for the near and far clip planes,\n\t\t// Z = -1 and Z = +1, respectively.\n\n\t\t\tbc1near = s1.z + s1.w,\n\t\t\tbc2near = s2.z + s2.w,\n\t\t\tbc1far = - s1.z + s1.w,\n\t\t\tbc2far = - s2.z + s2.w;\n\n\t\tif ( bc1near >= 0 && bc2near >= 0 && bc1far >= 0 && bc2far >= 0 ) {\n\n\t\t\t// Both vertices lie entirely within all clip planes.\n\t\t\treturn true;\n\n\t\t} else if ( ( bc1near < 0 && bc2near < 0 ) || ( bc1far < 0 && bc2far < 0 ) ) {\n\n\t\t\t// Both vertices lie entirely outside one of the clip planes.\n\t\t\treturn false;\n\n\t\t} else {\n\n\t\t\t// The line segment spans at least one clip plane.\n\n\t\t\tif ( bc1near < 0 ) {\n\n\t\t\t\t// v1 lies outside the near plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t} else if ( bc2near < 0 ) {\n\n\t\t\t\t// v2 lies outside the near plane, v1 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1near / ( bc1near - bc2near ) );\n\n\t\t\t}\n\n\t\t\tif ( bc1far < 0 ) {\n\n\t\t\t\t// v1 lies outside the far plane, v2 inside\n\t\t\t\talpha1 = Math.max( alpha1, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t} else if ( bc2far < 0 ) {\n\n\t\t\t\t// v2 lies outside the far plane, v2 inside\n\t\t\t\talpha2 = Math.min( alpha2, bc1far / ( bc1far - bc2far ) );\n\n\t\t\t}\n\n\t\t\tif ( alpha2 < alpha1 ) {\n\n\t\t\t\t// The line segment spans two boundaries, but is outside both of them.\n\t\t\t\t// (This can't happen when we're only clipping against just near/far but good\n\t\t\t\t//  to leave the check here for future usage if other clip planes are added.)\n\t\t\t\treturn false;\n\n\t\t\t} else {\n\n\t\t\t\t// Update the s1 and s2 vertices to match the clipped line segment.\n\t\t\t\ts1.lerp( s2, alpha1 );\n\t\t\t\ts2.lerp( s1, 1 - alpha2 );\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n","export const screenOneFlags = [{\n  en: \"Technology driven retail\",\n  cn: \"技术驱动零售\",\n  cord: \"10x36\",\n  maxs: 0.8,\n  mins: 0.5\n}, {\n  en: \"New retail\",\n  cn: \"新零售\",\n  cord: \"20x40\",\n  maxs: 1.5,\n  mins: 1\n}, {\n  en: \"Digital marketing\",\n  cn: \"数字营销\",\n  cord: \"20x36\",\n  maxs: 0.85,\n  mins: 0.45\n}, {\n  en: \"Reconstruction of freight yard\",\n  cn: \"人货场重构\",\n  cord: \"28x20\",\n  maxs: 0.7,\n  mins: 0.45\n}, {\n  en: \"Data brand\",\n  cn: \"数据赋能品牌\",\n  cord: \"33x30\",\n  maxs: 1.2,\n  mins: 0.9\n}];\n\nexport const logoBgColorMatrix = [\n  57, 52, 57, 52, 57, 57, 52,\n  52, 57, 52, 57, 52, 52, 57,\n  52, 57, 57, 57, 52, 57, 57,\n  57, 52, 52, 57, 52, 57, 52\n];\n\nexport const screenThreeFlags = [{\n  name: \"gucci\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAARCAMAAAAG7xmaAAAAq1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqxziPjAAAAOHRSTlMAufEfsA5ulgwVBIoBXIA3owp9kUD63DtTzfVjB03UYOMxKxiereYSKHRYaMjr7ptFs6jFeSVIv3Kbb6kAAAImSURBVHjalZTnlqpADIAHQUY60osUlWLFgqt5/ye767pO2YOHc/NnZpIJXzJJQE/ZuPUJV1c7WyAqomEU4vuwSTeIkXkq2RjbtbtCf2QqC1d8smtHpDrdMozoe1WdRAh1hMR90FvU3AZQKgSUfyEqVj+R2+eKO3fOcc55WcwQWnjX41anWgD7W3mCWv1Nop+E1EkCgexn7AfDo3/+3Rq+xJKiSbf83W7BJaR2AjJCDjQkTSXHw6ApntE3LUEjByNh3mjZwZ4czJK4KE/QasK4Ic8cB2E4Mu+o0TKpFwjotQVWOJAGSYiorPQxkNiAxPaMQhPyQWMtUw4UQ8DXcwwUATjDDjcAg1NwoAYO6n+BZIDdsEMFvvcZdISHThSKsp6PgRyAaBhkg299BgWQk4x2QSC0Y6ACYD8McgGyz6AaOpGUbwKnD3NEQaEPmPsXIKZ6MmNQ+fZOmQquG3BHa6T2kDPt8+XRwAO2H/WlxYFmMQj6W9GwwWrMVIiYdkzmM0VSbWY4ZEiWNDZpxYGQdSRdtEpgS90sH1Iy5jvERhC/I5hXnUINiytNqb3ECx6E7mXyqqGXQzVDVGQf9vOfJ3U0dgR0DS7rl8ehPHP1ssGd/lzJ8pwm175ASKwa2/CKuuv/9K0nJLltOrjaq7zh/oi1KLpJsabwBt04PMwscy79dkq1IbybbGOYrpYODMHSMM30PPDrsHZbM73Tj1GUVzhmwbt4t1v6DwM8N9Q87bUeAAAAAElFTkSuQmCC\",\n  cord: \"10x30\",\n  maxs: 0.6,\n  mins: 0.8\n}, {\n  name: \"skechers\",\n  logo: \"data:image/png;base64,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\",\n  cord: \"23x35\",\n  maxs: 1.2,\n  mins: 0.8\n}, {\n  name: \"bershka\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAOCAMAAABHJ4HOAAAAtFBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9aXyCHAAAAO3RSTlMAxsoN2DQFP8zVJ84B0L0rQhEC7CQc3eLgnLFXIDratghhFaWPcNEv6PXB8auAUeVG+XeUF0pcl+5qhwpbxXkAAAHhSURBVHjanZPZdoIwEEAnBhKCLLIvKggo4IZ7reX//6sJherxoQ+dh5k5meTOdgKoVcZjluwX8IdM2sng6r79FhxJpmnKGdrZfxBoS5/3tbegMuqMuaX/Jiid0cKVMHg+z4VVVcAqAc2k7g9hDpWcPwmuxxUxJ6b9S3C3otOjEiZBxp0Smcy3rDiQgp0qCB8Rk8LjQMhqfts0QilEk57gxjHhmYN9jh+ChULjLmvL0l1UqNA4QclyK/LxD4GuecFecneJq2xhszY2hr6OBCeKhd7tADbtXsz9wpXliRqm3JM/VUEAjy0BYHHEXE9bQEEzbaZ36cHPkj22LLyXCCDH4uHlKcuhn4MgOIKg20ZAoJOFvDLaYQ4f6xtcDwedsbL2cX+KIycobna3i4GAkq+TM+ven8sgFoRxv6UCcueLUjqhMhm4MMvSU0FeCUZ7oKgQ+LRezWD6JBgpkPL8tmPoOr29Ejanhh/JAI9TJWr/7cJbL3nfTAzneu670OaeCNWrV8IoASDjFODCRHDZgn6gXFYBm/Ga/djF1QZh0HXRqFFS63p21P5fyFtV/AsNoGmPPHtjVZewhUhnXEaXLp1p+MwvrgBp2hUWhSzRG4B5LXZRSS5AjGwAku7I4uIwdj7W32jPLaWFQwgBAAAAAElFTkSuQmCC\",\n  cord: \"20x26\",\n  maxs: 0.7,\n  mins: 0.5\n}, {\n  name: \"ecco\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGYAAAAcCAMAAACkuDr3AAAAq1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqxziPjAAAAOHRSTlMA79yWmQN1Af4i9tVf+i0O4LwITgXMf8GJnRLzSTcLHMb4MpKkQYTRt7Fb5WplqlcWKT1UjXpF6iDr2UcAAAMpSURBVHjatZZZg6IwDIBRbkRFbrxAQWc9wGN05P//sjWhpe2C+zZ5seRr0yZpUqVflx9tJf2+PO2VXf76LlPtnC9jXuHtFWVvm52Zay/8AJZvEJe3DnB/tFzJzwDS8lyY+5aoybhuJLvo/JJtRUFwFMCt2BDwVfo8MJUFAaOtJD126YVt810zyUx2YNngQMAO7sYImD0qfjhm+uhtQQtLdjy75mSwI9p0VAuy+CFgnolg801D/4dXB504Z/VmJsuHAWJrhcrrED4A5IdXA3aNsS/8GkdKXp1gZBgeAn/WgCx5FE69WEpM1Px0mEu66eK8o4NRgLGOaxbaFD889GyISyrcPZwjWOKeL4xMjJs8rk0s1pJ0dgKSgvJN2JWbo9eDNpAjkxK3ANswWgJwJhT4MvizhvtiwIZcOZpvxUjHSeB1QvWTJk4aeOmAsSvndlLXIQzg+AOTAf1R1zkM4IjWlr+nYOwIIw9Gd3rhFpiBS3tmjC5bZbZrbQHcbhglcObJ63U4UQSjBAcoamxw4VDYVRElhBzpPcAGL9cwEgrFgBxCZs9cWuoZaElotL5tYNq+D8CJC1HlQg1DGSwwZiwtsUpmwN3edUyRg136wKznYAEJMJie8GmhAtW87bPmsJyJEmFg+nUWHlrds7Qwb/qtgdf2Z2+6rpfkV2NpEd3VPll79AG4NJWomm7AC8JGmBYD0sJE/t9Nc9QeUMJNmwqqI71py7Yv0rTou4lEgSdUwR1zNenWzWrV1k3I6/0RLRffqVGGNC3uAeYScLpya94g7u0CCukjB+hotNTbHnfh3oBozlp5p6cxYOm0cTg3CtwEIjMFPw3+tZD0EF89tfmIsFk2jdi3T4g6Hdo9nliHLvDukw7tYWJffnt6Q0lx1h0Nj2knTZuwWTPlw3sTKckfAawz+qzI1asZCu+NEVQyPkRCIZlojsngLr6e3Wf1GojA8ghYH0Rg8OU6LQwORdx/gYQHGQNuzoOAVbX6tDjg/NOtVocx2T771gVQffjLMyk2dBNbAKm8IGCouZ3amntPWd4f0w6Yes+8F6yXAGyzA/yd9lDikmtcfwEvEcla7dc9aAAAAABJRU5ErkJggg==\",\n  cord: \"24x31\",\n  maxs: 0.8,\n  mins: 0.4\n}, {\n  name: \"baleno\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAfCAMAAAAMaWnLAAAAllBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+ysAdDAAAAMXRSTlMAu4ek7nhK0i1a/QsBF/hp6PN/RE7LIwQeY51VEDII0G4p3eOp2j5zrzeZlLSN1sUwcwZsNwAAAz5JREFUeNrVltmWojAQhsMiyNqArCooCq6tTt7/5SZFEkmAtr2Y4znz3wCxki+1xaD3FQdBjD6rBOPkw0gTY/O/RR7NHVGbKBfL+Qwyx730rfsJ5ByLun4KqcyINB2YFurlLYrCOqynkVUZWwsPDeQY221MZ0gLWatzJSFVaq6R1/tzSW2PO9mPIhshay2kvxlIUKr5MOprqTi6emBQuExFJKMAhG98jXsluYzMVB9zffeeWiEfDPtg5Qrm8iN3iETg5rlH2uapUYKOmYnI6oQFtSkndrDN3RYTNA9EW60aIpfkveSBVRcOPF0DfF8JSLeBkGqHKqsjyP+O5i71yeiMzPGWgM5pFvfwHtWZc2iAuRwiN8T5cW+eoZIFZAHtZLCwkSm4QSBYsui2hG58cfRN3jZAd10U+7B3GbmiliORnWo9sgqINwsE4m6UkAif/Ay5YiYhxHABQeDJdmP4qgSkF5FJrfcrspDb1yCfJ7a6ioQM1cxJ2J1QKxZFBkmyCVj5jZXaElIhTtJE9dlY0+LZ8rGIotZk5kYwrWF78uljjk5Z72ypARaRGYnFA4GE5Q2K/OJjMzoGkTwieXs6R45P2Wyhft9p+0lIDxpMFxRC2Uwj4XEQkRdo/OeBp940sytjyoxbDBojSzyhaBqpkkc6jMhcapJDyyMRca8TbZvq/wrpjpEo1wnFoUnASnGmTS4hcyg3ZaB4GnnkBStWsicjkUptH1LedfEoyMKpK9A0ckED0Ksl20USkpe6XNwV+YoYkvVa/R7SgU535XNMGyKjDllLx5AB83vkCprrPSRq5H9gBYYHyKrtBlN+cIKyBHq9R2Y7cfF5/ApZQgU+C2gLre/KSEcDk6rLV5izsRPnA5J7bbP+PQT4lv2A5PWyL2m5HmHeAVHkaUVUfF33mM0D9C4mq+bHABN8KiLRDcySYl7HjQ0H7gukYwJnaaRlkbBuAqSsK2sW8HcXYJAfIwnpXrCgxHuBdD1TtL25Y6ReIB6wp+7n0XWr0DGTfXFe5BL8vNrcNrAGl0pbb5vCQUzeVWeXLSubuOGtZ5tuh8v5i4pl+nOll5mjg36Rm5ZlWf9s5tRljt6Tm5flGnH9BXFjzBHy7YowAAAAAElFTkSuQmCC\",\n  cord: \"29x33\",\n  maxs: 0.8,\n  mins: 0.4\n}, {\n  name: \"armni\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ4AAAAQCAMAAADQ4TbhAAAAnFBMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vqQ4GGtAAAAM3RSTlMAiGlaRO4OHS2Wu7Sld8ypAYXj2waN8RYJ0z0zxIJ8ESOgTPiSZlEDb61Xm+q+Kjj8YXImH55PAAAEFElEQVR42q2U6ZLiSAyEZXyC7wsbu32CMZgbvf+7bankpnvomdiJjc0fZUVSqfiqFAX8nTKtTOD3Gi3N/Lc4bfhvW8xQ/3BddxdHolpJK2j1jete9FSx04yMpquKvhtE1Qu3WjmWAK51TxXOw9/f3M5c6FIXOsREVRcAWBG7rezL4csc/gApU48PslgFtB4i/UHfmx+6ne4XYgM6ZLSRqLAFUo0ivEQL8o/IFM1ilaDtFNhNVtsbgIE2AIQeAWmR5aykqPlTfJeDAeOJvWeBJcBn+LItKSxK0vO+AVKJN6a86xl9FyaouADGI53A9LCW5e4TDzTsILhs5MmuOL1ce8brsQeS7Y2FIqUCTOLTAiQ1O40IKUD6Ft7M1m7NeCnugKSkePwt3gLM5z2mynq88DKMYI8VSMVRwm6LMeMF8ToB0gOHcotSe7DFWkPgoNRmHNNtJA84hzci7LLVHhgvSNe8Rclj3P/AKxOqVFtecdW88Aw8w4r2kxxU2e3RZzyNNlJ3Cz3ILI1UNKVYS2g1qTaHvjjKvhyeZHjhoyacOmM8TfOxkHii57l5xzsZEm+iKw528MKzcJVssYR5AJ10zVi/Ml7Ik6Bbxkz0k4oiWjuU2orGYaBiyniv8KLHjmYLjBeOe1wyHpyw+wXPW5zujJfo5wRu6hfebluYSAW/GE+4aRidS2C8I3Ui5Yg3CA7KD2kAeQ0Gj5LDVyC8MVrnYC0YL6kgX59Hxmsi1L7j2e10ZjzRoAfFmPEG1fEKyF54FXr8nu0oe8MzUI5P80n1zvc7XyoX5lQCHGl0HF7FDeGBghNUGeP1BYCDGuPBHiPj1+FWM94N/WAJM95kNcId11/DdT4f34Hxqm/DNanDRtf1Oq4jfdBJjnycTdMMNDoO9zK8gKvIL4HxUrHlgacZD3xc/oqXjdASHmy2+wlew5Wyv57Gg90CT4xX0EaShTEXpmbRm7hZV7GO5DRHV2hLo3uFCQ+8e/9gPENuWevJjJed7877H0sq8VyM8zc8DUMuYt1gt0SH8cCb/1gGfIJUgXaNtmcfF4jnRP50pfWIGrzCjHfAqGE8teTT9zMePbJ3vIvEM+8+vOGBHQd8Q8PsGvdPvOK+57A4FEtTr0PR94M5DO18bNKEpznc3Ge8bGsD4+2AtMeO8KTsN7yxXks8WO1/4BnegV7Xirqwu/RmPBg2BnWOWpgVaBfn5Ntx6Iw87Sf32J6TOex8MB4cVcbLan7963XyiWeuZzyz8sTkFdu7mNWyAOhzSFxv5bq+F7bAysNUXXQTPTHhilBSpW7t2dRe6w6qsmvgpdz3pBjrulNouKW78kKXw3mluPVJE1EDwP24uLu0pJ2u7SmuswepwSyX3qmAv9NoGvAHBXmbwP+ugHv+A5hFfG8BeiUdAAAAAElFTkSuQmCC\",\n  cord: \"35x22\",\n  maxs: 0.7,\n  mins: 0.3\n}, {\n  name: \"sams\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAASCAMAAACAe2s0AAAAn1BMVEVHcEz6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr6+vr5ZUscAAAANHRSTlMAd7vEqy1piGbipflLHrQ6Wg5hCv3vgwYCQJkZ1Fb0csgij8AUM90nUEfmMH1snr3rlM/JGQ8NOwAAAkRJREFUeNq10ulyolAUBOBmCwgIIosiivsatyT9/s82517JaEXHmsxUvj+odNH3cMT/6CX4hn44NrQXfM/SzLgrengkNF7xRWqx0cK3bAMqVooHfN4du2B+HGgugJGnhAmUuOs1uq+3P7Qh0jPFsPCm0NJQ5co+0PY2UuR7XqnnHo1GG5WZs4OrIbWzZJITb9g99H1ehBAdkoFXHifmOFHPW1GzKoS0oKM+sJhTyVzApr/AbzPbNk1zxXOCAetIvrG2bTsKuEcoH7Ul4Lh7kp2CyqqNdMeVKc40m6J32z4ANvOTaVoZOygDZuahwq3ekBvkjAE4l9WNOMSYNhpJyzyQZriqqXwg5KoH0c6yhSpqdpQGXEMYjIByQjExplCWeg0fkiOTa1FbLrFKraEYzB11SvTjE0XZYQStReemqM16qoxoQVQvZkDy2L+u4VERjECv3wEi8jCjo0YtZySNPxZ9snCRdOyABsYMIlu0HhZh0Y1qkgXmZB2/LQGMg9J6WpRfNLc/12CxC8V/XCTSjZ9lzhulaZwCGPA9fPbqctyJ2cIHR0+LtIieLEgEk9N0R645x9eiN7oQCbMFGi/uxazFAfbMZ64YPiraNsGaMTzdlHULkrFV3RWFDI6u28WcQ1eR+Sx+el8gnT/5M7hs+Gp+e7ez4z1F1cNdEWYUEaYtatZ1oqIjefQ3havFcN0UQOUaEIlctk1wA83ZjocUc4hXOb1muNVanR/xXk2ExGsm+ndxTSVf46ctJyRN6fl51XKBv/ULpCxl6aFUvL4AAAAASUVORK5CYII=\",\n  cord: \"36x32\",\n  maxs: 0.9,\n  mins: 0.6\n}, {\n  name: \"g2ooo\",\n  logo: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFkAAAASCAMAAAAHSoIyAAAAsVBMVEVHcEz///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8Q9rufAAAAOnRSTlMA7gj+9fmkEAPoAfH8C3d9g08jvJ0cilY41R7O3idePmku4sqzZheuqcdG2kO/bWNy0RSWM0mPwrm3ZKZG2wAAAodJREFUeNpt0+eOqzAQBeADmGJKKKEGUkjvfZPsvP+DXWBT8O79/liWpaM5GhkvUTrsy/ih+8f4uJXxZvbSNDAgiNJtqkOgl9vyDEF54cTGKvtOTMCJGdUsz0FjqElkSUrz+hRcCmKSrZyOzjv2uLJJYpR5EV6cUFmsdcC4xlZ2DQp6yXoAzgv6Ts6A86XZpxI1w1Mng6g6S5dzHw2fc+9qANEsV91nvXPO13g6f6ucKvltqtTRMoLx57W/srYA5Km9Nz9Tuah0FE3HD3OvTmVU5BXv483sUiU0gQNV9ufxOMCb02V9QLN9fMR0AAZ0M/Hm2xoqLn2h5USVOsyUiGinKSla5tIdPnloMe5sHrG7gQ+zyXSkHdqyoiiyed2F1Vu0lxB0aDixHLRdyYspRZvMd4BPI/zXjBo+BD1aUAhRkRVjiEJbh0tr/E9gUUWlACJV+TPKlGiJP9Xg0fWVdez86NeXMVVWGs0h4kQDiJb0p8aI1hi9+37lu25lQgkwlKhy12O6QiDbFnUg2jH1AZFLJfrKDYIDDTFTicj2DCS/q2/JZQsIHDbtMhmCBzeAnaSjTWPOhSrjtFnyyRCbs3mo9tC2pyShA9r6dgxgqIRoKVWtSzUm1bjYfUAuelbXEFa9Ms0Vj/Ahr3gzrdv+P9FGkahFC+3WwtZqHZooS/kTXNShPZ5Fn+CFukXDVbolGsZIIpFmXJRwjobu2VMHgJmwPEXDmEmboOmfSYNnk21mrfE0zGkS72dHjav272TAz9TF0fdHmsVHz3L9B028QXK4cBbLaDge4+EsGcQnZRnhI/Uep2KyHM31X5oZh7fdZnO/+DLeSneab1baTMebftDyIl90AjT+AcTNVSgpteVAAAAAAElFTkSuQmCC\",\n  cord: \"48x26\",\n  maxs: 0.7,\n  mins: 0.4\n}];","import {\r\n  $,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  toScreenCords,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS\r\n} from \"./common\";\r\n\r\nimport { screenOneFlags } from \"../config\";\r\nconst screenOneFlagMap = initFlags(screenOneFlags);\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 50;\r\nconst AMOUNTY = 60;\r\n\r\nlet count = 0;\r\nlet mouseX = 85;\r\nlet mouseY = -420;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 800;\r\n\r\nconst { particles, pointsWithFlag } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION,\r\n  markPoint: (i, j, particle, marked) => {\r\n    if (`${i}x${j}` in screenOneFlagMap) {\r\n      const { x, z } = particle.position;\r\n      marked.push({ x, z });\r\n    }\r\n  }\r\n});\r\n\r\nexport default initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: $(\"#three-js-screen-1\")\r\n});\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  const ratio = windowHalfY / 250;\r\n\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n\r\n      if (screenOneFlagMap[`${ix}x${iy}`]) {\r\n        const point = pointsWithFlag[j++];\r\n        point.y = particle.position.y;\r\n\r\n        const { style, mins, maxs } = screenOneFlagMap[`${ix}x${iy}`];\r\n        const { x, y } = toScreenCords(point, camera);\r\n\r\n        const scale =\r\n          Math.min(Math.max(particle.scale.x / 6 * maxs, mins), maxs) +\r\n          particle.scale.x / 30;\r\n          console.log(scale, windowHalfY / 200);\r\n        style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale * ratio })`;\r\n      }\r\n    }\r\n  }\r\n\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n\r\nfunction initFlags(flags) {\r\n  const ret = flags.map(flag => {\r\n    const { cn, en, mins, maxs } = flag;\r\n    const div = document.createElement(\"div\");\r\n\r\n    div.className = \"flag-1\";\r\n    div.innerHTML = `<p>${en}</p><h2>${cn}</h2>`;\r\n    $(\"#three-js-screen-1\").appendChild(div);\r\n\r\n    return {\r\n      style: div.style,\r\n      mins,\r\n      maxs\r\n    };\r\n  });\r\n\r\n  return flags.reduce((acc, f, i) => {\r\n    acc[f.cord] = ret[i];\r\n    return acc;\r\n  }, {});\r\n}\r\n","import {\r\n  $,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS\r\n} from \"./common\";\r\n\r\nimport { screenOneFlags } from \"../config\";\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 50;\r\nconst AMOUNTY = 60;\r\n\r\nlet count = 0;\r\nlet mouseX = 885;\r\nlet mouseY = -359;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 500;\r\n\r\nconst { particles } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION\r\n});\r\n\r\nexport default initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: $(\"#three-js-screen-2\")\r\n});\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n    }\r\n  }\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n","import {\r\n  $,\r\n  toArray,\r\n  THREE,\r\n  windowHalfX,\r\n  windowHalfY,\r\n  createSceneAndRenderer,\r\n  initParticles,\r\n  initThreeJS,\r\n  toScreenCords\r\n} from \"./common\";\r\nimport { logoBgColorMatrix } from \"../config\";\r\n\r\nimport { screenThreeFlags } from '../config';\r\nconst screenThreeFlagMap = initFlags(screenThreeFlags);\r\nconst screenDOM = $(\"#three-js-screen-3\");\r\n\r\nconst SEPARATION = 70;\r\nconst AMOUNTX = 60;\r\nconst AMOUNTY = 50;\r\n\r\nlet count = 0;\r\nlet mouseX = -28;\r\nlet mouseY = -450;\r\n\r\nconst { scene, renderer } = createSceneAndRenderer();\r\nconst camera = new THREE.PerspectiveCamera(\r\n  120,\r\n  window.innerWidth / window.innerHeight,\r\n  1,\r\n  10000\r\n);\r\ncamera.position.z = 800;\r\nrenderer.setClearColor(0x000000, .6);\r\n\r\nconst { particles, pointsWithFlag } = initParticles({\r\n  scene,\r\n  amountX: AMOUNTX,\r\n  amontY: AMOUNTY,\r\n  sep: SEPARATION,\r\n  markPoint:(i, j, particle, marked) => {\r\n    if (`${i}x${j}` in screenThreeFlagMap) {\r\n      const { x, z } = particle.position;\r\n      marked.push({ x, z });\r\n    }\r\n  }\r\n});\r\n\r\nconst logoWallCtrl = initLogoWall();\r\n\r\nconst waveCtrl = initThreeJS({\r\n  render,\r\n  camera,\r\n  renderer,\r\n  container: screenDOM\r\n});\r\n\r\nexport default {\r\n  play() {\r\n    logoWallCtrl.play();\r\n    waveCtrl.play();\r\n  },\r\n  pause() {\r\n    logoWallCtrl.pause();\r\n    waveCtrl.pause();\r\n  }\r\n};\r\n\r\n\r\nfunction render() {\r\n  camera.position.x += (mouseX - camera.position.x) * 0.05;\r\n  camera.position.y += (-mouseY - camera.position.y) * 0.05;\r\n  camera.lookAt(scene.position);\r\n\r\n  let i = 0;\r\n  let j = 0;\r\n  for (let ix = 0; ix < AMOUNTX; ix++) {\r\n    for (let iy = 0; iy < AMOUNTY; iy++) {\r\n      const particle = particles[i++];\r\n      particle.position.y =\r\n        Math.sin((ix + count) * 0.3) * 50 + Math.sin((iy + count) * 0.5) * 50;\r\n      particle.scale.x = particle.scale.y =\r\n        (Math.sin((ix + count) * 0.3) + 1) * 1.4 +\r\n        (Math.sin((iy + count) * 0.5) + 1) * 1.4;\r\n  \r\n      if (screenThreeFlagMap[`${ix}x${iy}`]) {\r\n        const point = pointsWithFlag[j++];\r\n        point.y = particle.position.y;\r\n\r\n        const {\r\n          style,\r\n          mins,\r\n          maxs\r\n        } = screenThreeFlagMap[`${ix}x${iy}`];\r\n        const {\r\n          x,\r\n          y\r\n        } = toScreenCords(point, camera);\r\n        const scale = Math.min(\r\n          Math.max(\r\n            particle.scale.x / 6 * maxs,\r\n            mins\r\n          ),\r\n          maxs\r\n        ) + particle.scale.x / 30;\r\n        style.transform = `translate3d(${x}px, ${y}px, 0) scale(${scale})`;\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  renderer.render(scene, camera);\r\n  count += 0.1;\r\n}\r\n\r\nfunction initLogoWall() {\r\n  const queryWithSideEffect = function (sel, fn) {\r\n    const arr = toArray(screenDOM.querySelectorAll(sel));\r\n    return arr.map((el, i) => {\r\n      fn && fn(el, i);\r\n      return el;\r\n    });\r\n  };\r\n\r\n  const logoFlips = queryWithSideEffect(\r\n    '.logo-flip',\r\n    (el, i) => {\r\n      const color = logoBgColorMatrix[i];\r\n      el.style.backgroundColor = `rgb(${color},${color},${color})`;\r\n    }\r\n  );\r\n\r\n  const highlightFlips = function () {\r\n    // remove highlight elems first\r\n    queryWithSideEffect(\r\n      '.hlight',\r\n      el => el.classList.remove('hlight')\r\n    );\r\n\r\n    // 随机两个高亮\r\n    // 保证左侧四列和右侧四列都有\r\n    // 且两者不在一行\r\n    // 第四行容易被遮住 所以降低概率\r\n    const getColNum = () => {\r\n      return Math.random() > 0.2 ? (Math.random() * 3 | 0) : 3;\r\n    };\r\n\r\n    const [first, second] = (() => {\r\n      const cols = [getColNum(), getColNum()];\r\n\r\n      while (cols[0] === cols[1]) {\r\n        cols[1] = getColNum();\r\n      }\r\n\r\n      return [\r\n        7 * cols[0] + (Math.random() * 4 | 0),\r\n        7 * cols[1] + (Math.random() * 3 | 0) + 4\r\n      ];\r\n    })();\r\n\r\n    logoFlips[first].classList.add('hlight');\r\n    logoFlips[second].classList.add('hlight');\r\n  }\r\n\r\n  let stop = false;\r\n  ; (function runFlipHighlight() {\r\n    stop || highlightFlips();\r\n    setTimeout(runFlipHighlight, Math.random() * 2000 + 2000);\r\n  }());\r\n\r\n  return {\r\n    play() {\r\n      stop = false;\r\n    },\r\n    pause() {\r\n      stop = true;\r\n    }\r\n  };\r\n}\r\n\r\n// document.addEventListener(\"mousemove\", onDocumentMouseMove, false);\r\n// function onDocumentMouseMove(event) {\r\n//   mouseX = event.clientX - windowHalfX;\r\n//   mouseY = event.clientY - windowHalfY;\r\n//   console.log(mouseX, mouseY);\r\n// }\r\n\r\nfunction initFlags(flags) {\r\n  const ret = flags.map(flag => {\r\n    const { logo, mins, maxs } = flag;\r\n    const div = document.createElement('div');\r\n\r\n    div.className = 'flag-3';\r\n    div.innerHTML = `<img src=\"${logo}\"><i></i>`;\r\n    $('#three-js-screen-3').appendChild(div);\r\n\r\n    return {\r\n      style: div.style,\r\n      mins,\r\n      maxs\r\n    };\r\n  });\r\n\r\n  return flags.reduce((acc, f, i) => {\r\n    acc[f.cord] = ret[i]\r\n    return acc;\r\n  }, {});\r\n}\r\n","import './styles/swiper.min.css';\nimport './styles/style.css';\n\nimport { $, $$ } from './scripts/common';\nimport slide1 from './scripts/screen-1';\nimport slide2 from './scripts/screen-2';\nimport slide3 from './scripts/screen-3';\n\nconst setScale = () => {\n  const s = Math.max(window.innerWidth, 992) / 1920;\n  const css = `transform-origin:center;transform:scale(${s})`;\n  $$('.text-band').forEach((el) => {\n    el.style.cssText = css;\n  });\n  $$('.honor-bands>div').forEach((el) => {\n    el.style.cssText = `transform-origin:center;transform:translate(-50%,-50%) scale(${s}) ;`;\n  });\n};\nsetScale();\nwindow.addEventListener(\"resize\", setScale);\n\nsetTimeout(() => {\n  $('.swiper-container').classList.remove('loading');\n  const slides = [slide1, slide2, slide3];\n  new window.Swiper ('.swiper-container', {\n    loop: false,\n    autoplay: true,\n    speed: 1000,\n    nextButton: '.swiper-button-next',\n    prevButton: '.swiper-button-prev',\n    autoplayDisableOnInteraction: false,\n    onSlideChangeStart(swiper) {\n      slides.forEach((slide, i) => {\n        if (i === swiper.activeIndex) {\n          slide.play();\n        } else {\n          slide.pause();\n        }\n      })\n    }\n  });\n}, 1000);\n"],"names":["toArray","arrLike","Array","prototype","slice","call","$","selector","document","querySelector","$$","querySelectorAll","toScreenCords","ref","camera","x","y","z","vector","THREE","Vector3","project","Math","round","windowHalfX","windowHalfY","bindResizeCallback","renderer","callbacksOnResize","push","aspect","window","innerWidth","innerHeight","updateProjectionMatrix","setSize","createSceneAndRenderer","const","scene","Scene","CanvasRenderer","alpha","setClearColor","animate","render","requestAnimationFrame","stop","let","pause","play","initThreeJS","container","setPixelRatio","devicePixelRatio","appendChild","domElement","initParticles","amountX","amontY","sep","markPoint","index","particles","pointsWithFlag","material","SpriteCanvasMaterial","color","program","context","beginPath","arc","PI","fill","i","j","particle","Sprite","position","add","getNanoSeconds","hrtime","loadTime","moduleLoadTime","nodeLoadTime","upTime","performance","now","module","process","hr","uptime","Date","getTime","this","root","global","vendors","suffix","raf","caf","length","last","id","queue","callback","_now","next","max","setTimeout","cp","cancelled","e","handle","fn","apply","arguments","cancelAnimationFrame","parameters","Material","type","Color","setValues","Object","create","constructor","isSpriteCanvasMaterial","clone","copy","calculateLights","_ambientLight","setRGB","_directionalLights","_pointLights","l","ll","_lights","light","lightColor","isAmbientLight","isDirectionalLight","isPointLight","calculateLight","normal","_lightColor","lightPosition","_vector3","setFromMatrixPosition","matrixWorld","normalize","amount","dot","intensity","multiplyScalar","subVectors","distance","min","distanceTo","renderSprite","v1","element","setOpacity","opacity","setBlending","blending","scaleX","scale","_canvasWidthHalf","scaleY","_canvasHeightHalf","dist","sqrt","_elemBox","set","isSpriteMaterial","texture","map","pattern","_patterns","undefined","version","textureToPattern","canvas","setFillStyle","bitmap","image","ox","width","offset","oy","height","sx","repeat","sy","cx","cy","_context","save","translate","rotation","rotate","fillRect","restore","getStyle","setStrokeStyle","isPointsMaterial","size","renderLine","v2","moveTo","positionScreen","lineTo","isLineBasicMaterial","setLineWidth","linewidth","setLineCap","linecap","setLineJoin","linejoin","vertexColors","VertexColors","colorStyle1","colorStyle2","grad","createLinearGradient","addColorStop","exception","stroke","expandByScalar","isLineDashedMaterial","setLineDash","dashSize","gapSize","renderFace3","v3","uv1","uv2","uv3","_this","info","vertices","faces","_v1x","_v1y","_v2x","_v2y","_v3x","_v3y","drawTriangle","isMeshLambertMaterial","isMeshPhongMaterial","isMeshStandardMaterial","_diffuseColor","_emissiveColor","emissive","FaceColors","multiply","_color","_centroid","positionWorld","divideScalar","normalModel","wireframe","strokePath","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","fillPath","isMeshBasicMaterial","mapping","UVMapping","_uvs","uvs","patternPath","envMap","SphericalReflectionMapping","_normal","vertexNormalsModel","applyMatrix3","_normalViewMatrix","_uv1x","_uv1y","_uv2x","_uv2y","_uv3x","_uv3y","isMeshNormalMaterial","addScalar","x0","y0","x1","y1","x2","y2","closePath","CompressedTexture","DataTexture","complete","repeatX","wrapS","RepeatWrapping","MirroredRepeatWrapping","repeatY","wrapT","mirrorX","mirrorY","createElement","getContext","setTransform","drawImage","createPattern","onUpdate","u0","v0","u1","u2","a","b","c","d","f","det","idet","offsetX","offsetY","transform","expand","pixels","value","_contextGlobalAlpha","globalAlpha","_contextGlobalCompositeOperation","NormalBlending","globalCompositeOperation","AdditiveBlending","SubtractiveBlending","MultiplyBlending","_contextLineWidth","lineWidth","_contextLineCap","lineCap","_contextLineJoin","lineJoin","_contextStrokeStyle","strokeStyle","_contextFillStyle","fillStyle","_contextLineDash","_renderData","_elements","_v1","_v2","_v3","_projector","Projector","_canvas","_canvasWidth","_canvasHeight","floor","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_pixelRatio","_clearColor","_clearAlpha","_clipBox","Box2","_clearBox","Matrix3","autoClear","sortObjects","sortElements","supportsVertexTextures","setFaceCulling","getContextAttributes","getPixelRatio","updateStyle","style","setViewport","setScissor","setScissorTest","setClearColorHex","hex","console","warn","getClearColor","getClearAlpha","getMaxAnisotropy","clear","isEmpty","intersect","clearRect","r","g","makeEmpty","clearColor","clearDepth","clearStencil","isCamera","background","isColor","projectScene","elements","lights","getNormalMatrix","matrixWorldInverse","el","RenderableSprite","RenderableLine","setFromPoints","intersectsBox","RenderableFace","overdraw","union","error","RenderableObject","object","renderOrder","RenderableVertex","vertexNormalsLength","Vector2","Vector4","visible","vertex","projectObject","Light","Mesh","Line","Points","frustumCulled","_frustum","intersectsObject","addObject","intersectsSprite","children","_object","getNextObjectInPool","applyMatrix4","_viewProjectionMatrix","objects","pushPoint","_vector4","invW","w","_sprite","getNextSpriteInPool","abs","projectionMatrix","_objectCount","_objectPoolLength","_objectPool","getNextVertexInPool","_vertexCount","_vertexPoolLength","_vertexPool","getNextFaceInPool","_faceCount","_facePoolLength","face","_facePool","getNextLineInPool","_lineCount","_linePoolLength","line","_linePool","_spriteCount","_spritePoolLength","sprite","_spritePool","painterSort","clipLine","s1","s2","alpha1","alpha2","bc1near","bc2near","bc1far","bc2far","lerp","_vertex","_face","_line","_modelMatrix","Box3","_boundingBox","_points3","_viewMatrix","Matrix4","_modelViewProjectionMatrix","_normalMatrix","Frustum","_clippedVertex1PositionScreen","_clippedVertex2PositionScreen","projectVector","unprojectVector","unproject","pickingRay","renderList","projectVertex","checkTriangleVisibility","checkBackfaceCulling","normals","colors","normalMatrix","setObject","pushVertex","pushNormal","pushColor","pushUv","pushLine","fromArray","pushTriangle","side","DoubleSide","autoUpdate","updateMatrixWorld","parent","getInverse","multiplyMatrices","setFromMatrix","sort","o","ol","geometry","BufferGeometry","attributes","groups","positions","array","uv","indices","group","start","count","Geometry","faceVertexUvs","isMultiMaterial","isArray","v","vl","morphTargets","morphInfluences","morphTargetInfluences","t","tl","influence","targetVertex","fl","materialIndex","FrontSide","BackSide","negate","faceVertexNormals","vertexNormals","n","nl","vertexUvs","u","step","LineSegments","addEventListener","forEach","logoBgColorMatrix","screenThreeFlags","name","logo","cord","maxs","mins","screenOneFlagMap","flags","ret","flag","cn","en","div","className","innerHTML","reduce","acc","AMOUNTX","AMOUNTY","mouseX","mouseY","PerspectiveCamera","marked","lookAt","ratio","ix","iy","sin","point","log","screenThreeFlagMap","screenDOM","logoWallCtrl","queryWithSideEffect","sel","logoFlips","backgroundColor","highlightFlips","classList","remove","getColNum","random","cols","first","second","runFlipHighlight","waveCtrl","setScale","s","css","cssText","slides","slide1","slide2","slide3","Swiper","loop","autoplay","speed","nextButton","prevButton","autoplayDisableOnInteraction","onSlideChangeStart","swiper","slide","activeIndex"],"mappings":"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"}